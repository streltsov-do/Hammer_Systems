{"version":3,"sources":["views/app-views/main/planner/Container/container.module.css","views/app-views/main/planner/ItemTypes/ItemTypes.js","views/app-views/main/planner/Overlay/Overlay.js","views/app-views/main/planner/Square/Square.js","views/app-views/main/planner/SquareDiv/SquareDiv.js","views/app-views/main/planner/Elem/assets/chair_0.png","views/app-views/main/planner/Elem/Elem.js","views/app-views/main/planner/Elem/assets/chair_1.png","views/app-views/main/planner/Elem/assets/chair_2.png","views/app-views/main/planner/Elem/assets/table_0.png","views/app-views/main/planner/Elem/assets/table_1.png","views/app-views/main/planner/Elem/assets/table_2.png","views/app-views/main/planner/Piece/Piece.js","views/app-views/main/planner/DropZone/DropZone.js","views/app-views/main/planner/Plate/Plate.js","views/app-views/main/planner/Container/Container.js","views/app-views/main/planner/index.js"],"names":["module","exports","ItemTypes","OverlayType","Overlay","type","color","IllegalMoveHover","LegalMoveHover","PossibleMove","getOverlayColor","className","role","style","position","top","left","height","width","zIndex","opacity","backgroundColor","squareStyle","display","justifyContent","alignItems","Square","children","borderStyle","borderWidth","SquareDiv","x","y","canMoveElem","moveElem","plannerState","isOver","canDrop","handlerId","drop","useDrop","accept","collect","monitor","getHandlerId","ref","ELEM_SRC","chair_0","elemStyle","fontSize","fontWeight","cursor","Elem","connect","dispatch","set_start","pos","idx","START_POS","start_pos","start_val","props","img_idx","start","prevDragging","setPrevDragging","useState","isDragging","item","offset0","offset1","drag","preview","useDrag","getItem","useEffect","DragPreviewImage","src","backgroundImage","alt","Piece","boardStyle","flexWrap","state","planner","plannerData","init","data","INIT","elems","addElem","ADD","next","MOVE","next_pos","inited","setInited","trig","setTrig","newPlane","i","save","squareMoveElem","renderSquare","Math","floor","canMoveFull","moveElemFull","squares","push","maxWidth","maxHeight","gap","padding","Plate","textAlign","DndProvider","backend","HTML5Backend","map","elem","showUploadList","beforeUpload","file","reader","FileReader","onload","e","target","result","split","Number","readAsText","onClick","txt","blob","Blob","saveAs","handlerSaveFile","handlerClear","Container","css","container","dropzone","Planner","Component","render"],"mappings":"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","file":"static/js/14.43ad67b8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container_container__1rDv4\",\"dropzone\":\"container_dropzone__O-XFr\"};","export const ItemTypes = {\r\n    ELEM: 'elem',\r\n  }\r\n  ","export var OverlayType;\r\n(function (OverlayType) {\r\n  OverlayType[\"IllegalMoveHover\"] = \"Illegal\";\r\n  OverlayType[\"LegalMoveHover\"] = \"Legal\";\r\n  OverlayType[\"PossibleMove\"] = \"Possible\";\r\n})(OverlayType || (OverlayType = {}));\r\nexport const Overlay = ({ type }) => {\r\n  const color = getOverlayColor(type);\r\n  return (\r\n    <div\r\n      className=\"overlay\"\r\n      role={type}\r\n      style={{\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        zIndex: 1,\r\n        opacity: 0.5,\r\n        backgroundColor: color,\r\n      }}\r\n    />\r\n  );\r\n};\r\nfunction getOverlayColor(type) {\r\n  switch (type) {\r\n    case OverlayType.IllegalMoveHover:\r\n      return \"red\";\r\n    case OverlayType.LegalMoveHover:\r\n      return \"green\";\r\n    case OverlayType.PossibleMove:\r\n      return \"yellow\";\r\n  }\r\n}\r\n","const squareStyle = {\r\n    width: '100%',\r\n    height: '100%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  }\r\n  export const Square = ({ children }) => {\r\n    // const backgroundColor = black ? 'black' : 'white'\r\n    // const color = black ? 'white' : 'black'\r\n    const borderStyle = \"solid\";\r\n    const borderWidth = \"2px\";\r\n    return (\r\n      <div\r\n        style={{\r\n          ...squareStyle,\r\n          borderStyle,\r\n          borderWidth,\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n  ","import { useDrop } from \"react-dnd\";\r\nimport { ItemTypes } from \"../ItemTypes/ItemTypes.js\";\r\nimport { Overlay, OverlayType } from \"../Overlay/Overlay.js\";\r\nimport { Square } from \"../Square/Square.js\";\r\n\r\nconst SquareDiv = ({\r\n  x,\r\n  y,\r\n  children,\r\n  canMoveElem,\r\n  moveElem,\r\n  plannerState\r\n}) => {\r\n  const [{ isOver, canDrop, handlerId }, drop] = useDrop(\r\n    () => ({\r\n      accept: ItemTypes.ELEM,\r\n      canDrop: () => canMoveElem,\r\n      drop: () => {\r\n        moveElem(x, y);\r\n      },\r\n      collect: (monitor) => ({\r\n        isOver: !!monitor.isOver(),\r\n        canDrop: !!monitor.canDrop(),\r\n        handlerId: monitor.getHandlerId(),\r\n      }),\r\n    }),\r\n    [plannerState],\r\n  );\r\n\r\n  return (\r\n    <div\r\n      ref={drop}\r\n      role=\"Space\"\r\n      data-testid={`(${x},${y})`}\r\n      style={{\r\n        position: \"relative\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n      }}\r\n    >\r\n      <Square>{children}</Square>\r\n      {isOver && !canDrop && <Overlay type={OverlayType.IllegalMoveHover} />}\r\n      {/* {!isOver && canDrop && <Overlay type={OverlayType.PossibleMove} />} */}\r\n      {isOver && canDrop && <Overlay type={OverlayType.LegalMoveHover} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SquareDiv;","export default \"data:image/png;base64,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\"","import React, { useEffect, useState } from \"react\";\r\nimport { DragPreviewImage, useDrag } from \"react-dnd\";\r\nimport { DropTarget } from \"react-dnd\";\r\nimport { connect } from \"react-redux\";\r\nimport { START_POS } from \"redux/constants/PlannerData.js\";\r\n\r\nimport { ItemTypes } from \"../ItemTypes/ItemTypes.js\";\r\n\r\nimport chair_0 from \"./assets/chair_0.png\";\r\nimport chair_1 from \"./assets/chair_1.png\";\r\nimport chair_2 from \"./assets/chair_2.png\";\r\n\r\nimport table_0 from \"./assets/table_0.png\";\r\nimport table_1 from \"./assets/table_1.png\";\r\nimport table_2 from \"./assets/table_2.png\";\r\n\r\nconst ELEM_SRC = [chair_0, chair_1, chair_2, table_0, table_1, table_2];\r\n\r\nconst elemStyle = {\r\n  fontSize: 40,\r\n  fontWeight: \"bold\",\r\n  cursor: \"move\",\r\n};\r\n\r\nconst Elem1 = (props) => {\r\n  const { img_idx, start = -1, set_start } = props;\r\n  const [prevDragging, setPrevDragging] = useState(false);\r\n\r\n  const [{ isDragging, item, offset0, offset1 }, drag, preview] = useDrag(\r\n    () => ({\r\n      type: ItemTypes.ELEM,\r\n      collect: (monitor) => ({\r\n        isDragging: !!monitor.isDragging(),\r\n        item: monitor.getItem(),\r\n      }),\r\n    }),\r\n    [],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!prevDragging && isDragging) {\r\n      set_start(start, img_idx);\r\n    }\r\n    setPrevDragging(isDragging);\r\n  }, [isDragging]);\r\n\r\n  return (\r\n    <>\r\n      <DragPreviewImage connect={preview} src={ELEM_SRC[img_idx]} />\r\n      <div\r\n        ref={drag}\r\n        role=\"elem\"\r\n        style={{\r\n          ...elemStyle,\r\n          opacity: isDragging ? 0.5 : 1,\r\n          backgroundImage: { chair_0 },\r\n        }}\r\n      >\r\n        {img_idx === -1 ? (\r\n          <></>\r\n        ) : (\r\n          <img\r\n            src={ELEM_SRC[img_idx]}\r\n            alt=\"img\"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n          ></img>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst Elem = connect(null, (dispatch) => ({\r\n  set_start: (pos, idx) => {\r\n    dispatch({\r\n      type: START_POS,\r\n      start_pos: pos,\r\n      start_val: idx,\r\n    });\r\n  },\r\n}))(Elem1);\r\n\r\nexport { Elem, ELEM_SRC };\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAACsElEQVR4nO2aMWgUQRSGv+q6FHpgSoNo5zU24lknErSLpeBZ2Xh2Il6jFhptjZ2IFtppJ6gpc6jYCdFKhQg5jWAs0qUaGfgPzuNuQdzZ2Zm8D6a4vdv93/t5O/tm58AwDMMwDMMwDCNX9gMt4DRwEbgBrABPgZfAe+AL8BXYAn4DO4DT2NGxLf3ms87x5z4B7gHXde0zwDHgABlwARiMGFH18NodEuXqWAV9Al4BD1WBl4FzwCJwHDgCHAJmgX3AzMi1ZnRsVr85rHMWdQ1/rZvAA+AF8AHYHtG/QoL8VPDzEWOYVww/SBCnEZu6xJFs4K4mcSQbuKtJHP/MQIG3I8ZwUjFskiDLEduX8XGLBGnIxJh94KbM87Ekz7aSak74rg+slXC8KQ2vlR3flNzBgBpz0tggQz4quaMBNVrSWCdD3hY8ld/otvzf421peK3seK3kFgLOgQvS8FrZ8VzJLQXUOCuNZ2TIYyV3PqBGRxqPyJAVJdcNOAd2peG1suO2kusFnAN70vBa2dGrILnh8vEaGdKt4Pa6L41LZEhHyfmHSag5cPigSnYfpIglJefbmVBzYBWtUjROVdDkrhY068nTrmCZ9U4aJ8iQVsFCv6w5cF0aXis75gpeNZU1B25Iw2tlR1PJ/argpa3/K0l2NJTcbkCNXWkk/wq/AdwFvtdgQ2mgFUpSpt6pgXHjI6n18aBG7cSwffIxJcOg4PV91SS5ub484RbqF/RxIT4nvbnemLCpvlbQx4X4nM3mutPYK7ql48xAMzAqLvJIHmcGlmPgkFCVUZVO5Tgz0AysZQX2A608pukmi5uSWKiVxzTdZHE2B5qBUXFWgWZgVJxVoBkYFWcVaAZGxVkFmoFRcVaBZmBUnFVgOQa6wHsVe25PpGyyNdAwDMMwDMMwDIO/+AOav4hjV002WAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVR4nO3ZQU4CURgE4T6kBBO5/yUkeWSWRolMaGaKefUls9FN/5Si0USSJEmSJEmSJEmSJEkiOCX5TjIO/lyTXAI3S4zxDlFmizHIUWaNMYhR/oqxDPzKcX3cuXn3KDPGwEaZOQYuijFAUYwBimIMUBRjgKIYAxTFGKAoxgBFMQYoijFAUYwBimIMUBRjgKIYAxTlPPk/lwbkWRp8LkGMEVSU3Uf45Mdr4AsS1mvw+wPalEFgDAJjEBiDwBjk3YL4hPVrr08M4hdB/A4Z0HeDx3/YbPz5reHvxQ8sw9+LH1iGvxc/sAx/L35gGf5e/MAy/L34gWX4e/EDy/D34geW4e/FDyzD34sfWIa/Fz+wDH8vfmAZ/l78wDL8vfiBZfh78QPL8PfiB5bh78UPLMPfix9Yhr8XP7AMfy9+YBn+XvzAMvy9+IFl+HvxA8vw9+IHluHvxQ8sw9/bHvDfs7dn9xqkzCB+h6zjW1aO9ZY1m2EQFoPAGATGIDAGgTEIjEFgDAJjkNmD0P9au7eXv14GWccgMAYJSyXIDZYR0S1ez2aSAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhklEQVR4nO3XQY7CQBBDUV+S3dz/EiDVHIAdWKrf9H9S7+04ISSRJEmSJEmSJEmSJEmSCB5Jnknmx88ryV/gbhljThjltjGGPMqtYwxxlNvHGNIojhHOKI4RzpPiGOH8fDlGOO8UxwjnRe8Y4fz7coxw/hI7RjjfKY4RzsejY4TzRe8Y4YziGOGM4hjhjOIY4YziGDnnnSLdbfNR9eTtGnhRwroG6wE8cZAB3wjrATxxkAHfCOsBPHGQAd8I6wE8cZAB3wjrATxxkAHfCJI+8u2jdtqjOvS++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi++IBl+L74gGX4vviAZfi+p13QbQ4C4yAwDgLjIDAOAuMgMA4C4yAwDgLjIDAOAuMgMA4Slsog/+LxQQR6iuBpAAAAAElFTkSuQmCC\"","import { Elem } from '../Elem/Elem.js'\r\nexport const Piece = ({ img_idx, start=-1 }) => ((img_idx!==-1) ? <Elem img_idx={img_idx} start={start} /> : null)\r\n","import { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport SquareDiv from \"../SquareDiv/SquareDiv.js\";\r\nimport { Piece } from \"../Piece/Piece.js\";\r\nimport { ADD, INIT, MOVE } from \"redux/constants/PlannerData\";\r\n/** Styling properties applied to the board element */\r\nconst boardStyle = {\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexWrap: \"wrap\",\r\n  backgroundColor: \"brown\",\r\n  borderStyle: \"solid\",\r\n  borderWidth: \"4px\",\r\n};\r\n/** Styling properties applied to each square element */\r\nconst squareStyle = { width: \"12.5%\", height: \"12.5%\" };\r\n/**\r\n * The chessboard component\r\n * @param props The react props\r\n */\r\n\r\nconst canMoveFull = (i, planner) => {\r\n  return planner[i] === -1 ;\r\n};\r\nconst moveElemFull = (i, start, planner, moveElem) => {\r\n  moveElem(planner.elems, i);\r\n};\r\n\r\nconst DropZone = (props) => {\r\n  const { planner, addElem, moveElem } = props;\r\n  const [ inited, setInited ] = useState(false);\r\n  const [ trig, setTrig ] = useState(-1);\r\n  const start_pos = planner.start_pos;\r\n\r\n\r\n  useEffect(() => {\r\n    if (inited) {\r\n      if (start_pos===-1){\r\n        const newPlane = planner.elems;\r\n        const i = planner.next_pos;\r\n        newPlane[i]=planner.start_val;\r\n        moveElem(newPlane, planner.start_pos);\r\n      } else {\r\n        const newPlane = planner.elems;\r\n        const i = planner.next_pos;\r\n        const save = newPlane[i];\r\n        newPlane[i] = newPlane[start_pos];\r\n        newPlane[start_pos] = save;\r\n        moveElem(newPlane, planner.start_pos);\r\n      }\r\n    }\r\n    setInited(true);\r\n  }, [planner.next_pos]);\r\n  \r\n\r\n  const squareMoveElem = (x, y) => {\r\n    const i = y * 8 + x;\r\n    setTrig(i);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (trig!==-1){\r\n      moveElemFull(trig, start_pos, planner, moveElem);\r\n      setTrig(-1);\r\n    }\r\n  },[trig]);\r\n\r\n  function renderSquare(i) {\r\n    const x = i % 8;\r\n    const y = Math.floor(i / 8);\r\n\r\n    const squareCanMoveElem = canMoveFull(\r\n      i,\r\n      planner.elems,\r\n    );\r\n\r\n    return (\r\n      <div key={i} style={squareStyle}>\r\n        <SquareDiv\r\n          x={x}\r\n          y={y}\r\n          canMoveElem={true}\r\n          moveElem={squareMoveElem}\r\n          plannerState={planner.next_pos}\r\n        >\r\n          <Piece img_idx={planner.elems[i]} start={i} />\r\n        </SquareDiv>\r\n      </div>\r\n    );\r\n  }\r\n  const squares = [];\r\n  for (let i = 0; i < 64; i += 1) {\r\n    squares.push(renderSquare(i));\r\n  }\r\n  return <div style={boardStyle}>{squares}</div>;\r\n};\r\n\r\nexport default connect(\r\n  (state) => ({\r\n    planner: state.plannerData,\r\n  }),\r\n  (dispatch) => ({\r\n    init: (data) => {\r\n      dispatch({\r\n        type: INIT,\r\n        elems: data,\r\n      });\r\n    },\r\n    addElem: (data) => {\r\n      dispatch({\r\n        type: ADD,\r\n        elems: data,\r\n      });\r\n    },\r\n    moveElem: (data, next) => {\r\n      dispatch({\r\n        type: MOVE,\r\n        elems: data,\r\n        next_pos: next,\r\n      });\r\n    },\r\n  }),\r\n)(DropZone);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Elem, ELEM_SRC } from \"../Elem/Elem\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { Upload, Button, Icon } from \"antd\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { INIT, MOVE } from \"redux/constants/PlannerData\";\r\n\r\nconst style = {\r\n  maxWidth: \"240px\",\r\n  maxHeight: \"420px\",\r\n  display: \"flex\",\r\n  flexWrap: \"wrap\",\r\n  justifyContent: \"center\",\r\n  gap: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderWidth: \"1px\",\r\n  padding: \"5px\",\r\n};\r\n\r\nconst handlerSaveFile = (data) => {\r\n  let txt = \"\";\r\n  for (var i = 0; i < 64; i++) {\r\n    txt += data[i] + \",\";\r\n  }\r\n  var blob = new Blob([txt], { type: \"text/plain;charset=utf-8\" });\r\n\r\n  saveAs(blob, \"Planner.txt\");\r\n};\r\n\r\nconst handlerClear = (init,planner) => {\r\n  const data=[];\r\n  for (var i = 0; i < 64; i++) {\r\n    data[i] = -1;\r\n  }\r\n  init(data,planner.start_pos);\r\n};\r\n\r\nconst Plate1 = (props) => {\r\n  const { planner, init, moveElem } = props;\r\n\r\n  return (\r\n    <div>\r\n      <h3 style={{ width: \"240px\", textAlign: \"center\" }}>\r\n        Перетаскиваемые объекты\r\n      </h3>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <div style={style}>\r\n          {ELEM_SRC.map((elem, idx) => (\r\n            <Elem key={idx} img_idx={idx}></Elem>\r\n          ))}\r\n        </div>\r\n      </DndProvider>\r\n      <hr></hr>\r\n      <Upload\r\n        accept=\"txt\"\r\n        showUploadList={false}\r\n        beforeUpload={(file) => {\r\n          const reader = new FileReader();\r\n\r\n          reader.onload = (e) => {\r\n            const data = e.target.result.split(\",\");\r\n            for (var i = 0; i < 64; i++) {\r\n              data[i] = Number(data[i]);\r\n            }\r\n            init(data);\r\n          };\r\n          reader.readAsText(file);\r\n\r\n          // Prevent upload\r\n          return false;\r\n        }}\r\n      >\r\n        <Button>\r\n          {/* <Icon type=\"upload\" />  */}\r\n          Загрузить файл c расстановкой\r\n        </Button>\r\n      </Upload>\r\n      <hr></hr>\r\n      <Button onClick={() => handlerSaveFile(planner.elems)}>\r\n        Сохранить расстановку в файл\r\n      </Button>\r\n      <hr></hr>\r\n      <Button onClick={() => handlerClear(init,planner)}>\r\n        Очистить расстановку\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Plate = connect(\r\n  (state) => ({\r\n    planner: state.plannerData,\r\n  }),\r\n  (dispatch) => ({\r\n    init: (data) => {\r\n      dispatch({\r\n        type: INIT,\r\n        elems: data,\r\n      });\r\n    },\r\n    moveElem: (data, next) => {\r\n      dispatch({\r\n        type: MOVE,\r\n        elems: data,\r\n        next_pos: next,\r\n      });\r\n    },\r\n  }),\r\n)(Plate1);\r\n\r\nexport { Plate };\r\n","import React, { Component, useMemo } from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport DropZone from \"../DropZone/DropZone\";\r\nimport { Plate } from \"../Plate/Plate\";\r\nimport css from \"./container.module.css\";\r\n\r\nexport const Container = () => {\r\n  return (\r\n    <div className={css.container}>\r\n      <Plate/>\r\n      <div className={css.dropzone}>\r\n        <DndProvider backend={HTML5Backend}>\r\n          <DropZone />\r\n        </DndProvider>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Container;\r\n","import React, { Component } from \"react\";\r\nimport Container from \"./Container/Container\";\r\n\r\n\r\nexport class Planner extends Component {\r\n  render() {\r\n    return (\r\n      <Container />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Planner;\r\n"],"sourceRoot":""}