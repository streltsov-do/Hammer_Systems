{"version":3,"sources":["../../src/index.ts","../node_modules/antd/es/_util/hooks/useForceUpdate.js","../../../src/hooks/useDragDropManager.ts","../../../src/hooks/useIsomorphicLayoutEffect.ts","../../../src/hooks/useOptionalFactory.ts","../../../src/internals/wrapConnectorHooks.ts","../../../src/internals/isRef.ts","../../../src/utils/js_utils.ts","../../src/EnterLeaveCounter.ts","../../../src/NativeDragSources/NativeDragSource.ts","../../src/NativeTypes.ts","../../../src/NativeDragSources/getDataFromDataTransfer.ts","../../../src/NativeDragSources/nativeTypesConfig.ts","../../../src/NativeDragSources/index.ts","../../src/BrowserDetector.ts","../../src/MonotonicInterpolant.ts","../../src/OffsetUtils.ts","../../src/OptionsReader.ts","../../src/HTML5BackendImpl.ts","../../../src/hooks/useMonitorOutput.ts","../../../src/hooks/useCollector.ts","../../../src/hooks/useCollectedProps.ts","../../../src/core/DndContext.ts","../node_modules/fast-deep-equal/index.js","../../src/FileSaver.js","../../src/makeRequestCall.ts","../../../src/internals/registration.ts","../../../src/core/DragPreviewImage.ts","../../../src/core/DndProvider.tsx","../node_modules/rc-upload/es/request.js","../node_modules/rc-upload/es/uid.js","../node_modules/rc-upload/es/attr-accept.js","../node_modules/rc-upload/es/traverseFileTree.js","../node_modules/rc-upload/es/AjaxUploader.js","../node_modules/rc-upload/es/Upload.js","../node_modules/rc-upload/es/index.js","../node_modules/antd/es/upload/Dragger.js","../node_modules/@ant-design/icons-svg/es/asn/PaperClipOutlined.js","../node_modules/@ant-design/icons/es/icons/PaperClipOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/PictureTwoTone.js","../node_modules/@ant-design/icons/es/icons/PictureTwoTone.js","../node_modules/@ant-design/icons-svg/es/asn/FileTwoTone.js","../node_modules/@ant-design/icons/es/icons/FileTwoTone.js","../node_modules/antd/es/upload/utils.js","../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/DownloadOutlined.js","../node_modules/@ant-design/icons/es/icons/DownloadOutlined.js","../node_modules/antd/es/progress/utils.js","../node_modules/antd/es/progress/Line.js","../node_modules/rc-progress/es/common.js","../node_modules/rc-progress/es/Line.js","../node_modules/rc-progress/es/Circle.js","../node_modules/antd/es/progress/Circle.js","../node_modules/antd/es/progress/Steps.js","../node_modules/antd/es/progress/progress.js","../node_modules/antd/es/progress/index.js","../node_modules/antd/es/upload/UploadList/ListItem.js","../node_modules/antd/es/upload/UploadList/index.js","../node_modules/antd/es/upload/useFreshState.js","../node_modules/antd/es/upload/Upload.js","../node_modules/antd/es/upload/index.js","../node_modules/dnd-core/node_modules/redux/es/redux.js","../../../../src/actions/dragDrop/types.ts","../../../../../src/actions/dragDrop/local/setClientOffset.ts","../../../../src/actions/dragDrop/beginDrag.ts","../../../../src/actions/dragDrop/drop.ts","../../../../src/actions/dragDrop/endDrag.ts","../../../src/utils/matchesType.ts","../../../../src/actions/dragDrop/hover.ts","../../../../src/actions/dragDrop/publishDragSource.ts","../../../src/classes/DragDropManagerImpl.ts","../../../../src/actions/dragDrop/index.ts","../../../src/utils/coords.ts","../../../src/utils/dirtiness.ts","../../../src/classes/DragDropMonitorImpl.ts","../../src/RawTask.ts","../../src/asap.ts","../../src/AsapQueue.ts","../../src/TaskFactory.ts","../../../src/actions/registry.ts","../../src/contracts.ts","../../src/interfaces.ts","../../../src/utils/getNextUniqueId.ts","../../../src/classes/HandlerRegistryImpl.ts","../../../src/utils/equality.ts","../../../src/reducers/dirtyHandlerIds.ts","../../../src/reducers/dragOffset.ts","../../../src/reducers/dragOperation.ts","../../../src/reducers/refCount.ts","../../../src/reducers/stateId.ts","../../../src/reducers/index.ts","../../src/createDragDropManager.ts","../../../../src/hooks/useDrop/connectors.ts","../../../src/internals/TargetConnector.ts","../../../src/internals/DropTargetMonitorImpl.ts","../../../../src/hooks/useDrop/DropTargetImpl.ts","../../../../src/hooks/useDrop/useRegisteredDropTarget.ts","../../../../src/hooks/useDrop/useDropTarget.ts","../../../../src/hooks/useDrop/useAccept.ts","../../../../src/hooks/useDrop/useDrop.ts","../../../../src/hooks/useDrop/useDropTargetMonitor.ts","../../../../src/hooks/useDrop/useDropTargetConnector.ts","../../../../src/hooks/useDrag/connectors.ts","../../../src/internals/SourceConnector.ts","../../../src/internals/DragSourceMonitorImpl.ts","../../../../src/hooks/useDrag/DragSourceImpl.ts","../../../../src/hooks/useDrag/useRegisteredDragSource.ts","../../../../src/hooks/useDrag/useDragSource.ts","../../../../src/hooks/useDrag/useDragType.ts","../../../../src/hooks/useDrag/useDrag.ts","../../../../src/hooks/useDrag/useDragSourceMonitor.ts","../../../../src/hooks/useDrag/useDragSourceConnector.ts"],"names":["invariant","condition","format","args","process","undefined","Error","error","argIndex","replace","name","framesToPop","useForceUpdate","_React$useReducer","React","x","_slicedToArray","useDragDropManager","dragDropManager","useContext","DndContext","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","useOptionalFactory","arg","deps","memoDeps","push","useMemo","shallowEqual","objA","objB","compare","compareContext","compareResult","call","keysA","Object","keys","keysB","length","bHasOwnProperty","prototype","hasOwnProperty","bind","idx","key","valueA","valueB","wrapHookToRecognizeElement","hook","elementOrNode","options","isValidElement","node","element","type","displayName","throwIfCompositeComponentElement","newRef","previousRef","ref","cloneElement","setRef","cloneWithRef","wrapConnectorHooks","hooks","wrappedHooks","forEach","endsWith","wrappedHook","current","isRef","obj","memoize","fn","result","EnterLeaveCounter","enter","enteringNode","previousLength","this","entered","itemsA","itemsB","set","Set","insertItem","item","add","union","filter","isNodeInDocument","contains","leave","leavingNode","items","i","reset","NativeDragSource","initializeExposedProperties","config","exposeProperties","property","defineProperty","configurable","enumerable","get","console","warn","loadDataTransfer","dataTransfer","newProperties","propertyFn","value","matchesTypes","defineProperties","canDrag","beginDrag","isDragging","monitor","handle","getSourceId","endDrag","FILE","URL","TEXT","HTML","getDataFromDataTransfer","typesToTry","defaultValue","reduce","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","files","Array","slice","html","urls","split","text","matchNativeItemType","dataTransferTypes","types","nativeItemType","typeConfig","some","t","indexOf","isFirefox","test","navigator","userAgent","isSafari","Boolean","safari","MonotonicInterpolant","interpolate","xs","ys","c1s","c2s","c3s","mid","low","high","Math","floor","xHere","max","diff","diffSq","indexes","sort","a","b","dys","dxs","ms","dx","dy","m2","mNext","dxNext","common","m","c1","invDx","ELEMENT_NODE","getNodeClientOffset","el","nodeType","parentElement","top","left","getBoundingClientRect","y","getEventClientOffset","e","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","clientOffset","anchorPoint","offsetPoint","isImage","document","nodeName","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","offsetWidth","sourceWidth","offsetHeight","sourceHeight","anchorX","anchorY","dragPreviewWidth","dragPreviewHeight","width","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","calculateYOffset","OptionsReader","globalContext","rootElement","optionsArgs","ownerDocument","HTML5BackendImpl","profile","sourcePreviewNodes","size","sourcePreviewNodeOptions","sourceNodeOptions","sourceNodes","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","dragOverTargetIds","setup","root","__isReactDndBackendSetUp","addEventListeners","teardown","removeEventListeners","clearCurrentDragSourceNode","asyncEndDragFrameId","cancelAnimationFrame","connectDragPreview","sourceId","delete","connectDragSource","handleDragStart","handleSelectStart","setAttribute","addEventListener","removeEventListener","connectDropTarget","targetId","handleDragEnter","handleDragOver","handleDrop","target","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","dropEffect","altKeyPressed","getCurrentDropEffect","isDraggingNativeItem","getCurrentSourcePreviewNodeOptions","captureDraggingState","itemType","getItemType","beginDragNativeItem","currentNativeSource","createNativeDragSource","currentNativeHandle","registry","addSource","actions","setCurrentDragSourceNode","currentDragSourceNode","mouseMoveTimeoutTimer","setTimeout","endDragIfSourceWasRemovedFromDOM","clearTimeout","defaultPrevented","unshift","_e","manager","lastClientOffset","hoverRafId","getSourceClientOffset","source","endDragNativeItem","removeSource","body","cancelHover","scheduleHover","requestAnimationFrame","hover","publishSource","nativeType","setDragImage","dragPreviewOffset","setData","err","publishDragSource","hasAttribute","preventDefault","enterLeaveCounter","altKey","canDropOnTarget","drop","dragDrop","tagName","isContentEditable","getActions","getMonitor","getRegistry","HTML5Backend","context","useMonitorOutput","collect","onCollect","collected","updateCollected","onUpdate","setCollected","useState","useCallback","nextValue","equal","useCollector","handlerId","getHandlerId","subscribeToStateChange","handlerIds","useCollectedProps","collector","connector","reconnect","createContext","module","exports","constructor","isArray","RegExp","flags","valueOf","toString","autoBom","Blob","status","MouseEvent","self","global","HTMLAnchorElement","location","f","open","saveAs","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromTimer","callback","timeoutHandle","handleTimer","intervalHandle","setInterval","clearInterval","makeRequestCall","toggle","observer","createTextNode","observe","characterData","data","registerTarget","addTarget","removeTarget","registerSource","DragPreviewImage","memo","connect","src","Image","connected","img","onload","refCount","INSTANCE_SYM","Symbol","for","DndProvider","children","props","isGlobalInstance","backend","getGlobalContext","debugMode","ctx","createDragDropManager","createSingletonDndContext","getDndContextValue","Provider","getBody","xhr","responseText","response","JSON","parse","upload","option","XMLHttpRequest","onProgress","onprogress","total","percent","loaded","formData","FormData","append","concat","file","filename","onerror","onError","msg","method","action","url","getError","onSuccess","withCredentials","headers","setRequestHeader","h","send","abort","now","Date","index","uid","acceptedFiles","acceptedFilesArray","fileName","mimeType","baseMimeType","str","suffix","validType","trim","charAt","toLowerCase","traverseFileTree","isAccepted","_traverseFileTree","path","isFile","fullPath","webkitRelativePath","writable","isDirectory","dirReader","createReader","fileList","sequence","readEntries","entries","entryList","apply","loopFiles","entryItem","webkitGetAsEntry","AjaxUploader","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","arguments","state","getUid","reqs","onChange","uploadFiles","onClick","fileInput","_this$props","parent","parentNode","focus","querySelector","blur","click","onKeyDown","onFileDrop","multiple","directory","_file","attrAccept","accept","postFiles","map","saveFileInput","_createClass","_isMounted","_this2","beforeUpload","before","then","processedFile","processedFileType","post","catch","log","Promise","resolve","_this3","onStart","_props$transformFile","transformFile","originFile","actionRet","request","customRequest","defaultRequest","transformedFile","all","_ref","_ref2","requestOption","ret","setState","_classNames","_this$props2","Tag","component","prefixCls","className","disabled","id","style","openFileDialogOnClick","onMouseEnter","onMouseLeave","otherProps","_objectWithoutProperties","cls","classNames","_defineProperty","dirProps","webkitdirectory","events","onDrop","onDragOver","tabIndex","createElement","_extends","role","pickAttrs","aria","stopPropagation","display","Component","empty","Upload","saveUploader","uploader","AjaxUpload","defaultProps","multipart","__rest","s","p","getOwnPropertySymbols","propertyIsEnumerable","InternalDragger","_a","restProps","Dragger","PaperClipOutlined","AntdIcon","assign","icon","PaperClipOutlinedSvg","PictureTwoTone","primaryColor","secondaryColor","PictureTwoToneSvg","FileTwoTone","FileTwoToneSvg","fileToObject","lastModified","lastModifiedDate","originFileObj","getFileItem","matchKey","isImageFileType","MEASURE_SIZE","DeleteOutlined","DeleteOutlinedSvg","DownloadOutlined","DownloadOutlinedSvg","validProgress","progress","getSuccessPercent","success","successPercent","devWarning","handleGradient","strokeColor","directionConfig","_strokeColor$from","from","presetPrimaryColors","blue","_strokeColor$to","to","_strokeColor$directio","direction","rest","sortedGradients","gradients","tempArr","formattedKey","parseFloat","isNaN","join","sortGradient","backgroundImage","Line","strokeWidth","strokeLinecap","trailColor","backgroundProps","background","trailStyle","backgroundColor","percentStyle","borderRadius","successPercentStyle","successSegment","trailWidth","useTransitionDuration","percentList","paths","useRef","prevTimeStamp","updated","pathStyle","transitionDuration","transition","gapPosition","strokeColorList","_useTransitionDuratio","center","right","pathString","viewBoxString","stackPtg","viewBox","preserveAspectRatio","d","stroke","fillOpacity","ptg","dashPercent","strokeDasharray","strokeDashoffset","color","gradientSeed","stripPercentToNumber","toArray","symArray","getPathStyles","offset","gapDegree","radius","beginPositionX","beginPositionY","endPositionX","endPositionY","len","PI","Circle","gradientId","_getPathStyles","gradient","find","x1","y1","x2","y2","stopColor","pathStyles","opacity","getStokeList","reverse","getPercentage","realSuccessPercent","circleSize","circleStyle","fontSize","circleWidth","gapPos","green","getStrokeColor","isGradient","wrapperClassName","RCCircle","Steps","steps","_props$percent","_props$strokeWidth","round","stepWidth","styledSteps","ProgressStatuses","tuple","Progress","_React$Component","renderProgress","getPrefixCls","_assertThisInitialized","customizePrefixCls","showInfo","progressStatus","getProgressStatus","progressInfo","renderProcessInfo","classString","omit","_this$props$percent","parseInt","getPercentNumber","isLineType","percentNumber","CloseCircleFilled","CloseOutlined","CheckCircleFilled","CheckOutlined","title","ConfigConsumer","ListItem","_classNames3","_b","locale","listType","progressProps","iconRender","actionIconRender","itemRender","isImgUrl","showPreviewIcon","showRemoveIcon","showDownloadIcon","customRemoveIcon","removeIcon","customDownloadIcon","downloadIcon","onPreview","onDownload","onClose","_React$useState","_React$useState2","showProgress","setShowProgress","progressRafRef","spanClassName","iconNode","thumbUrl","uploadingClassName","_classNames2","thumbnail","alt","aClassName","href","rel","message","infoUploadingClass","linkProps","removeFile","downloadFile","downloadOrDelete","picture","listItemNameClass","preview","previewIcon","pointerEvents","previewFile","EyeOutlined","statusText","uploadError","iconAndPreview","dom","CSSMotion","motionName","visible","motionClassName","loadingProgress","listContainerNameClass","Tooltip","getPopupContainer","listItemMotion","collapseMotion","onAppearEnd","onEnterEnd","onLeaveEnd","InternalUploadList","onRemove","isImageUrl","_ref$items","appendAction","forceUpdate","motionAppear","setMotionAppear","FileReader","File","previewDataUrl","onInternalPreview","onInternalDownload","onInternalClose","internalIconRender","isLoading","fileIcon","LoadingOutlined","uploading","customIcon","btnProps","btnIcon","Button","handlePreview","handleDownload","_React$useContext","ConfigContext","listClassNames","motionKeyList","_toConsumableArray","animationDirection","motionConfig","CSSMotionList","motionStyle","_ref3","oriProps","UploadList","canvas","cssText","appendChild","getContext","drawWidth","drawHeight","drawImage","dataURL","toDataURL","removeChild","createObjectURL","extension","temp","filenameWithoutSuffix","exec","extname","useFreshState","propValue","valueRef","rafRef","setValue","newValue","cleanUp","raf","cancel","InternalUpload","fileListProp","defaultFileList","showUploadList","propLocale","maxCount","dragState","setDragState","_useFreshState","_useFreshState2","getFileList","setFileList","timestamp","onInternalChange","info","cloneList","targetItem","nextFileList","fileIndex","findIndex","event","handleRemove","currentFile","removedFileList","removed","removeFileItem","rcUploadProps","fileListArgs","beforeUploadProp","uniqueList","every","uf","renderUploadList","button","LocaleReceiver","componentName","defaultLocale","dragCls","onDragLeave","RcUpload","uploadButtonCls","uploadButton","supportServerRender","formatProdErrorMessage","code","$$observable","observable","randomString","random","substring","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","splice","dispatch","listeners","replaceReducer","nextReducer","outerSubscribe","observeState","next","unsubscribe","isObject","input","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","sourceClientOffset","payload","ResetCoordinatesAction","createBeginDrag","sourceIds","getSource","verifyInvariants","canDragSource","getDraggableSource","verifyGetSourceClientOffsetIsFunction","verifyItemIsObject","pinSource","getSourceType","isSourcePublic","createDrop","didDrop","targetIds","getTargetIds","getDroppableTargets","dropResult","getTarget","verifyDropResultType","getDropResult","determineDropResult","createEndDrag","verifyIsDragging","unpinSource","matchesType","targetType","draggedItemType","createHover","targetIdsArg","verifyTargetIdsIsArray","getTargetType","removeNonMatchingTargetIds","lastIndexOf","checkInvariants","hoverAllTargets","createPublishDragSource","DragDropManagerImpl","receiveBackend","getBackend","store","createDragDropActions","boundActions","actionCreator","isSetUp","handleRefCountChange","shouldSetUp","subtract","NONE","ALL","__IS_NONE__","__IS_ALL__","DragDropMonitorImpl","prevStateId","stateId","currentStateId","canSkipListener","dirtyIds","areDirty","dirtyHandlerIds","subscribeToOffsetChange","previousState","dragOffset","nextState","canDrop","isDraggingSource","isOverTarget","shallow","dragOperation","getItem","getInitialClientOffset","initialClientOffset","getInitialSourceClientOffset","initialSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","RawTask","task","release","asapQueue","enqueueTask","queue","q","requestFlush","flushing","pendingErrors","capacity","flush","currentIndex","scan","newLength","registerPendingError","requestErrorThrow","shift","taskFactory","create","tasks","freeTasks","pop","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","validateType","allowArray","HandlerRole","SOURCE","TARGET","nextUniqueId","getNextHandlerId","parseRoleFromHandlerId","mapContainsValue","searchValue","isDone","done","HandlerRegistryImpl","validateSourceContract","addHandler","validateTargetContract","containsHandler","handler","dragSources","dropTargets","includePinned","isSourceId","pinnedSourceId","pinnedSource","isTargetId","strictEquality","prevTargetIds","Map","has","count","xor","didChange","isEqual","areArraysEqual","prevInnermostTargetId","innermostTargetId","initialState","offsetA","offsetB","c","backendFactory","backendOptions","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId","makeStoreInstance","useConnectDropTarget","dropTarget","TargetConnector","connectTarget","didHandlerIdChange","didDropTargetChange","didOptionsChange","disconnectDropTarget","lastConnectedHandlerId","lastConnectedDropTarget","lastConnectedDropTargetOptions","dropTargetOptions","unsubscribeDropTarget","receiveHandlerId","newHandlerId","dropTargetOptionsInternal","dropTargetNode","dropTargetRef","clearDropTarget","isCallingCanDrop","DropTargetMonitorImpl","internalMonitor","isOver","DropTargetImpl","spec","useRegisteredDropTarget","useDropTarget","useAccept","unregister","useDrop","specArg","useDropTargetMonitor","useDropTargetConnector","useConnectDragSource","dragSource","useConnectDragPreview","SourceConnector","dragSourceOptions","dragSourceOptionsInternal","dragPreviewOptions","dragPreviewOptionsInternal","reconnectDragSource","reconnectDragPreview","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","lastConnectedDragSource","lastConnectedDragSourceOptions","dragSourceUnsubscribe","forceDidChange","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","lastConnectedDragPreview","lastConnectedDragPreviewOptions","dragPreviewUnsubscribe","dragPreviewNode","dragPreviewRef","dragSourceNode","dragSourceRef","clearDragSource","clearDragPreview","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","DragSourceImpl","globalMonitor","end","useRegisteredDragSource","useDragSource","useDragType","useDrag","begin","useDragSourceMonitor","useDragSourceConnector","previewOptions"],"mappings":"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","file":"static/js/6.ea78d024.chunk.js","sourcesContent":["export * from './asap.js'\nexport * from './AsapQueue.js'\nexport * from './TaskFactory.js'\nexport * from './types.js'\n","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nexport default function useForceUpdate() {\n  var _React$useReducer = React.useReducer(function (x) {\n    return x + 1;\n  }, 0),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      forceUpdate = _React$useReducer2[1];\n\n  return forceUpdate;\n}","import { invariant } from '@react-dnd/invariant'\nimport type { DragDropManager } from 'dnd-core'\nimport { useContext } from 'react'\n\nimport { DndContext } from '../core/index.js'\n\n/**\n * A hook to retrieve the DragDropManager from Context\n */\nexport function useDragDropManager(): DragDropManager {\n\tconst { dragDropManager } = useContext(DndContext)\n\tinvariant(dragDropManager != null, 'Expected drag drop context')\n\treturn dragDropManager as DragDropManager\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\n// suppress the useLayoutEffect warning on server side.\nexport const useIsomorphicLayoutEffect =\n\ttypeof window !== 'undefined' ? useLayoutEffect : useEffect\n","import { useMemo } from 'react'\n\nimport type { FactoryOrInstance } from './types.js'\n\nexport function useOptionalFactory<T>(\n\targ: FactoryOrInstance<T>,\n\tdeps?: unknown[],\n): T {\n\tconst memoDeps = [...(deps || [])]\n\tif (deps == null && typeof arg !== 'function') {\n\t\tmemoDeps.push(arg)\n\t}\n\treturn useMemo<T>(() => {\n\t\treturn typeof arg === 'function' ? (arg as () => T)() : (arg as T)\n\t}, memoDeps)\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { ReactElement } from 'react'\nimport { cloneElement, isValidElement } from 'react'\n\nfunction throwIfCompositeComponentElement(element: ReactElement<any>) {\n\t// Custom components can no longer be wrapped directly in React DnD 2.0\n\t// so that we don't need to depend on findDOMNode() from react-dom.\n\tif (typeof element.type === 'string') {\n\t\treturn\n\t}\n\n\tconst displayName =\n\t\t(element.type as any).displayName || element.type.name || 'the component'\n\n\tthrow new Error(\n\t\t'Only native element nodes can now be passed to React DnD connectors.' +\n\t\t\t`You can either wrap ${displayName} into a <div>, or turn it into a ` +\n\t\t\t'drag source or a drop target itself.',\n\t)\n}\n\nfunction wrapHookToRecognizeElement(hook: (node: any, options: any) => void) {\n\treturn (elementOrNode = null, options = null) => {\n\t\t// When passed a node, call the hook straight away.\n\t\tif (!isValidElement(elementOrNode)) {\n\t\t\tconst node = elementOrNode\n\t\t\thook(node, options)\n\t\t\t// return the node so it can be chained (e.g. when within callback refs\n\t\t\t// <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\t\t\treturn node\n\t\t}\n\n\t\t// If passed a ReactElement, clone it and attach this function as a ref.\n\t\t// This helps us achieve a neat API where user doesn't even know that refs\n\t\t// are being used under the hood.\n\t\tconst element: ReactElement | null = elementOrNode\n\t\tthrowIfCompositeComponentElement(element as any)\n\n\t\t// When no options are passed, use the hook directly\n\t\tconst ref = options ? (node: Element) => hook(node, options) : hook\n\t\treturn cloneWithRef(element, ref)\n\t}\n}\n\nexport function wrapConnectorHooks(hooks: any) {\n\tconst wrappedHooks: any = {}\n\n\tObject.keys(hooks).forEach((key) => {\n\t\tconst hook = hooks[key]\n\n\t\t// ref objects should be passed straight through without wrapping\n\t\tif (key.endsWith('Ref')) {\n\t\t\twrappedHooks[key] = hooks[key]\n\t\t} else {\n\t\t\tconst wrappedHook = wrapHookToRecognizeElement(hook)\n\t\t\twrappedHooks[key] = () => wrappedHook\n\t\t}\n\t})\n\n\treturn wrappedHooks\n}\n\nfunction setRef(ref: any, node: any) {\n\tif (typeof ref === 'function') {\n\t\tref(node)\n\t} else {\n\t\tref.current = node\n\t}\n}\n\nfunction cloneWithRef(element: any, newRef: any): ReactElement<any> {\n\tconst previousRef = element.ref\n\tinvariant(\n\t\ttypeof previousRef !== 'string',\n\t\t'Cannot connect React DnD to an element with an existing string ref. ' +\n\t\t\t'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' +\n\t\t\t'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs',\n\t)\n\n\tif (!previousRef) {\n\t\t// When there is no ref on the element, use the new ref directly\n\t\treturn cloneElement(element, {\n\t\t\tref: newRef,\n\t\t})\n\t} else {\n\t\treturn cloneElement(element, {\n\t\t\tref: (node: any) => {\n\t\t\t\tsetRef(previousRef, node)\n\t\t\t\tsetRef(newRef, node)\n\t\t\t},\n\t\t})\n\t}\n}\n","export interface Ref<T> {\n\tcurrent: T\n}\n\nexport function isRef(obj: unknown): boolean {\n\treturn (\n\t\t// eslint-disable-next-line no-prototype-builtins\n\t\tobj !== null &&\n\t\ttypeof obj === 'object' &&\n\t\tObject.prototype.hasOwnProperty.call(obj, 'current')\n\t)\n}\n","// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get<T>(obj: any, path: string, defaultValue: T): T {\n\treturn path\n\t\t.split('.')\n\t\t.reduce((a, c) => (a && a[c] ? a[c] : defaultValue || null), obj) as T\n}\n\n/**\n * drop-in replacement for _.without\n */\nexport function without<T>(items: T[], item: T): T[] {\n\treturn items.filter((i) => i !== item)\n}\n\n/**\n * drop-in replacement for _.isString\n * @param input\n */\nexport function isString(input: any): boolean {\n\treturn typeof input === 'string'\n}\n\n/**\n * drop-in replacement for _.isString\n * @param input\n */\nexport function isObject(input: any): boolean {\n\treturn typeof input === 'object'\n}\n\n/**\n * replacement for _.xor\n * @param itemsA\n * @param itemsB\n */\nexport function xor<T extends string | number>(itemsA: T[], itemsB: T[]): T[] {\n\tconst map = new Map<T, number>()\n\tconst insertItem = (item: T) => {\n\t\tmap.set(item, map.has(item) ? (map.get(item) as number) + 1 : 1)\n\t}\n\titemsA.forEach(insertItem)\n\titemsB.forEach(insertItem)\n\n\tconst result: T[] = []\n\tmap.forEach((count, key) => {\n\t\tif (count === 1) {\n\t\t\tresult.push(key)\n\t\t}\n\t})\n\treturn result\n}\n\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\nexport function intersection<T>(itemsA: T[], itemsB: T[]): T[] {\n\treturn itemsA.filter((t) => itemsB.indexOf(t) > -1)\n}\n","import { union, without } from './utils/js_utils.js'\n\ntype NodePredicate = (node: Node | null | undefined) => boolean\n\nexport class EnterLeaveCounter {\n\tprivate entered: any[] = []\n\tprivate isNodeInDocument: NodePredicate\n\n\tpublic constructor(isNodeInDocument: NodePredicate) {\n\t\tthis.isNodeInDocument = isNodeInDocument\n\t}\n\n\tpublic enter(enteringNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tconst isNodeEntered = (node: Node): boolean =>\n\t\t\tthis.isNodeInDocument(node) &&\n\t\t\t(!node.contains || node.contains(enteringNode as Node))\n\n\t\tthis.entered = union(this.entered.filter(isNodeEntered), [enteringNode])\n\n\t\treturn previousLength === 0 && this.entered.length > 0\n\t}\n\n\tpublic leave(leavingNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tthis.entered = without(\n\t\t\tthis.entered.filter(this.isNodeInDocument),\n\t\t\tleavingNode,\n\t\t)\n\n\t\treturn previousLength > 0 && this.entered.length === 0\n\t}\n\n\tpublic reset(): void {\n\t\tthis.entered = []\n\t}\n}\n","import type { DragDropMonitor } from 'dnd-core'\n\nimport type { NativeItemConfig } from './nativeTypesConfig.js'\n\nexport class NativeDragSource {\n\tpublic item: any\n\tprivate config: NativeItemConfig\n\n\tpublic constructor(config: NativeItemConfig) {\n\t\tthis.config = config\n\t\tthis.item = {}\n\t\tthis.initializeExposedProperties()\n\t}\n\n\tprivate initializeExposedProperties() {\n\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\tObject.defineProperty(this.item, property, {\n\t\t\t\tconfigurable: true, // This is needed to allow redefining it later\n\t\t\t\tenumerable: true,\n\t\t\t\tget() {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`Browser doesn't allow reading \"${property}\" until the drop event.`,\n\t\t\t\t\t)\n\t\t\t\t\treturn null\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\t}\n\n\tpublic loadDataTransfer(dataTransfer: DataTransfer | null | undefined): void {\n\t\tif (dataTransfer) {\n\t\t\tconst newProperties: PropertyDescriptorMap = {}\n\t\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\t\tconst propertyFn = this.config.exposeProperties[property]\n\t\t\t\tif (propertyFn != null) {\n\t\t\t\t\tnewProperties[property] = {\n\t\t\t\t\t\tvalue: propertyFn(dataTransfer, this.config.matchesTypes),\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tObject.defineProperties(this.item, newProperties)\n\t\t}\n\t}\n\n\tpublic canDrag(): boolean {\n\t\treturn true\n\t}\n\n\tpublic beginDrag(): any {\n\t\treturn this.item\n\t}\n\n\tpublic isDragging(monitor: DragDropMonitor, handle: string): boolean {\n\t\treturn handle === monitor.getSourceId()\n\t}\n\n\tpublic endDrag(): void {\n\t\t// empty\n\t}\n}\n","export const FILE = '__NATIVE_FILE__'\nexport const URL = '__NATIVE_URL__'\nexport const TEXT = '__NATIVE_TEXT__'\nexport const HTML = '__NATIVE_HTML__'\n","export function getDataFromDataTransfer(\n\tdataTransfer: DataTransfer,\n\ttypesToTry: string[],\n\tdefaultValue: string,\n): string {\n\tconst result = typesToTry.reduce(\n\t\t(resultSoFar, typeToTry) => resultSoFar || dataTransfer.getData(typeToTry),\n\t\t'',\n\t)\n\n\treturn result != null ? result : defaultValue\n}\n","import * as NativeTypes from '../NativeTypes.js'\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer.js'\n\nexport interface NativeItemConfigExposePropreties {\n\t[property: string]: (\n\t\tdataTransfer: DataTransfer,\n\t\tmatchesTypes: string[],\n\t) => any\n}\n\nexport interface NativeItemConfig {\n\texposeProperties: NativeItemConfigExposePropreties\n\tmatchesTypes: string[]\n}\n\nexport const nativeTypesConfig: {\n\t[key: string]: NativeItemConfig\n} = {\n\t[NativeTypes.FILE]: {\n\t\texposeProperties: {\n\t\t\tfiles: (dataTransfer: DataTransfer): File[] =>\n\t\t\t\tArray.prototype.slice.call(dataTransfer.files),\n\t\t\titems: (dataTransfer: DataTransfer): DataTransferItemList =>\n\t\t\t\tdataTransfer.items,\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Files'],\n\t},\n\t[NativeTypes.HTML]: {\n\t\texposeProperties: {\n\t\t\thtml: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Html', 'text/html'],\n\t},\n\t[NativeTypes.URL]: {\n\t\texposeProperties: {\n\t\t\turls: (dataTransfer: DataTransfer, matchesTypes: string[]): string[] =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n'),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Url', 'text/uri-list'],\n\t},\n\t[NativeTypes.TEXT]: {\n\t\texposeProperties: {\n\t\t\ttext: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Text', 'text/plain'],\n\t},\n}\n","import { NativeDragSource } from './NativeDragSource.js'\nimport { nativeTypesConfig } from './nativeTypesConfig.js'\n\nexport function createNativeDragSource(\n\ttype: string,\n\tdataTransfer?: DataTransfer,\n): NativeDragSource {\n\tconst config = nativeTypesConfig[type]\n\tif (!config) {\n\t\tthrow new Error(`native type ${type} has no configuration`)\n\t}\n\tconst result = new NativeDragSource(config)\n\tresult.loadDataTransfer(dataTransfer)\n\treturn result\n}\n\nexport function matchNativeItemType(\n\tdataTransfer: DataTransfer | null,\n): string | null {\n\tif (!dataTransfer) {\n\t\treturn null\n\t}\n\n\tconst dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || [])\n\treturn (\n\t\tObject.keys(nativeTypesConfig).filter((nativeItemType) => {\n\t\t\tconst typeConfig = nativeTypesConfig[nativeItemType]\n\t\t\tif (!typeConfig?.matchesTypes) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn typeConfig.matchesTypes.some(\n\t\t\t\t(t) => dataTransferTypes.indexOf(t) > -1,\n\t\t\t)\n\t\t})[0] || null\n\t)\n}\n","import { memoize } from './utils/js_utils.js'\n\ndeclare global {\n\tinterface Window extends HTMLElement {\n\t\tsafari: any\n\t}\n}\n\nexport type Predicate = () => boolean\nexport const isFirefox: Predicate = memoize(() =>\n\t/firefox/i.test(navigator.userAgent),\n)\nexport const isSafari: Predicate = memoize(() => Boolean(window.safari))\n","export class MonotonicInterpolant {\n\tprivate xs: any\n\tprivate ys: any\n\tprivate c1s: any\n\tprivate c2s: any\n\tprivate c3s: any\n\n\tpublic constructor(xs: number[], ys: number[]) {\n\t\tconst { length } = xs\n\n\t\t// Rearrange xs and ys so that xs is sorted\n\t\tconst indexes = []\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tindexes.push(i)\n\t\t}\n\t\tindexes.sort((a, b) => ((xs[a] as number) < (xs[b] as number) ? -1 : 1))\n\n\t\t// Get consecutive differences and slopes\n\t\tconst dys = []\n\t\tconst dxs = []\n\t\tconst ms = []\n\t\tlet dx\n\t\tlet dy\n\t\tfor (let i = 0; i < length - 1; i++) {\n\t\t\tdx = (xs[i + 1] as number) - (xs[i] as number)\n\t\t\tdy = (ys[i + 1] as number) - (ys[i] as number)\n\t\t\tdxs.push(dx)\n\t\t\tdys.push(dy)\n\t\t\tms.push(dy / dx)\n\t\t}\n\n\t\t// Get degree-1 coefficients\n\t\tconst c1s = [ms[0]]\n\t\tfor (let i = 0; i < dxs.length - 1; i++) {\n\t\t\tconst m2 = ms[i] as number\n\t\t\tconst mNext = ms[i + 1] as number\n\t\t\tif (m2 * mNext <= 0) {\n\t\t\t\tc1s.push(0)\n\t\t\t} else {\n\t\t\t\tdx = dxs[i] as number\n\t\t\t\tconst dxNext = dxs[i + 1] as number\n\t\t\t\tconst common = dx + dxNext\n\t\t\t\tc1s.push(\n\t\t\t\t\t(3 * common) / ((common + dxNext) / m2 + (common + dx) / mNext),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tc1s.push(ms[ms.length - 1])\n\n\t\t// Get degree-2 and degree-3 coefficients\n\t\tconst c2s = []\n\t\tconst c3s = []\n\t\tlet m\n\t\tfor (let i = 0; i < c1s.length - 1; i++) {\n\t\t\tm = ms[i] as number\n\t\t\tconst c1 = c1s[i] as number\n\t\t\tconst invDx = 1 / (dxs[i] as number)\n\t\t\tconst common = c1 + (c1s[i + 1] as number) - m - m\n\t\t\tc2s.push((m - c1 - common) * invDx)\n\t\t\tc3s.push(common * invDx * invDx)\n\t\t}\n\n\t\tthis.xs = xs\n\t\tthis.ys = ys\n\t\tthis.c1s = c1s\n\t\tthis.c2s = c2s\n\t\tthis.c3s = c3s\n\t}\n\n\tpublic interpolate(x: number): number {\n\t\tconst { xs, ys, c1s, c2s, c3s } = this\n\n\t\t// The rightmost point in the dataset should give an exact result\n\t\tlet i = xs.length - 1\n\t\tif (x === xs[i]) {\n\t\t\treturn ys[i]\n\t\t}\n\n\t\t// Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\t\tlet low = 0\n\t\tlet high = c3s.length - 1\n\t\tlet mid\n\t\twhile (low <= high) {\n\t\t\tmid = Math.floor(0.5 * (low + high))\n\t\t\tconst xHere = xs[mid]\n\t\t\tif (xHere < x) {\n\t\t\t\tlow = mid + 1\n\t\t\t} else if (xHere > x) {\n\t\t\t\thigh = mid - 1\n\t\t\t} else {\n\t\t\t\treturn ys[mid]\n\t\t\t}\n\t\t}\n\t\ti = Math.max(0, high)\n\n\t\t// Interpolate\n\t\tconst diff = x - xs[i]\n\t\tconst diffSq = diff * diff\n\t\treturn ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq\n\t}\n}\n","import type { XYCoord } from 'dnd-core'\n\nimport { isFirefox, isSafari } from './BrowserDetector.js'\nimport { MonotonicInterpolant } from './MonotonicInterpolant.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Node): XYCoord | null {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\n\tif (!el) {\n\t\treturn null\n\t}\n\n\tconst { top, left } = (el as HTMLElement).getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientOffset(e: MouseEvent): XYCoord {\n\treturn {\n\t\tx: e.clientX,\n\t\ty: e.clientY,\n\t}\n}\n\nfunction isImageNode(node: any) {\n\treturn (\n\t\tnode.nodeName === 'IMG' &&\n\t\t(isFirefox() || !document.documentElement?.contains(node))\n\t)\n}\n\nfunction getDragPreviewSize(\n\tisImage: boolean,\n\tdragPreview: any,\n\tsourceWidth: number,\n\tsourceHeight: number,\n) {\n\tlet dragPreviewWidth = isImage ? dragPreview.width : sourceWidth\n\tlet dragPreviewHeight = isImage ? dragPreview.height : sourceHeight\n\n\t// Work around @2x coordinate discrepancies in browsers\n\tif (isSafari() && isImage) {\n\t\tdragPreviewHeight /= window.devicePixelRatio\n\t\tdragPreviewWidth /= window.devicePixelRatio\n\t}\n\treturn { dragPreviewWidth, dragPreviewHeight }\n}\n\nexport function getDragPreviewOffset(\n\tsourceNode: HTMLElement,\n\tdragPreview: HTMLElement,\n\tclientOffset: XYCoord,\n\tanchorPoint: { anchorX: number; anchorY: number },\n\toffsetPoint: { offsetX: number; offsetY: number },\n): XYCoord {\n\t// The browsers will use the image intrinsic size under different conditions.\n\t// Firefox only cares if it's an image, but WebKit also wants it to be detached.\n\tconst isImage = isImageNode(dragPreview)\n\tconst dragPreviewNode = isImage ? sourceNode : dragPreview\n\tconst dragPreviewNodeOffsetFromClient = getNodeClientOffset(\n\t\tdragPreviewNode,\n\t) as XYCoord\n\tconst offsetFromDragPreview = {\n\t\tx: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n\t\ty: clientOffset.y - dragPreviewNodeOffsetFromClient.y,\n\t}\n\tconst { offsetWidth: sourceWidth, offsetHeight: sourceHeight } = sourceNode\n\tconst { anchorX, anchorY } = anchorPoint\n\tconst { dragPreviewWidth, dragPreviewHeight } = getDragPreviewSize(\n\t\tisImage,\n\t\tdragPreview,\n\t\tsourceWidth,\n\t\tsourceHeight,\n\t)\n\n\tconst calculateYOffset = () => {\n\t\tconst interpolantY = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the top\n\t\t\t\toffsetFromDragPreview.y,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.y / sourceHeight) * dragPreviewHeight,\n\t\t\t\t// Dock to the bottom\n\t\t\t\toffsetFromDragPreview.y + dragPreviewHeight - sourceHeight,\n\t\t\t],\n\t\t)\n\t\tlet y = interpolantY.interpolate(anchorY)\n\t\t// Work around Safari 8 positioning bug\n\t\tif (isSafari() && isImage) {\n\t\t\t// We'll have to wait for @3x to see if this is entirely correct\n\t\t\ty += (window.devicePixelRatio - 1) * dragPreviewHeight\n\t\t}\n\t\treturn y\n\t}\n\n\tconst calculateXOffset = () => {\n\t\t// Interpolate coordinates depending on anchor point\n\t\t// If you know a simpler way to do this, let me know\n\t\tconst interpolantX = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the left\n\t\t\t\toffsetFromDragPreview.x,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.x / sourceWidth) * dragPreviewWidth,\n\t\t\t\t// Dock to the right\n\t\t\t\toffsetFromDragPreview.x + dragPreviewWidth - sourceWidth,\n\t\t\t],\n\t\t)\n\t\treturn interpolantX.interpolate(anchorX)\n\t}\n\n\t// Force offsets if specified in the options.\n\tconst { offsetX, offsetY } = offsetPoint\n\tconst isManualOffsetX = offsetX === 0 || offsetX\n\tconst isManualOffsetY = offsetY === 0 || offsetY\n\treturn {\n\t\tx: isManualOffsetX ? offsetX : calculateXOffset(),\n\t\ty: isManualOffsetY ? offsetY : calculateYOffset(),\n\t}\n}\n","import type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport class OptionsReader {\n\tpublic ownerDocument: Document | null = null\n\tprivate globalContext: HTML5BackendContext\n\tprivate optionsArgs: HTML5BackendOptions | undefined\n\n\tpublic constructor(\n\t\tglobalContext: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.globalContext = globalContext\n\t\tthis.optionsArgs = options\n\t}\n\n\tpublic get window(): Window | undefined {\n\t\tif (this.globalContext) {\n\t\t\treturn this.globalContext\n\t\t} else if (typeof window !== 'undefined') {\n\t\t\treturn window\n\t\t}\n\t\treturn undefined\n\t}\n\n\tpublic get document(): Document | undefined {\n\t\tif (this.globalContext?.document) {\n\t\t\treturn this.globalContext.document\n\t\t} else if (this.window) {\n\t\t\treturn this.window.document\n\t\t} else {\n\t\t\treturn undefined\n\t\t}\n\t}\n\n\tpublic get rootElement(): Node | undefined {\n\t\treturn this.optionsArgs?.rootElement || this.window\n\t}\n}\n","import type {\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js'\nimport {\n\tcreateNativeDragSource,\n\tmatchNativeItemType,\n} from './NativeDragSources/index.js'\nimport type { NativeDragSource } from './NativeDragSources/NativeDragSource.js'\nimport * as NativeTypes from './NativeTypes.js'\nimport {\n\tgetDragPreviewOffset,\n\tgetEventClientOffset,\n\tgetNodeClientOffset,\n} from './OffsetUtils.js'\nimport { OptionsReader } from './OptionsReader.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\ntype RootNode = Node & { __isReactDndBackendSetUp: boolean | undefined }\n\nexport class HTML5BackendImpl implements Backend {\n\tprivate options: OptionsReader\n\n\t// React-Dnd Components\n\tprivate actions: DragDropActions\n\tprivate monitor: DragDropMonitor\n\tprivate registry: HandlerRegistry\n\n\t// Internal State\n\tprivate enterLeaveCounter: EnterLeaveCounter\n\n\tprivate sourcePreviewNodes: Map<string, Element> = new Map()\n\tprivate sourcePreviewNodeOptions: Map<string, any> = new Map()\n\tprivate sourceNodes: Map<string, Element> = new Map()\n\tprivate sourceNodeOptions: Map<string, any> = new Map()\n\n\tprivate dragStartSourceIds: string[] | null = null\n\tprivate dropTargetIds: string[] = []\n\tprivate dragEnterTargetIds: string[] = []\n\tprivate currentNativeSource: NativeDragSource | null = null\n\tprivate currentNativeHandle: Identifier | null = null\n\tprivate currentDragSourceNode: Element | null = null\n\tprivate altKeyPressed = false\n\tprivate mouseMoveTimeoutTimer: number | null = null\n\tprivate asyncEndDragFrameId: number | null = null\n\tprivate dragOverTargetIds: string[] | null = null\n\n\tprivate lastClientOffset: XYCoord | null = null\n\tprivate hoverRafId: number | null = null\n\n\tpublic constructor(\n\t\tmanager: DragDropManager,\n\t\tglobalContext?: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.options = new OptionsReader(globalContext, options)\n\t\tthis.actions = manager.getActions()\n\t\tthis.monitor = manager.getMonitor()\n\t\tthis.registry = manager.getRegistry()\n\t\tthis.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument)\n\t}\n\n\t/**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */\n\tpublic profile(): Record<string, number> {\n\t\treturn {\n\t\t\tsourcePreviewNodes: this.sourcePreviewNodes.size,\n\t\t\tsourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n\t\t\tsourceNodeOptions: this.sourceNodeOptions.size,\n\t\t\tsourceNodes: this.sourceNodes.size,\n\t\t\tdragStartSourceIds: this.dragStartSourceIds?.length || 0,\n\t\t\tdropTargetIds: this.dropTargetIds.length,\n\t\t\tdragEnterTargetIds: this.dragEnterTargetIds.length,\n\t\t\tdragOverTargetIds: this.dragOverTargetIds?.length || 0,\n\t\t}\n\t}\n\n\t// public for test\n\tpublic get window(): Window | undefined {\n\t\treturn this.options.window\n\t}\n\tpublic get document(): Document | undefined {\n\t\treturn this.options.document\n\t}\n\t/**\n\t * Get the root element to use for event subscriptions\n\t */\n\tprivate get rootElement(): Node | undefined {\n\t\treturn this.options.rootElement as Node\n\t}\n\n\tpublic setup(): void {\n\t\tconst root = this.rootElement as RootNode | undefined\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\tif (root.__isReactDndBackendSetUp) {\n\t\t\tthrow new Error('Cannot have two HTML5 backends at the same time.')\n\t\t}\n\t\troot.__isReactDndBackendSetUp = true\n\t\tthis.addEventListeners(root)\n\t}\n\n\tpublic teardown(): void {\n\t\tconst root = this.rootElement as RootNode\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\troot.__isReactDndBackendSetUp = false\n\t\tthis.removeEventListeners(this.rootElement as Element)\n\t\tthis.clearCurrentDragSourceNode()\n\t\tif (this.asyncEndDragFrameId) {\n\t\t\tthis.window?.cancelAnimationFrame(this.asyncEndDragFrameId)\n\t\t}\n\t}\n\n\tpublic connectDragPreview(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourcePreviewNodeOptions.set(sourceId, options)\n\t\tthis.sourcePreviewNodes.set(sourceId, node)\n\n\t\treturn (): void => {\n\t\t\tthis.sourcePreviewNodes.delete(sourceId)\n\t\t\tthis.sourcePreviewNodeOptions.delete(sourceId)\n\t\t}\n\t}\n\n\tpublic connectDragSource(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourceNodes.set(sourceId, node)\n\t\tthis.sourceNodeOptions.set(sourceId, options)\n\n\t\tconst handleDragStart = (e: any) => this.handleDragStart(e, sourceId)\n\t\tconst handleSelectStart = (e: any) => this.handleSelectStart(e)\n\n\t\tnode.setAttribute('draggable', 'true')\n\t\tnode.addEventListener('dragstart', handleDragStart)\n\t\tnode.addEventListener('selectstart', handleSelectStart)\n\n\t\treturn (): void => {\n\t\t\tthis.sourceNodes.delete(sourceId)\n\t\t\tthis.sourceNodeOptions.delete(sourceId)\n\n\t\t\tnode.removeEventListener('dragstart', handleDragStart)\n\t\t\tnode.removeEventListener('selectstart', handleSelectStart)\n\t\t\tnode.setAttribute('draggable', 'false')\n\t\t}\n\t}\n\n\tpublic connectDropTarget(targetId: string, node: HTMLElement): Unsubscribe {\n\t\tconst handleDragEnter = (e: DragEvent) => this.handleDragEnter(e, targetId)\n\t\tconst handleDragOver = (e: DragEvent) => this.handleDragOver(e, targetId)\n\t\tconst handleDrop = (e: DragEvent) => this.handleDrop(e, targetId)\n\n\t\tnode.addEventListener('dragenter', handleDragEnter)\n\t\tnode.addEventListener('dragover', handleDragOver)\n\t\tnode.addEventListener('drop', handleDrop)\n\n\t\treturn (): void => {\n\t\t\tnode.removeEventListener('dragenter', handleDragEnter)\n\t\t\tnode.removeEventListener('dragover', handleDragOver)\n\t\t\tnode.removeEventListener('drop', handleDrop)\n\t\t}\n\t}\n\n\tprivate addEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.addEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.addEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStart as EventListener,\n\t\t)\n\t\ttarget.addEventListener('dragstart', this.handleTopDragStartCapture, true)\n\t\ttarget.addEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('dragover', this.handleTopDragOver as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate removeEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.removeEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.removeEventListener('dragstart', this.handleTopDragStart as any)\n\t\ttarget.removeEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStartCapture,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOver as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.removeEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate getCurrentSourceNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourceNodeOptions = this.sourceNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tdropEffect: this.altKeyPressed ? 'copy' : 'move',\n\t\t\t...(sourceNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getCurrentDropEffect() {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\t// It makes more sense to default to 'copy' for native resources\n\t\t\treturn 'copy'\n\t\t}\n\n\t\treturn this.getCurrentSourceNodeOptions().dropEffect\n\t}\n\n\tprivate getCurrentSourcePreviewNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tanchorX: 0.5,\n\t\t\tanchorY: 0.5,\n\t\t\tcaptureDraggingState: false,\n\t\t\t...(sourcePreviewNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getSourceClientOffset = (sourceId: string): XYCoord | null => {\n\t\tconst source = this.sourceNodes.get(sourceId)\n\t\treturn (source && getNodeClientOffset(source as HTMLElement)) || null\n\t}\n\n\tprivate isDraggingNativeItem() {\n\t\tconst itemType = this.monitor.getItemType()\n\t\treturn Object.keys(NativeTypes).some(\n\t\t\t(key: string) => (NativeTypes as any)[key] === itemType,\n\t\t)\n\t}\n\n\tprivate beginDragNativeItem(type: string, dataTransfer?: DataTransfer) {\n\t\tthis.clearCurrentDragSourceNode()\n\n\t\tthis.currentNativeSource = createNativeDragSource(type, dataTransfer)\n\t\tthis.currentNativeHandle = this.registry.addSource(\n\t\t\ttype,\n\t\t\tthis.currentNativeSource,\n\t\t)\n\t\tthis.actions.beginDrag([this.currentNativeHandle])\n\t}\n\n\tprivate endDragNativeItem = (): void => {\n\t\tif (!this.isDraggingNativeItem()) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.actions.endDrag()\n\t\tif (this.currentNativeHandle) {\n\t\t\tthis.registry.removeSource(this.currentNativeHandle)\n\t\t}\n\t\tthis.currentNativeHandle = null\n\t\tthis.currentNativeSource = null\n\t}\n\n\tprivate isNodeInDocument = (node: Node | null | undefined): boolean => {\n\t\t// Check the node either in the main document or in the current context\n\t\treturn Boolean(\n\t\t\tnode &&\n\t\t\t\tthis.document &&\n\t\t\t\tthis.document.body &&\n\t\t\t\tthis.document.body.contains(node),\n\t\t)\n\t}\n\n\tprivate endDragIfSourceWasRemovedFromDOM = (): void => {\n\t\tconst node = this.currentDragSourceNode\n\t\tif (node == null || this.isNodeInDocument(node)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tprivate setCurrentDragSourceNode(node: Element | null) {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.currentDragSourceNode = node\n\n\t\t// A timeout of > 0 is necessary to resolve Firefox issue referenced\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\tconst MOUSE_MOVE_TIMEOUT = 1000\n\n\t\t// Receiving a mouse event in the middle of a dragging operation\n\t\t// means it has ended and the drag source node disappeared from DOM,\n\t\t// so the browser didn't dispatch the dragend event.\n\t\t//\n\t\t// We need to wait before we start listening for mousemove events.\n\t\t// This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n\t\t// immediately in some browsers.\n\t\t//\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\t//\n\t\tthis.mouseMoveTimeoutTimer = setTimeout(() => {\n\t\t\treturn this.rootElement?.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}, MOUSE_MOVE_TIMEOUT) as any as number\n\t}\n\n\tprivate clearCurrentDragSourceNode() {\n\t\tif (this.currentDragSourceNode) {\n\t\t\tthis.currentDragSourceNode = null\n\n\t\t\tif (this.rootElement) {\n\t\t\t\tthis.window?.clearTimeout(this.mouseMoveTimeoutTimer || undefined)\n\t\t\t\tthis.rootElement.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.mouseMoveTimeoutTimer = null\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tprivate scheduleHover = (dragOverTargetIds: string[] | null) => {\n\t\tif (\n\t\t\tthis.hoverRafId === null &&\n\t\t\ttypeof requestAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tthis.hoverRafId = requestAnimationFrame(() => {\n\t\t\t\tif (this.monitor.isDragging()) {\n\t\t\t\t\tthis.actions.hover(dragOverTargetIds || [], {\n\t\t\t\t\t\tclientOffset: this.lastClientOffset,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.hoverRafId = null\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate cancelHover = () => {\n\t\tif (\n\t\t\tthis.hoverRafId !== null &&\n\t\t\ttypeof cancelAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tcancelAnimationFrame(this.hoverRafId)\n\t\t\tthis.hoverRafId = null\n\t\t}\n\t}\n\n\tpublic handleTopDragStartCapture = (): void => {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.dragStartSourceIds = []\n\t}\n\n\tpublic handleDragStart(e: DragEvent, sourceId: string): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.dragStartSourceIds) {\n\t\t\tthis.dragStartSourceIds = []\n\t\t}\n\t\tthis.dragStartSourceIds.unshift(sourceId)\n\t}\n\n\tpublic handleTopDragStart = (e: DragEvent): void => {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dragStartSourceIds } = this\n\t\tthis.dragStartSourceIds = null\n\n\t\tconst clientOffset = getEventClientOffset(e)\n\n\t\t// Avoid crashing if we missed a drop event or our previous drag died\n\t\tif (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t\tthis.cancelHover()\n\t\t}\n\n\t\t// Don't publish the source just yet (see why below)\n\t\tthis.actions.beginDrag(dragStartSourceIds || [], {\n\t\t\tpublishSource: false,\n\t\t\tgetSourceClientOffset: this.getSourceClientOffset,\n\t\t\tclientOffset,\n\t\t})\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (this.monitor.isDragging()) {\n\t\t\tif (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n\t\t\t\t// Use custom drag image if user specifies it.\n\t\t\t\t// If child drag source refuses drag but parent agrees,\n\t\t\t\t// use parent's node as drag image. Neither works in IE though.\n\t\t\t\tconst sourceId: string = this.monitor.getSourceId() as string\n\t\t\t\tconst sourceNode = this.sourceNodes.get(sourceId)\n\t\t\t\tconst dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode\n\n\t\t\t\tif (dragPreview) {\n\t\t\t\t\tconst { anchorX, anchorY, offsetX, offsetY } =\n\t\t\t\t\t\tthis.getCurrentSourcePreviewNodeOptions()\n\t\t\t\t\tconst anchorPoint = { anchorX, anchorY }\n\t\t\t\t\tconst offsetPoint = { offsetX, offsetY }\n\t\t\t\t\tconst dragPreviewOffset = getDragPreviewOffset(\n\t\t\t\t\t\tsourceNode as HTMLElement,\n\t\t\t\t\t\tdragPreview as HTMLElement,\n\t\t\t\t\t\tclientOffset,\n\t\t\t\t\t\tanchorPoint,\n\t\t\t\t\t\toffsetPoint,\n\t\t\t\t\t)\n\n\t\t\t\t\tdataTransfer.setDragImage(\n\t\t\t\t\t\tdragPreview,\n\t\t\t\t\t\tdragPreviewOffset.x,\n\t\t\t\t\t\tdragPreviewOffset.y,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Firefox won't drag without setting data\n\t\t\t\tdataTransfer?.setData('application/json', {} as any)\n\t\t\t} catch (err) {\n\t\t\t\t// IE doesn't support MIME types in setData\n\t\t\t}\n\n\t\t\t// Store drag source node so we can check whether\n\t\t\t// it is removed from DOM and trigger endDrag manually.\n\t\t\tthis.setCurrentDragSourceNode(e.target as Element)\n\n\t\t\t// Now we are ready to publish the drag source.. or are we not?\n\t\t\tconst { captureDraggingState } = this.getCurrentSourcePreviewNodeOptions()\n\t\t\tif (!captureDraggingState) {\n\t\t\t\t// Usually we want to publish it in the next tick so that browser\n\t\t\t\t// is able to screenshot the current (not yet dragging) state.\n\t\t\t\t//\n\t\t\t\t// It also neatly avoids a situation where render() returns null\n\t\t\t\t// in the same tick for the source element, and browser freaks out.\n\t\t\t\tsetTimeout(() => this.actions.publishDragSource(), 0)\n\t\t\t} else {\n\t\t\t\t// In some cases the user may want to override this behavior, e.g.\n\t\t\t\t// to work around IE not supporting custom drag previews.\n\t\t\t\t//\n\t\t\t\t// When using a custom drag layer, the only way to prevent\n\t\t\t\t// the default drag preview from drawing in IE is to screenshot\n\t\t\t\t// the dragging state in which the node itself has zero opacity\n\t\t\t\t// and height. In this case, though, returning null from render()\n\t\t\t\t// will abruptly end the dragging, which is not obvious.\n\t\t\t\t//\n\t\t\t\t// This is the reason such behavior is strictly opt-in.\n\t\t\t\tthis.actions.publishDragSource()\n\t\t\t}\n\t\t} else if (nativeType) {\n\t\t\t// A native item (such as URL) dragged from inside the document\n\t\t\tthis.beginDragNativeItem(nativeType)\n\t\t} else if (\n\t\t\tdataTransfer &&\n\t\t\t!dataTransfer.types &&\n\t\t\t((e.target && !(e.target as Element).hasAttribute) ||\n\t\t\t\t!(e.target as Element).hasAttribute('draggable'))\n\t\t) {\n\t\t\t// Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n\t\t\t// Just let it drag. It's a native type (URL or text) and will be picked up in\n\t\t\t// dragenter handler.\n\t\t\treturn\n\t\t} else {\n\t\t\t// If by this time no drag source reacted, tell browser not to drag.\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\tpublic handleTopDragEndCapture = (): void => {\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\t// Firefox can dispatch this event in an infinite loop\n\t\t\t// if dragend handler does something like showing an alert.\n\t\t\t// Only proceed if we have not handled it already.\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDragEnterCapture = (e: DragEvent): void => {\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\n\t\tconst isFirstEnter = this.enterLeaveCounter.enter(e.target)\n\t\tif (!isFirstEnter || this.monitor.isDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (nativeType) {\n\t\t\t// A native item (such as file or URL) dragged from outside the document\n\t\t\tthis.beginDragNativeItem(nativeType, dataTransfer as DataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragEnter(_e: DragEvent, targetId: string): void {\n\t\tthis.dragEnterTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragEnter = (e: DragEvent): void => {\n\t\tconst { dragEnterTargetIds } = this\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\n\t\t// If the target changes position as the result of `dragenter`, `dragover` might still\n\t\t// get dispatched despite target being no longer there. The easy solution is to check\n\t\t// whether there actually is a target before firing `hover`.\n\t\tif (dragEnterTargetIds.length > 0) {\n\t\t\tthis.actions.hover(dragEnterTargetIds, {\n\t\t\t\tclientOffset: getEventClientOffset(e),\n\t\t\t})\n\t\t}\n\n\t\tconst canDrop = dragEnterTargetIds.some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// IE requires this to fire dragover events\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragOverCapture = (e: DragEvent): void => {\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragOver(_e: DragEvent, targetId: string): void {\n\t\tif (this.dragOverTargetIds === null) {\n\t\t\tthis.dragOverTargetIds = []\n\t\t}\n\t\tthis.dragOverTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragOver = (e: DragEvent): void => {\n\t\tconst { dragOverTargetIds } = this\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\t// Prevent default \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\t\tthis.lastClientOffset = getEventClientOffset(e)\n\n\t\tthis.scheduleHover(dragOverTargetIds)\n\n\t\tconst canDrop = (dragOverTargetIds || []).some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// Show user-specified drop effect.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t} else if (this.isDraggingNativeItem()) {\n\t\t\t// Don't show a nice cursor but still prevent default\n\t\t\t// \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t} else {\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragLeaveCapture = (e: DragEvent): void => {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tconst isLastLeave = this.enterLeaveCounter.leave(e.target)\n\t\tif (!isLastLeave) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tsetTimeout(() => this.endDragNativeItem(), 0)\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDropCapture = (e: DragEvent): void => {\n\t\tthis.dropTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t} else if (matchNativeItemType(e.dataTransfer)) {\n\t\t\t// Dragging some elements, like <a> and <img> may still behave like a native drag event,\n\t\t\t// even if the current drag event matches a user-defined type.\n\t\t\t// Stop the default behavior when we're not expecting a native item to be dropped.\n\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tthis.enterLeaveCounter.reset()\n\t}\n\n\tpublic handleDrop(_e: DragEvent, targetId: string): void {\n\t\tthis.dropTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDrop = (e: DragEvent): void => {\n\t\tconst { dropTargetIds } = this\n\t\tthis.dropTargetIds = []\n\n\t\tthis.actions.hover(dropTargetIds, {\n\t\t\tclientOffset: getEventClientOffset(e),\n\t\t})\n\t\tthis.actions.drop({ dropEffect: this.getCurrentDropEffect() })\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.endDragNativeItem()\n\t\t} else if (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleSelectStart = (e: DragEvent): void => {\n\t\tconst target = e.target as HTMLElement & { dragDrop: () => void }\n\n\t\t// Only IE requires us to explicitly say\n\t\t// we want drag drop operation to start\n\t\tif (typeof target.dragDrop !== 'function') {\n\t\t\treturn\n\t\t}\n\n\t\t// Inputs and textareas should be selectable\n\t\tif (\n\t\t\ttarget.tagName === 'INPUT' ||\n\t\t\ttarget.tagName === 'SELECT' ||\n\t\t\ttarget.tagName === 'TEXTAREA' ||\n\t\t\ttarget.isContentEditable\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\t// For other targets, ask IE\n\t\t// to enable drag and drop\n\t\te.preventDefault()\n\t\ttarget.dragDrop()\n\t}\n}\n","import type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useCollector } from './useCollector.js'\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\n\nexport function useMonitorOutput<Monitor extends HandlerManager, Collected>(\n\tmonitor: Monitor & MonitorEventEmitter,\n\tcollect: (monitor: Monitor) => Collected,\n\tonCollect?: () => void,\n): Collected {\n\tconst [collected, updateCollected] = useCollector(monitor, collect, onCollect)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction subscribeToMonitorStateChange() {\n\t\t\tconst handlerId = monitor.getHandlerId()\n\t\t\tif (handlerId == null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn monitor.subscribeToStateChange(updateCollected, {\n\t\t\t\thandlerIds: [handlerId],\n\t\t\t})\n\t\t},\n\t\t[monitor, updateCollected],\n\t)\n\n\treturn collected\n}\n","import equal from 'fast-deep-equal'\nimport { useCallback, useState } from 'react'\n\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\n\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\nexport function useCollector<T, S>(\n\tmonitor: T,\n\tcollect: (monitor: T) => S,\n\tonUpdate?: () => void,\n): [S, () => void] {\n\tconst [collected, setCollected] = useState(() => collect(monitor))\n\n\tconst updateCollected = useCallback(() => {\n\t\tconst nextValue = collect(monitor)\n\t\t// This needs to be a deep-equality check because some monitor-collected values\n\t\t// include XYCoord objects that may be equivalent, but do not have instance equality.\n\t\tif (!equal(collected, nextValue)) {\n\t\t\tsetCollected(nextValue)\n\t\t\tif (onUpdate) {\n\t\t\t\tonUpdate()\n\t\t\t}\n\t\t}\n\t}, [collected, monitor, onUpdate])\n\n\t// update the collected properties after react renders.\n\t// Note that the \"Dustbin Stress Test\" fails if this is not\n\t// done when the component updates\n\tuseIsomorphicLayoutEffect(updateCollected)\n\n\treturn [collected, updateCollected]\n}\n","import type { Connector } from '../internals/index.js'\nimport type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useMonitorOutput } from './useMonitorOutput.js'\n\nexport function useCollectedProps<Collected, Monitor extends HandlerManager>(\n\tcollector: ((monitor: Monitor) => Collected) | undefined,\n\tmonitor: Monitor & MonitorEventEmitter,\n\tconnector: Connector,\n) {\n\treturn useMonitorOutput(monitor, collector || (() => ({} as Collected)), () =>\n\t\tconnector.reconnect(),\n\t)\n}\n","import type { DragDropManager } from 'dnd-core'\nimport { createContext } from 'react'\n\n/**\n * The React context type\n */\nexport interface DndContextType {\n\tdragDropManager: DragDropManager | undefined\n}\n\n/**\n * Create the React Context\n */\nexport const DndContext = createContext<DndContextType>({\n\tdragDropManager: undefined,\n})\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nconst scope = typeof global !== 'undefined' ? global : self\nconst BrowserMutationObserver =\n\t(scope as any).MutationObserver || (scope as any).WebKitMutationObserver\n\nexport function makeRequestCallFromTimer(callback: () => void) {\n\treturn function requestCall() {\n\t\t// We dispatch a timeout with a specified delay of 0 for engines that\n\t\t// can reliably accommodate that request. This will usually be snapped\n\t\t// to a 4 milisecond delay, but once we're flushing, there's no delay\n\t\t// between events.\n\t\tconst timeoutHandle = setTimeout(handleTimer, 0)\n\t\t// However, since this timer gets frequently dropped in Firefox\n\t\t// workers, we enlist an interval handle that will try to fire\n\t\t// an event 20 times per second until it succeeds.\n\t\tconst intervalHandle = setInterval(handleTimer, 50)\n\n\t\tfunction handleTimer() {\n\t\t\t// Whichever timer succeeds will cancel both timers and\n\t\t\t// execute the callback.\n\t\t\tclearTimeout(timeoutHandle)\n\t\t\tclearInterval(intervalHandle)\n\t\t\tcallback()\n\t\t}\n\t}\n}\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nexport function makeRequestCallFromMutationObserver(callback: () => void) {\n\tlet toggle = 1\n\tconst observer = new BrowserMutationObserver(callback)\n\tconst node = document.createTextNode('')\n\tobserver.observe(node, { characterData: true })\n\treturn function requestCall() {\n\t\ttoggle = -toggle\n\t\t;(node as any).data = toggle\n\t}\n}\n\nexport const makeRequestCall =\n\ttypeof BrowserMutationObserver === 'function'\n\t\t? // MutationObservers are desirable because they have high priority and work\n\t\t  // reliably everywhere they are implemented.\n\t\t  // They are implemented in all modern browsers.\n\t\t  //\n\t\t  // - Android 4-4.3\n\t\t  // - Chrome 26-34\n\t\t  // - Firefox 14-29\n\t\t  // - Internet Explorer 11\n\t\t  // - iPad Safari 6-7.1\n\t\t  // - iPhone Safari 7-7.1\n\t\t  // - Safari 6-7\n\t\t  makeRequestCallFromMutationObserver\n\t\t: // MessageChannels are desirable because they give direct access to the HTML\n\t\t  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n\t\t  // 11-12, and in web workers in many engines.\n\t\t  // Although message channels yield to any queued rendering and IO tasks, they\n\t\t  // would be better than imposing the 4ms delay of timers.\n\t\t  // However, they do not work reliably in Internet Explorer or Safari.\n\n\t\t  // Internet Explorer 10 is the only browser that has setImmediate but does\n\t\t  // not have MutationObservers.\n\t\t  // Although setImmediate yields to the browser's renderer, it would be\n\t\t  // preferrable to falling back to setTimeout since it does not have\n\t\t  // the minimum 4ms penalty.\n\t\t  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n\t\t  // Desktop to a lesser extent) that renders both setImmediate and\n\t\t  // MessageChannel useless for the purposes of ASAP.\n\t\t  // https://github.com/kriskowal/q/issues/396\n\n\t\t  // Timers are implemented universally.\n\t\t  // We fall back to timers in workers in most engines, and in foreground\n\t\t  // contexts in the following browsers.\n\t\t  // However, note that even this simple case requires nuances to operate in a\n\t\t  // broad spectrum of browsers.\n\t\t  //\n\t\t  // - Firefox 3-13\n\t\t  // - Internet Explorer 6-9\n\t\t  // - iPad Safari 4.3\n\t\t  // - Lynx 2.8.7\n\t\t  makeRequestCallFromTimer\n","import type {\n\tDragDropManager,\n\tDragSource,\n\tDropTarget,\n\tIdentifier,\n\tSourceType,\n\tTargetType,\n\tUnsubscribe,\n} from 'dnd-core'\n\nexport function registerTarget(\n\ttype: TargetType,\n\ttarget: DropTarget,\n\tmanager: DragDropManager,\n): [Identifier, Unsubscribe] {\n\tconst registry = manager.getRegistry()\n\tconst targetId = registry.addTarget(type, target)\n\n\treturn [targetId, () => registry.removeTarget(targetId)]\n}\n\nexport function registerSource(\n\ttype: SourceType,\n\tsource: DragSource,\n\tmanager: DragDropManager,\n): [Identifier, Unsubscribe] {\n\tconst registry = manager.getRegistry()\n\tconst sourceId = registry.addSource(type, source)\n\n\treturn [sourceId, () => registry.removeSource(sourceId)]\n}\n","import type { FC } from 'react'\nimport { memo, useEffect } from 'react'\n\nimport type { ConnectDragPreview } from '../types/index.js'\n\nexport interface DragPreviewImageProps {\n\tconnect: ConnectDragPreview\n\tsrc: string\n}\n/**\n * A utility for rendering a drag preview image\n */\nexport const DragPreviewImage: FC<DragPreviewImageProps> = memo(\n\tfunction DragPreviewImage({ connect, src }) {\n\t\tuseEffect(() => {\n\t\t\tif (typeof Image === 'undefined') return\n\n\t\t\tlet connected = false\n\t\t\tconst img = new Image()\n\t\t\timg.src = src\n\t\t\timg.onload = () => {\n\t\t\t\tconnect(img)\n\t\t\t\tconnected = true\n\t\t\t}\n\t\t\treturn () => {\n\t\t\t\tif (connected) {\n\t\t\t\t\tconnect(null)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\treturn null\n\t},\n)\n","import type { BackendFactory, DragDropManager } from 'dnd-core'\nimport { createDragDropManager } from 'dnd-core'\nimport type { FC, ReactNode } from 'react'\nimport { memo, useEffect } from 'react'\n\nimport { DndContext } from './DndContext.js'\n\nexport type DndProviderProps<BackendContext, BackendOptions> =\n\t| {\n\t\t\tchildren?: ReactNode\n\t\t\tmanager: DragDropManager\n\t  }\n\t| {\n\t\t\tbackend: BackendFactory\n\t\t\tchildren?: ReactNode\n\t\t\tcontext?: BackendContext\n\t\t\toptions?: BackendOptions\n\t\t\tdebugMode?: boolean\n\t  }\n\nlet refCount = 0\nconst INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__')\n\n/**\n * A React component that provides the React-DnD context\n */\nexport const DndProvider: FC<DndProviderProps<unknown, unknown>> = memo(\n\tfunction DndProvider({ children, ...props }) {\n\t\tconst [manager, isGlobalInstance] = getDndContextValue(props) // memoized from props\n\t\t/**\n\t\t * If the global context was used to store the DND context\n\t\t * then where theres no more references to it we should\n\t\t * clean it up to avoid memory leaks\n\t\t */\n\t\tuseEffect(() => {\n\t\t\tif (isGlobalInstance) {\n\t\t\t\tconst context = getGlobalContext()\n\t\t\t\t++refCount\n\n\t\t\t\treturn () => {\n\t\t\t\t\tif (--refCount === 0) {\n\t\t\t\t\t\tcontext[INSTANCE_SYM] = null\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn\n\t\t}, [])\n\n\t\treturn <DndContext.Provider value={manager}>{children}</DndContext.Provider>\n\t},\n)\n\nfunction getDndContextValue(props: DndProviderProps<unknown, unknown>) {\n\tif ('manager' in props) {\n\t\tconst manager = { dragDropManager: props.manager }\n\t\treturn [manager, false]\n\t}\n\n\tconst manager = createSingletonDndContext(\n\t\tprops.backend,\n\t\tprops.context,\n\t\tprops.options,\n\t\tprops.debugMode,\n\t)\n\tconst isGlobalInstance = !props.context\n\n\treturn [manager, isGlobalInstance]\n}\n\nfunction createSingletonDndContext<BackendContext, BackendOptions>(\n\tbackend: BackendFactory,\n\tcontext: BackendContext = getGlobalContext(),\n\toptions: BackendOptions,\n\tdebugMode?: boolean,\n) {\n\tconst ctx = context as any\n\tif (!ctx[INSTANCE_SYM]) {\n\t\tctx[INSTANCE_SYM] = {\n\t\t\tdragDropManager: createDragDropManager(\n\t\t\t\tbackend,\n\t\t\t\tcontext,\n\t\t\t\toptions,\n\t\t\t\tdebugMode,\n\t\t\t),\n\t\t}\n\t}\n\treturn ctx[INSTANCE_SYM]\n}\n\ndeclare const global: any\nfunction getGlobalContext() {\n\treturn typeof global !== 'undefined' ? global : (window as any)\n}\n","function getError(option, xhr) {\n  var msg = \"cannot \".concat(option.method, \" \").concat(option.action, \" \").concat(xhr.status, \"'\");\n  var err = new Error(msg);\n  err.status = xhr.status;\n  err.method = option.method;\n  err.url = option.action;\n  return err;\n}\n\nfunction getBody(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function upload(option) {\n  // eslint-disable-next-line no-undef\n  var xhr = new XMLHttpRequest();\n\n  if (option.onProgress && xhr.upload) {\n    xhr.upload.onprogress = function progress(e) {\n      if (e.total > 0) {\n        e.percent = e.loaded / e.total * 100;\n      }\n\n      option.onProgress(e);\n    };\n  } // eslint-disable-next-line no-undef\n\n\n  var formData = new FormData();\n\n  if (option.data) {\n    Object.keys(option.data).forEach(function (key) {\n      var value = option.data[key]; // support key-value array data\n\n      if (Array.isArray(value)) {\n        value.forEach(function (item) {\n          // { list: [ 11, 22 ] }\n          // formData.append('list[]', 11);\n          formData.append(\"\".concat(key, \"[]\"), item);\n        });\n        return;\n      }\n\n      formData.append(key, option.data[key]);\n    });\n  } // eslint-disable-next-line no-undef\n\n\n  if (option.file instanceof Blob) {\n    formData.append(option.filename, option.file, option.file.name);\n  } else {\n    formData.append(option.filename, option.file);\n  }\n\n  xhr.onerror = function error(e) {\n    option.onError(e);\n  };\n\n  xhr.onload = function onload() {\n    // allow success when 2xx status\n    // see https://github.com/react-component/upload/issues/34\n    if (xhr.status < 200 || xhr.status >= 300) {\n      return option.onError(getError(option, xhr), getBody(xhr));\n    }\n\n    return option.onSuccess(getBody(xhr), xhr);\n  };\n\n  xhr.open(option.method, option.action, true); // Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\n\n  if (option.withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  var headers = option.headers || {}; // when set headers['X-Requested-With'] = null , can close default XHR header\n  // see https://github.com/react-component/upload/issues/33\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  Object.keys(headers).forEach(function (h) {\n    if (headers[h] !== null) {\n      xhr.setRequestHeader(h, headers[h]);\n    }\n  });\n  xhr.send(formData);\n  return {\n    abort: function abort() {\n      xhr.abort();\n    }\n  };\n}","var now = +new Date();\nvar index = 0;\nexport default function uid() {\n  // eslint-disable-next-line no-plusplus\n  return \"rc-upload-\".concat(now, \"-\").concat(++index);\n}","function endsWith(str, suffix) {\n  return str.indexOf(suffix, str.length - suffix.length) !== -1;\n}\n\nexport default (function (file, acceptedFiles) {\n  if (file && acceptedFiles) {\n    var acceptedFilesArray = Array.isArray(acceptedFiles) ? acceptedFiles : acceptedFiles.split(',');\n    var fileName = file.name || '';\n    var mimeType = file.type || '';\n    var baseMimeType = mimeType.replace(/\\/.*$/, '');\n    return acceptedFilesArray.some(function (type) {\n      var validType = type.trim();\n\n      if (validType.charAt(0) === '.') {\n        return endsWith(fileName.toLowerCase(), validType.toLowerCase());\n      }\n\n      if (/\\/\\*$/.test(validType)) {\n        // This is something like a image/* mime type\n        return baseMimeType === validType.replace(/\\/.*$/, '');\n      }\n\n      return mimeType === validType;\n    });\n  }\n\n  return true;\n});","function loopFiles(item, callback) {\n  var dirReader = item.createReader();\n  var fileList = [];\n\n  function sequence() {\n    dirReader.readEntries(function (entries) {\n      var entryList = Array.prototype.slice.apply(entries);\n      fileList = fileList.concat(entryList); // Check if all the file has been viewed\n\n      var isFinished = !entryList.length;\n\n      if (isFinished) {\n        callback(fileList);\n      } else {\n        sequence();\n      }\n    });\n  }\n\n  sequence();\n}\n\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    // eslint-disable-next-line no-param-reassign\n    item.path = path || '';\n\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            }); // eslint-disable-next-line no-param-reassign\n\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n\n          callback([file]);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item, function (entries) {\n        entries.forEach(function (entryItem) {\n          _traverseFileTree(entryItem, \"\".concat(path).concat(item.name, \"/\"));\n        });\n      });\n    }\n  };\n\n  files.forEach(function (file) {\n    _traverseFileTree(file.webkitGetAsEntry());\n  });\n};\n\nexport default traverseFileTree;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\n/* eslint react/no-is-mounted:0,react/sort-comp:0,react/prop-types:0 */\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport defaultRequest from './request';\nimport getUid from './uid';\nimport attrAccept from './attr-accept';\nimport traverseFileTree from './traverseFileTree';\n\nvar AjaxUploader = /*#__PURE__*/function (_Component) {\n  _inherits(AjaxUploader, _Component);\n\n  var _super = _createSuper(AjaxUploader);\n\n  function AjaxUploader() {\n    var _this;\n\n    _classCallCheck(this, AjaxUploader);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      uid: getUid()\n    };\n    _this.reqs = {};\n\n    _this.onChange = function (e) {\n      var files = e.target.files;\n\n      _this.uploadFiles(files);\n\n      _this.reset();\n    };\n\n    _this.onClick = function (e) {\n      var el = _this.fileInput;\n\n      if (!el) {\n        return;\n      }\n\n      var _this$props = _this.props,\n          children = _this$props.children,\n          onClick = _this$props.onClick;\n\n      if (children && children.type === 'button') {\n        var parent = el.parentNode;\n        parent.focus();\n        parent.querySelector('button').blur();\n      }\n\n      el.click();\n\n      if (onClick) {\n        onClick(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.key === 'Enter') {\n        _this.onClick(e);\n      }\n    };\n\n    _this.onFileDrop = function (e) {\n      var multiple = _this.props.multiple;\n      e.preventDefault();\n\n      if (e.type === 'dragover') {\n        return;\n      }\n\n      if (_this.props.directory) {\n        traverseFileTree(Array.prototype.slice.call(e.dataTransfer.items), _this.uploadFiles, function (_file) {\n          return attrAccept(_file, _this.props.accept);\n        });\n      } else {\n        var files = Array.prototype.slice.call(e.dataTransfer.files).filter(function (file) {\n          return attrAccept(file, _this.props.accept);\n        });\n\n        if (multiple === false) {\n          files = files.slice(0, 1);\n        }\n\n        _this.uploadFiles(files);\n      }\n    };\n\n    _this.uploadFiles = function (files) {\n      var postFiles = Array.prototype.slice.call(files);\n      postFiles.map(function (file) {\n        // eslint-disable-next-line no-param-reassign\n        file.uid = getUid();\n        return file;\n      }).forEach(function (file) {\n        _this.upload(file, postFiles);\n      });\n    };\n\n    _this.saveFileInput = function (node) {\n      _this.fileInput = node;\n    };\n\n    return _this;\n  }\n\n  _createClass(AjaxUploader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.abort();\n    }\n  }, {\n    key: \"upload\",\n    value: function upload(file, fileList) {\n      var _this2 = this;\n\n      var props = this.props;\n\n      if (!props.beforeUpload) {\n        // always async in case use react state to keep fileList\n        Promise.resolve().then(function () {\n          _this2.post(file);\n        });\n        return;\n      }\n\n      var before = props.beforeUpload(file, fileList);\n\n      if (before && typeof before !== 'boolean' && before.then) {\n        before.then(function (processedFile) {\n          var processedFileType = Object.prototype.toString.call(processedFile);\n\n          if (processedFileType === '[object File]' || processedFileType === '[object Blob]') {\n            _this2.post(processedFile);\n\n            return;\n          }\n\n          _this2.post(file);\n        }).catch(function (e) {\n          // eslint-disable-next-line no-console\n          console.log(e);\n        });\n      } else if (before !== false) {\n        Promise.resolve().then(function () {\n          _this2.post(file);\n        });\n      }\n    }\n  }, {\n    key: \"post\",\n    value: function post(file) {\n      var _this3 = this;\n\n      if (!this._isMounted) {\n        return;\n      }\n\n      var props = this.props;\n      var onStart = props.onStart,\n          onProgress = props.onProgress,\n          _props$transformFile = props.transformFile,\n          transformFile = _props$transformFile === void 0 ? function (originFile) {\n        return originFile;\n      } : _props$transformFile;\n      new Promise(function (resolve) {\n        var actionRet = props.action;\n\n        if (typeof actionRet === 'function') {\n          actionRet = actionRet(file);\n        }\n\n        return resolve(actionRet);\n      }).then(function (action) {\n        var uid = file.uid;\n        var request = props.customRequest || defaultRequest;\n        var transform = Promise.resolve(transformFile(file)).then(function (transformedFile) {\n          var data = props.data;\n\n          if (typeof data === 'function') {\n            data = data(transformedFile);\n          }\n\n          return Promise.all([transformedFile, data]);\n        }).catch(function (e) {\n          console.error(e); // eslint-disable-line no-console\n        });\n        transform.then(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              transformedFile = _ref2[0],\n              data = _ref2[1];\n\n          var requestOption = {\n            action: action,\n            filename: props.name,\n            data: data,\n            file: transformedFile,\n            headers: props.headers,\n            withCredentials: props.withCredentials,\n            method: props.method || 'post',\n            onProgress: onProgress ? function (e) {\n              onProgress(e, file);\n            } : null,\n            onSuccess: function onSuccess(ret, xhr) {\n              delete _this3.reqs[uid];\n              props.onSuccess(ret, file, xhr);\n            },\n            onError: function onError(err, ret) {\n              delete _this3.reqs[uid];\n              props.onError(err, ret, file);\n            }\n          };\n          onStart(file);\n          _this3.reqs[uid] = request(requestOption);\n        });\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setState({\n        uid: getUid()\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort(file) {\n      var reqs = this.reqs;\n\n      if (file) {\n        var uid = file.uid ? file.uid : file;\n\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(function (uid) {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n\n          delete reqs[uid];\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n\n      var _this$props2 = this.props,\n          Tag = _this$props2.component,\n          prefixCls = _this$props2.prefixCls,\n          className = _this$props2.className,\n          disabled = _this$props2.disabled,\n          id = _this$props2.id,\n          style = _this$props2.style,\n          multiple = _this$props2.multiple,\n          accept = _this$props2.accept,\n          children = _this$props2.children,\n          directory = _this$props2.directory,\n          openFileDialogOnClick = _this$props2.openFileDialogOnClick,\n          onMouseEnter = _this$props2.onMouseEnter,\n          onMouseLeave = _this$props2.onMouseLeave,\n          otherProps = _objectWithoutProperties(_this$props2, [\"component\", \"prefixCls\", \"className\", \"disabled\", \"id\", \"style\", \"multiple\", \"accept\", \"children\", \"directory\", \"openFileDialogOnClick\", \"onMouseEnter\", \"onMouseLeave\"]);\n\n      var cls = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls, true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, className, className), _classNames)); // because input don't have directory/webkitdirectory type declaration\n\n      var dirProps = directory ? {\n        directory: 'directory',\n        webkitdirectory: 'webkitdirectory'\n      } : {};\n      var events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? this.onClick : function () {},\n        onKeyDown: openFileDialogOnClick ? this.onKeyDown : function () {},\n        onMouseEnter: onMouseEnter,\n        onMouseLeave: onMouseLeave,\n        onDrop: this.onFileDrop,\n        onDragOver: this.onFileDrop,\n        tabIndex: '0'\n      };\n      return /*#__PURE__*/React.createElement(Tag, _extends({}, events, {\n        className: cls,\n        role: \"button\",\n        style: style\n      }), /*#__PURE__*/React.createElement(\"input\", _extends({}, pickAttrs(otherProps, {\n        aria: true,\n        data: true\n      }), {\n        id: id,\n        type: \"file\",\n        ref: this.saveFileInput,\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        } // https://github.com/ant-design/ant-design/issues/19948\n        ,\n        key: this.state.uid,\n        style: {\n          display: 'none'\n        },\n        accept: accept\n      }, dirProps, {\n        multiple: multiple,\n        onChange: this.onChange\n      })), children);\n    }\n  }]);\n\n  return AjaxUploader;\n}(Component);\n\nexport default AjaxUploader;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\n/* eslint react/prop-types:0 */\nimport React, { Component } from 'react';\nimport AjaxUpload from './AjaxUploader';\n\nfunction empty() {}\n\nvar Upload = /*#__PURE__*/function (_Component) {\n  _inherits(Upload, _Component);\n\n  var _super = _createSuper(Upload);\n\n  function Upload() {\n    var _this;\n\n    _classCallCheck(this, Upload);\n\n    _this = _super.apply(this, arguments);\n\n    _this.saveUploader = function (node) {\n      _this.uploader = node;\n    };\n\n    return _this;\n  }\n\n  _createClass(Upload, [{\n    key: \"abort\",\n    value: function abort(file) {\n      this.uploader.abort(file);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(AjaxUpload, _extends({}, this.props, {\n        ref: this.saveUploader\n      }));\n    }\n  }]);\n\n  return Upload;\n}(Component);\n\nUpload.defaultProps = {\n  component: 'span',\n  prefixCls: 'rc-upload',\n  data: {},\n  headers: {},\n  name: 'file',\n  multipart: false,\n  onStart: empty,\n  onError: empty,\n  onSuccess: empty,\n  multiple: false,\n  beforeUpload: null,\n  customRequest: null,\n  withCredentials: false,\n  openFileDialogOnClick: true\n};\nexport default Upload;","import Upload from './Upload';\nexport default Upload;","import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport Upload from './Upload';\n\nvar InternalDragger = function InternalDragger(_a, ref) {\n  var style = _a.style,\n      height = _a.height,\n      restProps = __rest(_a, [\"style\", \"height\"]);\n\n  return /*#__PURE__*/React.createElement(Upload, _extends({\n    ref: ref\n  }, restProps, {\n    type: \"drag\",\n    style: _extends(_extends({}, style), {\n      height: height\n    })\n  }));\n};\n\nvar Dragger = /*#__PURE__*/React.forwardRef(InternalDragger);\nDragger.displayName = 'Dragger';\nexport default Dragger;","// This icon file is generated automatically.\nvar PaperClipOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z\" } }] }, \"name\": \"paper-clip\", \"theme\": \"outlined\" };\nexport default PaperClipOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PaperClipOutlinedSvg from \"@ant-design/icons-svg/es/asn/PaperClipOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PaperClipOutlined = function PaperClipOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: PaperClipOutlinedSvg\n  }));\n};\n\nPaperClipOutlined.displayName = 'PaperClipOutlined';\nexport default /*#__PURE__*/React.forwardRef(PaperClipOutlined);","// This icon file is generated automatically.\nvar PictureTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z\", \"fill\": primaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M276 368a28 28 0 1056 0 28 28 0 10-56 0z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z\", \"fill\": primaryColor } }] }; }, \"name\": \"picture\", \"theme\": \"twotone\" };\nexport default PictureTwoTone;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PictureTwoToneSvg from \"@ant-design/icons-svg/es/asn/PictureTwoTone\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PictureTwoTone = function PictureTwoTone(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: PictureTwoToneSvg\n  }));\n};\n\nPictureTwoTone.displayName = 'PictureTwoTone';\nexport default /*#__PURE__*/React.forwardRef(PictureTwoTone);","// This icon file is generated automatically.\nvar FileTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z\", \"fill\": primaryColor } }] }; }, \"name\": \"file\", \"theme\": \"twotone\" };\nexport default FileTwoTone;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FileTwoToneSvg from \"@ant-design/icons-svg/es/asn/FileTwoTone\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FileTwoTone = function FileTwoTone(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: FileTwoToneSvg\n  }));\n};\n\nFileTwoTone.displayName = 'FileTwoTone';\nexport default /*#__PURE__*/React.forwardRef(FileTwoTone);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport function T() {\n  return true;\n} // Fix IE file.status problem\n// via coping a new Object\n\nexport function fileToObject(file) {\n  return _extends(_extends({}, file), {\n    lastModified: file.lastModified,\n    lastModifiedDate: file.lastModifiedDate,\n    name: file.name,\n    size: file.size,\n    type: file.type,\n    uid: file.uid,\n    percent: 0,\n    originFileObj: file\n  });\n}\nexport function getFileItem(file, fileList) {\n  var matchKey = file.uid !== undefined ? 'uid' : 'name';\n  return fileList.filter(function (item) {\n    return item[matchKey] === file[matchKey];\n  })[0];\n}\nexport function removeFileItem(file, fileList) {\n  var matchKey = file.uid !== undefined ? 'uid' : 'name';\n  var removed = fileList.filter(function (item) {\n    return item[matchKey] !== file[matchKey];\n  });\n\n  if (removed.length === fileList.length) {\n    return null;\n  }\n\n  return removed;\n} // ==================== Default Image Preview ====================\n\nvar extname = function extname() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var temp = url.split('/');\n  var filename = temp[temp.length - 1];\n  var filenameWithoutSuffix = filename.split(/#|\\?/)[0];\n  return (/\\.[^./\\\\]*$/.exec(filenameWithoutSuffix) || [''])[0];\n};\n\nvar isImageFileType = function isImageFileType(type) {\n  return type.indexOf('image/') === 0;\n};\n\nexport var isImageUrl = function isImageUrl(file) {\n  if (file.type && !file.thumbUrl) {\n    return isImageFileType(file.type);\n  }\n\n  var url = file.thumbUrl || file.url;\n  var extension = extname(url);\n\n  if (/^data:image\\//.test(url) || /(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(extension)) {\n    return true;\n  }\n\n  if (/^data:/.test(url)) {\n    // other file types of base64\n    return false;\n  }\n\n  if (extension) {\n    // other file types which have extension\n    return false;\n  }\n\n  return true;\n};\nvar MEASURE_SIZE = 200;\nexport function previewImage(file) {\n  return new Promise(function (resolve) {\n    if (!file.type || !isImageFileType(file.type)) {\n      resolve('');\n      return;\n    }\n\n    var canvas = document.createElement('canvas');\n    canvas.width = MEASURE_SIZE;\n    canvas.height = MEASURE_SIZE;\n    canvas.style.cssText = \"position: fixed; left: 0; top: 0; width: \".concat(MEASURE_SIZE, \"px; height: \").concat(MEASURE_SIZE, \"px; z-index: 9999; display: none;\");\n    document.body.appendChild(canvas);\n    var ctx = canvas.getContext('2d');\n    var img = new Image();\n\n    img.onload = function () {\n      var width = img.width,\n          height = img.height;\n      var drawWidth = MEASURE_SIZE;\n      var drawHeight = MEASURE_SIZE;\n      var offsetX = 0;\n      var offsetY = 0;\n\n      if (width > height) {\n        drawHeight = height * (MEASURE_SIZE / width);\n        offsetY = -(drawHeight - drawWidth) / 2;\n      } else {\n        drawWidth = width * (MEASURE_SIZE / height);\n        offsetX = -(drawWidth - drawHeight) / 2;\n      }\n\n      ctx.drawImage(img, offsetX, offsetY, drawWidth, drawHeight);\n      var dataURL = canvas.toDataURL();\n      document.body.removeChild(canvas);\n      resolve(dataURL);\n    };\n\n    img.src = window.URL.createObjectURL(file);\n  });\n}","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default /*#__PURE__*/React.forwardRef(DeleteOutlined);","// This icon file is generated automatically.\nvar DownloadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"download\", \"theme\": \"outlined\" };\nexport default DownloadOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DownloadOutlinedSvg from \"@ant-design/icons-svg/es/asn/DownloadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DownloadOutlined = function DownloadOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DownloadOutlinedSvg\n  }));\n};\n\nDownloadOutlined.displayName = 'DownloadOutlined';\nexport default /*#__PURE__*/React.forwardRef(DownloadOutlined);","import devWarning from '../_util/devWarning';\nexport function validProgress(progress) {\n  if (!progress || progress < 0) {\n    return 0;\n  }\n\n  if (progress > 100) {\n    return 100;\n  }\n\n  return progress;\n}\nexport function getSuccessPercent(_ref) {\n  var success = _ref.success,\n      successPercent = _ref.successPercent;\n  var percent = successPercent;\n  /** @deprecated Use `percent` instead */\n\n  if (success && 'progress' in success) {\n    devWarning(false, 'Progress', '`success.progress` is deprecated. Please use `success.percent` instead.');\n    percent = success.progress;\n  }\n\n  if (success && 'percent' in success) {\n    percent = success.percent;\n  }\n\n  return percent;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { presetPrimaryColors } from '@ant-design/colors';\nimport { validProgress, getSuccessPercent } from './utils';\n/**\n * @example\n *   {\n *     \"0%\": \"#afc163\",\n *     \"75%\": \"#009900\",\n *     \"50%\": \"green\", // ====> '#afc163 0%, #66FF00 25%, #00CC00 50%, #009900 75%, #ffffff 100%'\n *     \"25%\": \"#66FF00\",\n *     \"100%\": \"#ffffff\"\n *   }\n */\n\nexport var sortGradient = function sortGradient(gradients) {\n  var tempArr = [];\n  Object.keys(gradients).forEach(function (key) {\n    var formattedKey = parseFloat(key.replace(/%/g, ''));\n\n    if (!isNaN(formattedKey)) {\n      tempArr.push({\n        key: formattedKey,\n        value: gradients[key]\n      });\n    }\n  });\n  tempArr = tempArr.sort(function (a, b) {\n    return a.key - b.key;\n  });\n  return tempArr.map(function (_ref) {\n    var key = _ref.key,\n        value = _ref.value;\n    return \"\".concat(value, \" \").concat(key, \"%\");\n  }).join(', ');\n};\n/**\n * Then this man came to realize the truth: Besides six pence, there is the moon. Besides bread and\n * butter, there is the bug. And... Besides women, there is the code.\n *\n * @example\n *   {\n *     \"0%\": \"#afc163\",\n *     \"25%\": \"#66FF00\",\n *     \"50%\": \"#00CC00\", // ====>  linear-gradient(to right, #afc163 0%, #66FF00 25%,\n *     \"75%\": \"#009900\", //        #00CC00 50%, #009900 75%, #ffffff 100%)\n *     \"100%\": \"#ffffff\"\n *   }\n */\n\nexport var handleGradient = function handleGradient(strokeColor, directionConfig) {\n  var _strokeColor$from = strokeColor.from,\n      from = _strokeColor$from === void 0 ? presetPrimaryColors.blue : _strokeColor$from,\n      _strokeColor$to = strokeColor.to,\n      to = _strokeColor$to === void 0 ? presetPrimaryColors.blue : _strokeColor$to,\n      _strokeColor$directio = strokeColor.direction,\n      direction = _strokeColor$directio === void 0 ? directionConfig === 'rtl' ? 'to left' : 'to right' : _strokeColor$directio,\n      rest = __rest(strokeColor, [\"from\", \"to\", \"direction\"]);\n\n  if (Object.keys(rest).length !== 0) {\n    var sortedGradients = sortGradient(rest);\n    return {\n      backgroundImage: \"linear-gradient(\".concat(direction, \", \").concat(sortedGradients, \")\")\n    };\n  }\n\n  return {\n    backgroundImage: \"linear-gradient(\".concat(direction, \", \").concat(from, \", \").concat(to, \")\")\n  };\n};\n\nvar Line = function Line(props) {\n  var prefixCls = props.prefixCls,\n      directionConfig = props.direction,\n      percent = props.percent,\n      strokeWidth = props.strokeWidth,\n      size = props.size,\n      strokeColor = props.strokeColor,\n      strokeLinecap = props.strokeLinecap,\n      children = props.children,\n      trailColor = props.trailColor,\n      success = props.success;\n  var backgroundProps = strokeColor && typeof strokeColor !== 'string' ? handleGradient(strokeColor, directionConfig) : {\n    background: strokeColor\n  };\n  var trailStyle = trailColor ? {\n    backgroundColor: trailColor\n  } : undefined;\n\n  var percentStyle = _extends({\n    width: \"\".concat(validProgress(percent), \"%\"),\n    height: strokeWidth || (size === 'small' ? 6 : 8),\n    borderRadius: strokeLinecap === 'square' ? 0 : ''\n  }, backgroundProps);\n\n  var successPercent = getSuccessPercent(props);\n  var successPercentStyle = {\n    width: \"\".concat(validProgress(successPercent), \"%\"),\n    height: strokeWidth || (size === 'small' ? 6 : 8),\n    borderRadius: strokeLinecap === 'square' ? 0 : '',\n    backgroundColor: success === null || success === void 0 ? void 0 : success.strokeColor\n  };\n  var successSegment = successPercent !== undefined ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-success-bg\"),\n    style: successPercentStyle\n  }) : null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-outer\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-inner\"),\n    style: trailStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-bg\"),\n    style: percentStyle\n  }), successSegment)), children);\n};\n\nexport default Line;","import { useRef, useEffect } from 'react';\nexport var defaultProps = {\n  className: '',\n  percent: 0,\n  prefixCls: 'rc-progress',\n  strokeColor: '#2db7f5',\n  strokeLinecap: 'round',\n  strokeWidth: 1,\n  style: {},\n  trailColor: '#D9D9D9',\n  trailWidth: 1\n};\nexport var useTransitionDuration = function useTransitionDuration(percentList) {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  var paths = percentList.map(function () {\n    return useRef();\n  });\n  var prevTimeStamp = useRef(null);\n  useEffect(function () {\n    var now = Date.now();\n    var updated = false;\n    Object.keys(paths).forEach(function (key) {\n      var path = paths[key].current;\n\n      if (!path) {\n        return;\n      }\n\n      updated = true;\n      var pathStyle = path.style;\n      pathStyle.transitionDuration = '.3s, .3s, .3s, .06s';\n\n      if (prevTimeStamp.current && now - prevTimeStamp.current < 100) {\n        pathStyle.transitionDuration = '0s, 0s';\n      }\n    });\n\n    if (updated) {\n      prevTimeStamp.current = Date.now();\n    }\n  });\n  return [paths];\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useTransitionDuration, defaultProps } from './common';\n\nvar Line = function Line(_ref) {\n  var className = _ref.className,\n      percent = _ref.percent,\n      prefixCls = _ref.prefixCls,\n      strokeColor = _ref.strokeColor,\n      strokeLinecap = _ref.strokeLinecap,\n      strokeWidth = _ref.strokeWidth,\n      style = _ref.style,\n      trailColor = _ref.trailColor,\n      trailWidth = _ref.trailWidth,\n      transition = _ref.transition,\n      restProps = _objectWithoutProperties(_ref, [\"className\", \"percent\", \"prefixCls\", \"strokeColor\", \"strokeLinecap\", \"strokeWidth\", \"style\", \"trailColor\", \"trailWidth\", \"transition\"]);\n\n  // eslint-disable-next-line no-param-reassign\n  delete restProps.gapPosition;\n  var percentList = Array.isArray(percent) ? percent : [percent];\n  var strokeColorList = Array.isArray(strokeColor) ? strokeColor : [strokeColor];\n\n  var _useTransitionDuratio = useTransitionDuration(percentList),\n      _useTransitionDuratio2 = _slicedToArray(_useTransitionDuratio, 1),\n      paths = _useTransitionDuratio2[0];\n\n  var center = strokeWidth / 2;\n  var right = 100 - strokeWidth / 2;\n  var pathString = \"M \".concat(strokeLinecap === 'round' ? center : 0, \",\").concat(center, \"\\n         L \").concat(strokeLinecap === 'round' ? right : 100, \",\").concat(center);\n  var viewBoxString = \"0 0 100 \".concat(strokeWidth);\n  var stackPtg = 0;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: classNames(\"\".concat(prefixCls, \"-line\"), className),\n    viewBox: viewBoxString,\n    preserveAspectRatio: \"none\",\n    style: style\n  }, restProps), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"\".concat(prefixCls, \"-line-trail\"),\n    d: pathString,\n    strokeLinecap: strokeLinecap,\n    stroke: trailColor,\n    strokeWidth: trailWidth || strokeWidth,\n    fillOpacity: \"0\"\n  }), percentList.map(function (ptg, index) {\n    var dashPercent = 1;\n\n    switch (strokeLinecap) {\n      case 'round':\n        dashPercent = 1 - strokeWidth / 100;\n        break;\n\n      case 'square':\n        dashPercent = 1 - strokeWidth / 2 / 100;\n        break;\n\n      default:\n        dashPercent = 1;\n        break;\n    }\n\n    var pathStyle = {\n      strokeDasharray: \"\".concat(ptg * dashPercent, \"px, 100px\"),\n      strokeDashoffset: \"-\".concat(stackPtg, \"px\"),\n      transition: transition || 'stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear'\n    };\n    var color = strokeColorList[index] || strokeColorList[strokeColorList.length - 1];\n    stackPtg += ptg;\n    return /*#__PURE__*/React.createElement(\"path\", {\n      key: index,\n      className: \"\".concat(prefixCls, \"-line-path\"),\n      d: pathString,\n      strokeLinecap: strokeLinecap,\n      stroke: color,\n      strokeWidth: strokeWidth,\n      fillOpacity: \"0\",\n      ref: paths[index],\n      style: pathStyle\n    });\n  }));\n};\n\nLine.defaultProps = defaultProps;\nLine.displayName = 'Line';\nexport default Line;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useTransitionDuration, defaultProps } from './common';\nvar gradientSeed = 0;\n\nfunction stripPercentToNumber(percent) {\n  return +percent.replace('%', '');\n}\n\nfunction toArray(symArray) {\n  return Array.isArray(symArray) ? symArray : [symArray];\n}\n\nfunction getPathStyles(offset, percent, strokeColor, strokeWidth) {\n  var gapDegree = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var gapPosition = arguments.length > 5 ? arguments[5] : undefined;\n  var radius = 50 - strokeWidth / 2;\n  var beginPositionX = 0;\n  var beginPositionY = -radius;\n  var endPositionX = 0;\n  var endPositionY = -2 * radius;\n\n  switch (gapPosition) {\n    case 'left':\n      beginPositionX = -radius;\n      beginPositionY = 0;\n      endPositionX = 2 * radius;\n      endPositionY = 0;\n      break;\n\n    case 'right':\n      beginPositionX = radius;\n      beginPositionY = 0;\n      endPositionX = -2 * radius;\n      endPositionY = 0;\n      break;\n\n    case 'bottom':\n      beginPositionY = radius;\n      endPositionY = 2 * radius;\n      break;\n\n    default:\n  }\n\n  var pathString = \"M 50,50 m \".concat(beginPositionX, \",\").concat(beginPositionY, \"\\n   a \").concat(radius, \",\").concat(radius, \" 0 1 1 \").concat(endPositionX, \",\").concat(-endPositionY, \"\\n   a \").concat(radius, \",\").concat(radius, \" 0 1 1 \").concat(-endPositionX, \",\").concat(endPositionY);\n  var len = Math.PI * 2 * radius;\n  var pathStyle = {\n    stroke: strokeColor,\n    strokeDasharray: \"\".concat(percent / 100 * (len - gapDegree), \"px \").concat(len, \"px\"),\n    strokeDashoffset: \"-\".concat(gapDegree / 2 + offset / 100 * (len - gapDegree), \"px\"),\n    transition: 'stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s'\n  };\n  return {\n    pathString: pathString,\n    pathStyle: pathStyle\n  };\n}\n\nvar Circle = function Circle(_ref) {\n  var prefixCls = _ref.prefixCls,\n      strokeWidth = _ref.strokeWidth,\n      trailWidth = _ref.trailWidth,\n      gapDegree = _ref.gapDegree,\n      gapPosition = _ref.gapPosition,\n      trailColor = _ref.trailColor,\n      strokeLinecap = _ref.strokeLinecap,\n      style = _ref.style,\n      className = _ref.className,\n      strokeColor = _ref.strokeColor,\n      percent = _ref.percent,\n      restProps = _objectWithoutProperties(_ref, [\"prefixCls\", \"strokeWidth\", \"trailWidth\", \"gapDegree\", \"gapPosition\", \"trailColor\", \"strokeLinecap\", \"style\", \"className\", \"strokeColor\", \"percent\"]);\n\n  var gradientId = React.useMemo(function () {\n    gradientSeed += 1;\n    return gradientSeed;\n  }, []);\n\n  var _getPathStyles = getPathStyles(0, 100, trailColor, strokeWidth, gapDegree, gapPosition),\n      pathString = _getPathStyles.pathString,\n      pathStyle = _getPathStyles.pathStyle;\n\n  var percentList = toArray(percent);\n  var strokeColorList = toArray(strokeColor);\n  var gradient = strokeColorList.find(function (color) {\n    return Object.prototype.toString.call(color) === '[object Object]';\n  });\n\n  var _useTransitionDuratio = useTransitionDuration(percentList),\n      _useTransitionDuratio2 = _slicedToArray(_useTransitionDuratio, 1),\n      paths = _useTransitionDuratio2[0];\n\n  var getStokeList = function getStokeList() {\n    var stackPtg = 0;\n    return percentList.map(function (ptg, index) {\n      var color = strokeColorList[index] || strokeColorList[strokeColorList.length - 1];\n      var stroke = Object.prototype.toString.call(color) === '[object Object]' ? \"url(#\".concat(prefixCls, \"-gradient-\").concat(gradientId, \")\") : '';\n      var pathStyles = getPathStyles(stackPtg, ptg, color, strokeWidth, gapDegree, gapPosition);\n      stackPtg += ptg;\n      return /*#__PURE__*/React.createElement(\"path\", {\n        key: index,\n        className: \"\".concat(prefixCls, \"-circle-path\"),\n        d: pathStyles.pathString,\n        stroke: stroke,\n        strokeLinecap: strokeLinecap,\n        strokeWidth: strokeWidth,\n        opacity: ptg === 0 ? 0 : 1,\n        fillOpacity: \"0\",\n        style: pathStyles.pathStyle,\n        ref: paths[index]\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: classNames(\"\".concat(prefixCls, \"-circle\"), className),\n    viewBox: \"0 0 100 100\",\n    style: style\n  }, restProps), gradient && /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"\".concat(prefixCls, \"-gradient-\").concat(gradientId),\n    x1: \"100%\",\n    y1: \"0%\",\n    x2: \"0%\",\n    y2: \"0%\"\n  }, Object.keys(gradient).sort(function (a, b) {\n    return stripPercentToNumber(a) - stripPercentToNumber(b);\n  }).map(function (key, index) {\n    return /*#__PURE__*/React.createElement(\"stop\", {\n      key: index,\n      offset: key,\n      stopColor: gradient[key]\n    });\n  }))), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"\".concat(prefixCls, \"-circle-trail\"),\n    d: pathString,\n    stroke: trailColor,\n    strokeLinecap: strokeLinecap,\n    strokeWidth: trailWidth || strokeWidth,\n    fillOpacity: \"0\",\n    style: pathStyle\n  }), getStokeList().reverse());\n};\n\nCircle.defaultProps = defaultProps;\nCircle.displayName = 'Circle';\nexport default Circle;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport { Circle as RCCircle } from 'rc-progress';\nimport { presetPrimaryColors } from '@ant-design/colors';\nimport classNames from 'classnames';\nimport { validProgress, getSuccessPercent } from './utils';\n\nfunction getPercentage(_ref) {\n  var percent = _ref.percent,\n      success = _ref.success,\n      successPercent = _ref.successPercent;\n  var ptg = validProgress(percent);\n  var realSuccessPercent = getSuccessPercent({\n    success: success,\n    successPercent: successPercent\n  });\n\n  if (!realSuccessPercent) {\n    return ptg;\n  }\n\n  return [validProgress(realSuccessPercent), validProgress(ptg - validProgress(realSuccessPercent))];\n}\n\nfunction getStrokeColor(_ref2) {\n  var success = _ref2.success,\n      strokeColor = _ref2.strokeColor,\n      successPercent = _ref2.successPercent;\n  var color = strokeColor || null;\n  var realSuccessPercent = getSuccessPercent({\n    success: success,\n    successPercent: successPercent\n  });\n\n  if (!realSuccessPercent) {\n    return color;\n  }\n\n  return [presetPrimaryColors.green, color];\n}\n\nvar Circle = function Circle(props) {\n  var prefixCls = props.prefixCls,\n      width = props.width,\n      strokeWidth = props.strokeWidth,\n      trailColor = props.trailColor,\n      strokeLinecap = props.strokeLinecap,\n      gapPosition = props.gapPosition,\n      gapDegree = props.gapDegree,\n      type = props.type,\n      children = props.children;\n  var circleSize = width || 120;\n  var circleStyle = {\n    width: circleSize,\n    height: circleSize,\n    fontSize: circleSize * 0.15 + 6\n  };\n  var circleWidth = strokeWidth || 6;\n  var gapPos = gapPosition || type === 'dashboard' && 'bottom' || 'top';\n\n  var getGapDegree = function getGapDegree() {\n    // Support gapDeg = 0 when type = 'dashboard'\n    if (gapDegree || gapDegree === 0) {\n      return gapDegree;\n    }\n\n    if (type === 'dashboard') {\n      return 75;\n    }\n\n    return undefined;\n  }; // using className to style stroke color\n\n\n  var strokeColor = getStrokeColor(props);\n  var isGradient = Object.prototype.toString.call(strokeColor) === '[object Object]';\n  var wrapperClassName = classNames(\"\".concat(prefixCls, \"-inner\"), _defineProperty({}, \"\".concat(prefixCls, \"-circle-gradient\"), isGradient));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: wrapperClassName,\n    style: circleStyle\n  }, /*#__PURE__*/React.createElement(RCCircle, {\n    percent: getPercentage(props),\n    strokeWidth: circleWidth,\n    trailWidth: circleWidth,\n    strokeColor: strokeColor,\n    strokeLinecap: strokeLinecap,\n    trailColor: trailColor,\n    prefixCls: prefixCls,\n    gapDegree: getGapDegree(),\n    gapPosition: gapPos\n  }), children);\n};\n\nexport default Circle;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport classNames from 'classnames';\n\nvar Steps = function Steps(props) {\n  var size = props.size,\n      steps = props.steps,\n      _props$percent = props.percent,\n      percent = _props$percent === void 0 ? 0 : _props$percent,\n      _props$strokeWidth = props.strokeWidth,\n      strokeWidth = _props$strokeWidth === void 0 ? 8 : _props$strokeWidth,\n      strokeColor = props.strokeColor,\n      trailColor = props.trailColor,\n      prefixCls = props.prefixCls,\n      children = props.children;\n  var current = Math.round(steps * (percent / 100));\n  var stepWidth = size === 'small' ? 2 : 14;\n  var styledSteps = [];\n\n  for (var i = 0; i < steps; i += 1) {\n    styledSteps.push( /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      className: classNames(\"\".concat(prefixCls, \"-steps-item\"), _defineProperty({}, \"\".concat(prefixCls, \"-steps-item-active\"), i <= current - 1)),\n      style: {\n        backgroundColor: i <= current - 1 ? strokeColor : trailColor,\n        width: stepWidth,\n        height: strokeWidth\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-steps-outer\")\n  }, styledSteps, children);\n};\n\nexport default Steps;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport CheckOutlined from \"@ant-design/icons/es/icons/CheckOutlined\";\nimport CheckCircleFilled from \"@ant-design/icons/es/icons/CheckCircleFilled\";\nimport CloseCircleFilled from \"@ant-design/icons/es/icons/CloseCircleFilled\";\nimport { ConfigConsumer } from '../config-provider';\nimport { tuple } from '../_util/type';\nimport devWarning from '../_util/devWarning';\nimport Line from './Line';\nimport Circle from './Circle';\nimport Steps from './Steps';\nimport { validProgress, getSuccessPercent } from './utils';\nvar ProgressTypes = tuple('line', 'circle', 'dashboard');\nvar ProgressStatuses = tuple('normal', 'exception', 'active', 'success');\n\nvar Progress = /*#__PURE__*/function (_React$Component) {\n  _inherits(Progress, _React$Component);\n\n  var _super = _createSuper(Progress);\n\n  function Progress() {\n    var _this;\n\n    _classCallCheck(this, Progress);\n\n    _this = _super.apply(this, arguments);\n\n    _this.renderProgress = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls,\n          direction = _ref.direction;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      var customizePrefixCls = props.prefixCls,\n          className = props.className,\n          size = props.size,\n          type = props.type,\n          steps = props.steps,\n          showInfo = props.showInfo,\n          strokeColor = props.strokeColor,\n          restProps = __rest(props, [\"prefixCls\", \"className\", \"size\", \"type\", \"steps\", \"showInfo\", \"strokeColor\"]);\n\n      var prefixCls = getPrefixCls('progress', customizePrefixCls);\n\n      var progressStatus = _this.getProgressStatus();\n\n      var progressInfo = _this.renderProcessInfo(prefixCls, progressStatus);\n\n      devWarning(!('successPercent' in props), 'Progress', '`successPercent` is deprecated. Please use `success.percent` instead.');\n      var progress; // Render progress shape\n\n      if (type === 'line') {\n        progress = steps ? /*#__PURE__*/React.createElement(Steps, _extends({}, _this.props, {\n          strokeColor: typeof strokeColor === 'string' ? strokeColor : undefined,\n          prefixCls: prefixCls,\n          steps: steps\n        }), progressInfo) : /*#__PURE__*/React.createElement(Line, _extends({}, _this.props, {\n          prefixCls: prefixCls,\n          direction: direction\n        }), progressInfo);\n      } else if (type === 'circle' || type === 'dashboard') {\n        progress = /*#__PURE__*/React.createElement(Circle, _extends({}, _this.props, {\n          prefixCls: prefixCls,\n          progressStatus: progressStatus\n        }), progressInfo);\n      }\n\n      var classString = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(type === 'dashboard' && 'circle' || steps && 'steps' || type), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-status-\").concat(progressStatus), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-show-info\"), showInfo), _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(size), size), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n      return /*#__PURE__*/React.createElement(\"div\", _extends({}, omit(restProps, ['status', 'format', 'trailColor', 'strokeWidth', 'width', 'gapDegree', 'gapPosition', 'strokeLinecap', 'percent', 'success', 'successPercent']), {\n        className: classString\n      }), progress);\n    };\n\n    return _this;\n  }\n\n  _createClass(Progress, [{\n    key: \"getPercentNumber\",\n    value: function getPercentNumber() {\n      var _this$props$percent = this.props.percent,\n          percent = _this$props$percent === void 0 ? 0 : _this$props$percent;\n      var successPercent = getSuccessPercent(this.props);\n      return parseInt(successPercent !== undefined ? successPercent.toString() : percent.toString(), 10);\n    }\n  }, {\n    key: \"getProgressStatus\",\n    value: function getProgressStatus() {\n      var status = this.props.status;\n\n      if (ProgressStatuses.indexOf(status) < 0 && this.getPercentNumber() >= 100) {\n        return 'success';\n      }\n\n      return status || 'normal';\n    }\n  }, {\n    key: \"renderProcessInfo\",\n    value: function renderProcessInfo(prefixCls, progressStatus) {\n      var _this$props = this.props,\n          showInfo = _this$props.showInfo,\n          format = _this$props.format,\n          type = _this$props.type,\n          percent = _this$props.percent;\n      var successPercent = getSuccessPercent(this.props);\n      if (!showInfo) return null;\n      var text;\n\n      var textFormatter = format || function (percentNumber) {\n        return \"\".concat(percentNumber, \"%\");\n      };\n\n      var isLineType = type === 'line';\n\n      if (format || progressStatus !== 'exception' && progressStatus !== 'success') {\n        text = textFormatter(validProgress(percent), validProgress(successPercent));\n      } else if (progressStatus === 'exception') {\n        text = isLineType ? /*#__PURE__*/React.createElement(CloseCircleFilled, null) : /*#__PURE__*/React.createElement(CloseOutlined, null);\n      } else if (progressStatus === 'success') {\n        text = isLineType ? /*#__PURE__*/React.createElement(CheckCircleFilled, null) : /*#__PURE__*/React.createElement(CheckOutlined, null);\n      }\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-text\"),\n        title: typeof text === 'string' ? text : undefined\n      }, text);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(ConfigConsumer, null, this.renderProgress);\n    }\n  }]);\n\n  return Progress;\n}(React.Component);\n\nexport { Progress as default };\nProgress.defaultProps = {\n  type: 'line',\n  percent: 0,\n  showInfo: true,\n  // null for different theme definition\n  trailColor: null,\n  size: 'default',\n  gapDegree: undefined,\n  strokeLinecap: 'round'\n};","import Progress from './progress';\nexport default Progress;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport CSSMotion from 'rc-motion';\nimport classNames from 'classnames';\nimport EyeOutlined from \"@ant-design/icons/es/icons/EyeOutlined\";\nimport DeleteOutlined from \"@ant-design/icons/es/icons/DeleteOutlined\";\nimport DownloadOutlined from \"@ant-design/icons/es/icons/DownloadOutlined\";\nimport Tooltip from '../../tooltip';\nimport Progress from '../../progress';\nvar ListItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _classNames3;\n\n  var prefixCls = _ref.prefixCls,\n      className = _ref.className,\n      style = _ref.style,\n      locale = _ref.locale,\n      listType = _ref.listType,\n      file = _ref.file,\n      items = _ref.items,\n      progressProps = _ref.progress,\n      iconRender = _ref.iconRender,\n      actionIconRender = _ref.actionIconRender,\n      itemRender = _ref.itemRender,\n      isImgUrl = _ref.isImgUrl,\n      showPreviewIcon = _ref.showPreviewIcon,\n      showRemoveIcon = _ref.showRemoveIcon,\n      showDownloadIcon = _ref.showDownloadIcon,\n      customRemoveIcon = _ref.removeIcon,\n      customDownloadIcon = _ref.downloadIcon,\n      onPreview = _ref.onPreview,\n      onDownload = _ref.onDownload,\n      onClose = _ref.onClose;\n\n  var _a, _b; // Delay to show the progress bar\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      showProgress = _React$useState2[0],\n      setShowProgress = _React$useState2[1];\n\n  var progressRafRef = React.useRef();\n  React.useEffect(function () {\n    progressRafRef.current = setTimeout(function () {\n      setShowProgress(true);\n    }, 300);\n    return function () {\n      window.clearTimeout(progressRafRef.current);\n    };\n  }, []); // This is used for legacy span make scrollHeight the wrong value.\n  // We will force these to be `display: block` with non `picture-card`\n\n  var spanClassName = \"\".concat(prefixCls, \"-span\");\n  var iconNode = iconRender(file);\n  var icon = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-text-icon\")\n  }, iconNode);\n\n  if (listType === 'picture' || listType === 'picture-card') {\n    if (file.status === 'uploading' || !file.thumbUrl && !file.url) {\n      var _classNames;\n\n      var uploadingClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-item-thumbnail\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-item-file\"), file.status !== 'uploading'), _classNames));\n      icon = /*#__PURE__*/React.createElement(\"div\", {\n        className: uploadingClassName\n      }, iconNode);\n    } else {\n      var _classNames2;\n\n      var thumbnail = (isImgUrl === null || isImgUrl === void 0 ? void 0 : isImgUrl(file)) ? /*#__PURE__*/React.createElement(\"img\", {\n        src: file.thumbUrl || file.url,\n        alt: file.name,\n        className: \"\".concat(prefixCls, \"-list-item-image\")\n      }) : iconNode;\n      var aClassName = classNames((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-list-item-thumbnail\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-list-item-file\"), isImgUrl && !isImgUrl(file)), _classNames2));\n      icon = /*#__PURE__*/React.createElement(\"a\", {\n        className: aClassName,\n        onClick: function onClick(e) {\n          return onPreview(file, e);\n        },\n        href: file.url || file.thumbUrl,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\"\n      }, thumbnail);\n    }\n  }\n\n  var infoUploadingClass = classNames((_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(prefixCls, \"-list-item\"), true), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-list-item-\").concat(file.status), true), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-list-item-list-type-\").concat(listType), true), _classNames3));\n  var linkProps = typeof file.linkProps === 'string' ? JSON.parse(file.linkProps) : file.linkProps;\n  var removeIcon = showRemoveIcon ? actionIconRender((typeof customRemoveIcon === 'function' ? customRemoveIcon(file) : customRemoveIcon) || /*#__PURE__*/React.createElement(DeleteOutlined, null), function () {\n    return onClose(file);\n  }, prefixCls, locale.removeFile) : null;\n  var downloadIcon = showDownloadIcon && file.status === 'done' ? actionIconRender((typeof customDownloadIcon === 'function' ? customDownloadIcon(file) : customDownloadIcon) || /*#__PURE__*/React.createElement(DownloadOutlined, null), function () {\n    return onDownload(file);\n  }, prefixCls, locale.downloadFile) : null;\n  var downloadOrDelete = listType !== 'picture-card' && /*#__PURE__*/React.createElement(\"span\", {\n    key: \"download-delete\",\n    className: classNames(\"\".concat(prefixCls, \"-list-item-card-actions\"), {\n      picture: listType === 'picture'\n    })\n  }, downloadIcon, removeIcon);\n  var listItemNameClass = classNames(\"\".concat(prefixCls, \"-list-item-name\"));\n  var preview = file.url ? [/*#__PURE__*/React.createElement(\"a\", _extends({\n    key: \"view\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    className: listItemNameClass,\n    title: file.name\n  }, linkProps, {\n    href: file.url,\n    onClick: function onClick(e) {\n      return onPreview(file, e);\n    }\n  }), file.name), downloadOrDelete] : [/*#__PURE__*/React.createElement(\"span\", {\n    key: \"view\",\n    className: listItemNameClass,\n    onClick: function onClick(e) {\n      return onPreview(file, e);\n    },\n    title: file.name\n  }, file.name), downloadOrDelete];\n  var previewStyle = {\n    pointerEvents: 'none',\n    opacity: 0.5\n  };\n  var previewIcon = showPreviewIcon ? /*#__PURE__*/React.createElement(\"a\", {\n    href: file.url || file.thumbUrl,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    style: file.url || file.thumbUrl ? undefined : previewStyle,\n    onClick: function onClick(e) {\n      return onPreview(file, e);\n    },\n    title: locale.previewFile\n  }, /*#__PURE__*/React.createElement(EyeOutlined, null)) : null;\n  var actions = listType === 'picture-card' && file.status !== 'uploading' && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-list-item-actions\")\n  }, previewIcon, file.status === 'done' && downloadIcon, removeIcon);\n  var message;\n\n  if (file.response && typeof file.response === 'string') {\n    message = file.response;\n  } else {\n    message = ((_a = file.error) === null || _a === void 0 ? void 0 : _a.statusText) || ((_b = file.error) === null || _b === void 0 ? void 0 : _b.message) || locale.uploadError;\n  }\n\n  var iconAndPreview = /*#__PURE__*/React.createElement(\"span\", {\n    className: spanClassName\n  }, icon, preview);\n  var dom = /*#__PURE__*/React.createElement(\"div\", {\n    className: infoUploadingClass\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-list-item-info\")\n  }, iconAndPreview), actions, showProgress && /*#__PURE__*/React.createElement(CSSMotion, {\n    motionName: \"fade\",\n    visible: file.status === 'uploading'\n  }, function (_ref2) {\n    var motionClassName = _ref2.className;\n    // show loading icon if upload progress listener is disabled\n    var loadingProgress = 'percent' in file ? /*#__PURE__*/React.createElement(Progress, _extends({}, progressProps, {\n      type: \"line\",\n      percent: file.percent\n    })) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(prefixCls, \"-list-item-progress\"), motionClassName)\n    }, loadingProgress);\n  }));\n  var listContainerNameClass = classNames(\"\".concat(prefixCls, \"-list-\").concat(listType, \"-container\"), className);\n  var item = file.status === 'error' ? /*#__PURE__*/React.createElement(Tooltip, {\n    title: message,\n    getPopupContainer: function getPopupContainer(node) {\n      return node.parentNode;\n    }\n  }, dom) : dom;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: listContainerNameClass,\n    style: style,\n    ref: ref\n  }, itemRender ? itemRender(item, file, items) : item);\n});\nexport default ListItem;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport CSSMotion, { CSSMotionList } from 'rc-motion';\nimport classNames from 'classnames';\nimport LoadingOutlined from \"@ant-design/icons/es/icons/LoadingOutlined\";\nimport PaperClipOutlined from \"@ant-design/icons/es/icons/PaperClipOutlined\";\nimport PictureTwoTone from \"@ant-design/icons/es/icons/PictureTwoTone\";\nimport FileTwoTone from \"@ant-design/icons/es/icons/FileTwoTone\";\nimport { cloneElement, isValidElement } from '../../_util/reactNode';\nimport { previewImage, isImageUrl } from '../utils';\nimport collapseMotion from '../../_util/motion';\nimport { ConfigContext } from '../../config-provider';\nimport Button from '../../button';\nimport useForceUpdate from '../../_util/hooks/useForceUpdate';\nimport ListItem from './ListItem';\n\nvar listItemMotion = _extends({}, collapseMotion);\n\ndelete listItemMotion.onAppearEnd;\ndelete listItemMotion.onEnterEnd;\ndelete listItemMotion.onLeaveEnd;\n\nvar InternalUploadList = function InternalUploadList(_ref, ref) {\n  var _classNames;\n\n  var listType = _ref.listType,\n      previewFile = _ref.previewFile,\n      onPreview = _ref.onPreview,\n      onDownload = _ref.onDownload,\n      onRemove = _ref.onRemove,\n      locale = _ref.locale,\n      iconRender = _ref.iconRender,\n      isImgUrl = _ref.isImageUrl,\n      customizePrefixCls = _ref.prefixCls,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items,\n      showPreviewIcon = _ref.showPreviewIcon,\n      showRemoveIcon = _ref.showRemoveIcon,\n      showDownloadIcon = _ref.showDownloadIcon,\n      removeIcon = _ref.removeIcon,\n      downloadIcon = _ref.downloadIcon,\n      progress = _ref.progress,\n      appendAction = _ref.appendAction,\n      itemRender = _ref.itemRender;\n  var forceUpdate = useForceUpdate();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      motionAppear = _React$useState2[0],\n      setMotionAppear = _React$useState2[1]; // ============================= Effect =============================\n\n\n  React.useEffect(function () {\n    if (listType !== 'picture' && listType !== 'picture-card') {\n      return;\n    }\n\n    (items || []).forEach(function (file) {\n      if (typeof document === 'undefined' || typeof window === 'undefined' || !window.FileReader || !window.File || !(file.originFileObj instanceof File || file.originFileObj instanceof Blob) || file.thumbUrl !== undefined) {\n        return;\n      }\n\n      file.thumbUrl = '';\n\n      if (previewFile) {\n        previewFile(file.originFileObj).then(function (previewDataUrl) {\n          // Need append '' to avoid dead loop\n          file.thumbUrl = previewDataUrl || '';\n          forceUpdate();\n        });\n      }\n    });\n  }, [listType, items, previewFile]);\n  React.useEffect(function () {\n    setMotionAppear(true);\n  }, []); // ============================= Events =============================\n\n  var onInternalPreview = function onInternalPreview(file, e) {\n    if (!onPreview) {\n      return;\n    }\n\n    e.preventDefault();\n    return onPreview(file);\n  };\n\n  var onInternalDownload = function onInternalDownload(file) {\n    if (typeof onDownload === 'function') {\n      onDownload(file);\n    } else if (file.url) {\n      window.open(file.url);\n    }\n  };\n\n  var onInternalClose = function onInternalClose(file) {\n    if (onRemove) {\n      onRemove(file);\n    }\n  };\n\n  var internalIconRender = function internalIconRender(file) {\n    if (iconRender) {\n      return iconRender(file, listType);\n    }\n\n    var isLoading = file.status === 'uploading';\n    var fileIcon = isImgUrl && isImgUrl(file) ? /*#__PURE__*/React.createElement(PictureTwoTone, null) : /*#__PURE__*/React.createElement(FileTwoTone, null);\n    var icon = isLoading ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : /*#__PURE__*/React.createElement(PaperClipOutlined, null);\n\n    if (listType === 'picture') {\n      icon = isLoading ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : fileIcon;\n    } else if (listType === 'picture-card') {\n      icon = isLoading ? locale.uploading : fileIcon;\n    }\n\n    return icon;\n  };\n\n  var actionIconRender = function actionIconRender(customIcon, callback, prefixCls, title) {\n    var btnProps = {\n      type: 'text',\n      size: 'small',\n      title: title,\n      onClick: function onClick(e) {\n        callback();\n\n        if (isValidElement(customIcon) && customIcon.props.onClick) {\n          customIcon.props.onClick(e);\n        }\n      },\n      className: \"\".concat(prefixCls, \"-list-item-card-actions-btn\")\n    };\n\n    if (isValidElement(customIcon)) {\n      var btnIcon = cloneElement(customIcon, _extends(_extends({}, customIcon.props), {\n        onClick: function onClick() {}\n      }));\n      return /*#__PURE__*/React.createElement(Button, _extends({}, btnProps, {\n        icon: btnIcon\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(Button, btnProps, /*#__PURE__*/React.createElement(\"span\", null, customIcon));\n  }; // ============================== Ref ===============================\n  // Test needs\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      handlePreview: onInternalPreview,\n      handleDownload: onInternalDownload\n    };\n  });\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction; // ============================= Render =============================\n\n\n  var prefixCls = getPrefixCls('upload', customizePrefixCls);\n  var listClassNames = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-list\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-\").concat(listType), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-rtl\"), direction === 'rtl'), _classNames)); // >>> Motion config\n\n  var motionKeyList = _toConsumableArray(items.map(function (file) {\n    return {\n      key: file.uid,\n      file: file\n    };\n  }));\n\n  var animationDirection = listType === 'picture-card' ? 'animate-inline' : 'animate'; // const transitionName = list.length === 0 ? '' : `${prefixCls}-${animationDirection}`;\n\n  var motionConfig = {\n    motionName: \"\".concat(prefixCls, \"-\").concat(animationDirection),\n    keys: motionKeyList,\n    motionAppear: motionAppear\n  };\n\n  if (listType !== 'picture-card') {\n    motionConfig = _extends(_extends({}, listItemMotion), motionConfig);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: listClassNames\n  }, /*#__PURE__*/React.createElement(CSSMotionList, _extends({}, motionConfig, {\n    component: false\n  }), function (_ref2) {\n    var key = _ref2.key,\n        file = _ref2.file,\n        motionClassName = _ref2.className,\n        motionStyle = _ref2.style;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: key,\n      locale: locale,\n      prefixCls: prefixCls,\n      className: motionClassName,\n      style: motionStyle,\n      file: file,\n      items: items,\n      progress: progress,\n      listType: listType,\n      isImgUrl: isImgUrl,\n      showPreviewIcon: showPreviewIcon,\n      showRemoveIcon: showRemoveIcon,\n      showDownloadIcon: showDownloadIcon,\n      removeIcon: removeIcon,\n      downloadIcon: downloadIcon,\n      iconRender: internalIconRender,\n      actionIconRender: actionIconRender,\n      itemRender: itemRender,\n      onPreview: onInternalPreview,\n      onDownload: onInternalDownload,\n      onClose: onInternalClose\n    });\n  }), appendAction && /*#__PURE__*/React.createElement(CSSMotion, motionConfig, function (_ref3) {\n    var motionClassName = _ref3.className,\n        motionStyle = _ref3.style;\n    return cloneElement(appendAction, function (oriProps) {\n      return {\n        className: classNames(oriProps.className, motionClassName),\n        style: _extends(_extends({}, motionStyle), oriProps.style)\n      };\n    });\n  }));\n};\n\nvar UploadList = /*#__PURE__*/React.forwardRef(InternalUploadList);\nUploadList.displayName = 'UploadList';\nUploadList.defaultProps = {\n  listType: 'text',\n  progress: {\n    strokeWidth: 2,\n    showInfo: false\n  },\n  showRemoveIcon: true,\n  showDownloadIcon: false,\n  showPreviewIcon: true,\n  previewFile: previewImage,\n  isImageUrl: isImageUrl\n};\nexport default UploadList;","import { useRef, useEffect } from 'react';\nimport raf from \"rc-util/es/raf\";\nimport useForceUpdate from '../_util/hooks/useForceUpdate'; // Note. Only for upload usage. Do not export to global util hooks\n\nexport default function useFreshState(defaultValue, propValue) {\n  var valueRef = useRef(defaultValue);\n  var forceUpdate = useForceUpdate();\n  var rafRef = useRef(); // Set value\n\n  function setValue(newValue) {\n    valueRef.current = newValue;\n    forceUpdate();\n  }\n\n  function cleanUp() {\n    raf.cancel(rafRef.current);\n  }\n\n  function rafSyncValue(newValue) {\n    cleanUp();\n    rafRef.current = raf(function () {\n      setValue(newValue);\n    });\n  } // Get value\n\n\n  function getValue() {\n    var displayValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (displayValue) {\n      return propValue || valueRef.current;\n    }\n\n    return valueRef.current;\n  } // Effect will always update in a next frame to avoid sync state overwrite current processing state\n\n\n  useEffect(function () {\n    if (propValue) {\n      rafSyncValue(propValue);\n    }\n  }, [propValue]); // Clean up\n\n  useEffect(function () {\n    return function () {\n      cleanUp();\n    };\n  }, []);\n  return [getValue, setValue];\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport RcUpload from 'rc-upload';\nimport classNames from 'classnames';\nimport Dragger from './Dragger';\nimport UploadList from './UploadList';\nimport { T, fileToObject, getFileItem, removeFileItem } from './utils';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale/default';\nimport { ConfigContext } from '../config-provider';\nimport devWarning from '../_util/devWarning';\nimport useForceUpdate from '../_util/hooks/useForceUpdate';\nimport useFreshState from './useFreshState';\n\nvar InternalUpload = function InternalUpload(props, ref) {\n  var _classNames2;\n\n  var fileListProp = props.fileList,\n      defaultFileList = props.defaultFileList,\n      onRemove = props.onRemove,\n      showUploadList = props.showUploadList,\n      listType = props.listType,\n      onPreview = props.onPreview,\n      onDownload = props.onDownload,\n      onChange = props.onChange,\n      previewFile = props.previewFile,\n      disabled = props.disabled,\n      propLocale = props.locale,\n      iconRender = props.iconRender,\n      isImageUrl = props.isImageUrl,\n      progress = props.progress,\n      customizePrefixCls = props.prefixCls,\n      className = props.className,\n      type = props.type,\n      children = props.children,\n      style = props.style,\n      itemRender = props.itemRender,\n      maxCount = props.maxCount;\n\n  var _React$useState = React.useState('drop'),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dragState = _React$useState2[0],\n      setDragState = _React$useState2[1];\n\n  var forceUpdate = useForceUpdate(); // Refresh always use fresh data\n\n  var _useFreshState = useFreshState(fileListProp || defaultFileList || [], fileListProp),\n      _useFreshState2 = _slicedToArray(_useFreshState, 2),\n      getFileList = _useFreshState2[0],\n      setFileList = _useFreshState2[1];\n\n  var upload = React.useRef();\n  React.useEffect(function () {\n    devWarning('fileList' in props || !('value' in props), 'Upload', '`value` is not a valid prop, do you mean `fileList`?');\n    devWarning(!('transformFile' in props), 'Upload', '`transformFile` is deprecated. Please use `beforeUpload` directly.');\n  }, []); // Control mode will auto fill file uid if not provided\n\n  React.useEffect(function () {\n    var timestamp = Date.now();\n    (fileListProp || []).forEach(function (file, index) {\n      var _a;\n\n      file.uid = (_a = file.uid) !== null && _a !== void 0 ? _a : \"__AUTO__\".concat(timestamp, \"_\").concat(index, \"__\");\n    });\n  }, [fileListProp]);\n\n  var onInternalChange = function onInternalChange(info) {\n    var cloneList = _toConsumableArray(info.fileList); // Cut to match count\n\n\n    if (maxCount === 1) {\n      cloneList = cloneList.slice(-1);\n    } else if (maxCount) {\n      cloneList = cloneList.slice(0, maxCount);\n    }\n\n    setFileList(cloneList);\n    onChange === null || onChange === void 0 ? void 0 : onChange(_extends(_extends({}, info), {\n      fileList: cloneList\n    }));\n  };\n\n  var onStart = function onStart(file) {\n    var targetItem = fileToObject(file);\n    targetItem.status = 'uploading';\n    var nextFileList = getFileList().concat();\n    var fileIndex = nextFileList.findIndex(function (_ref) {\n      var uid = _ref.uid;\n      return uid === targetItem.uid;\n    });\n\n    if (fileIndex === -1) {\n      nextFileList.push(targetItem);\n    } else {\n      nextFileList[fileIndex] = targetItem;\n    }\n\n    onInternalChange({\n      file: targetItem,\n      fileList: nextFileList\n    });\n  };\n\n  var onSuccess = function onSuccess(response, file, xhr) {\n    try {\n      if (typeof response === 'string') {\n        response = JSON.parse(response);\n      }\n    } catch (e) {\n      /* do nothing */\n    }\n\n    var targetItem = getFileItem(file, getFileList()); // removed\n\n    if (!targetItem) {\n      return;\n    }\n\n    targetItem.status = 'done';\n    targetItem.response = response;\n    targetItem.xhr = xhr;\n    onInternalChange({\n      file: _extends({}, targetItem),\n      fileList: getFileList().concat()\n    });\n  };\n\n  var onProgress = function onProgress(e, file) {\n    var targetItem = getFileItem(file, getFileList()); // removed\n\n    if (!targetItem) {\n      return;\n    }\n\n    targetItem.percent = e.percent;\n    onInternalChange({\n      event: e,\n      file: _extends({}, targetItem),\n      fileList: getFileList().concat()\n    });\n  };\n\n  var onError = function onError(error, response, file) {\n    var targetItem = getFileItem(file, getFileList()); // removed\n\n    if (!targetItem) {\n      return;\n    }\n\n    targetItem.error = error;\n    targetItem.response = response;\n    targetItem.status = 'error';\n    onInternalChange({\n      file: _extends({}, targetItem),\n      fileList: getFileList().concat()\n    });\n  };\n\n  var handleRemove = function handleRemove(file) {\n    var currentFile;\n    Promise.resolve(typeof onRemove === 'function' ? onRemove(file) : onRemove).then(function (ret) {\n      var _a; // Prevent removing file\n\n\n      if (ret === false) {\n        return;\n      }\n\n      var fileList = getFileList();\n      var removedFileList = removeFileItem(file, fileList);\n\n      if (removedFileList) {\n        currentFile = _extends(_extends({}, file), {\n          status: 'removed'\n        });\n        fileList === null || fileList === void 0 ? void 0 : fileList.forEach(function (item) {\n          var matchKey = currentFile.uid !== undefined ? 'uid' : 'name';\n\n          if (item[matchKey] === currentFile[matchKey]) {\n            item.status = 'removed';\n          }\n        });\n        (_a = upload.current) === null || _a === void 0 ? void 0 : _a.abort(currentFile);\n        onInternalChange({\n          file: currentFile,\n          fileList: removedFileList\n        });\n      }\n    });\n  };\n\n  var onFileDrop = function onFileDrop(e) {\n    setDragState(e.type);\n  };\n\n  var beforeUpload = function beforeUpload(file, fileListArgs) {\n    var beforeUploadProp = props.beforeUpload;\n\n    if (!beforeUploadProp) {\n      return true;\n    }\n\n    var result = beforeUploadProp(file, fileListArgs);\n\n    if (result === false) {\n      // Get unique file list\n      var uniqueList = [];\n      getFileList().concat(fileListArgs.map(fileToObject)).forEach(function (f) {\n        if (uniqueList.every(function (uf) {\n          return uf.uid !== f.uid;\n        })) {\n          uniqueList.push(f);\n        }\n      });\n      onInternalChange({\n        file: file,\n        fileList: uniqueList\n      });\n      return false;\n    }\n\n    if (result && result.then) {\n      return result;\n    }\n\n    return true;\n  }; // Test needs\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onStart: onStart,\n      onSuccess: onSuccess,\n      onProgress: onProgress,\n      onError: onError,\n      fileList: getFileList(),\n      upload: upload.current,\n      forceUpdate: forceUpdate\n    };\n  });\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var prefixCls = getPrefixCls('upload', customizePrefixCls);\n\n  var rcUploadProps = _extends(_extends({\n    onStart: onStart,\n    onError: onError,\n    onProgress: onProgress,\n    onSuccess: onSuccess\n  }, props), {\n    prefixCls: prefixCls,\n    beforeUpload: beforeUpload,\n    onChange: undefined\n  });\n\n  delete rcUploadProps.className;\n  delete rcUploadProps.style; // Remove id to avoid open by label when trigger is hidden\n  // !children: https://github.com/ant-design/ant-design/issues/14298\n  // disabled: https://github.com/ant-design/ant-design/issues/16478\n  //           https://github.com/ant-design/ant-design/issues/24197\n\n  if (!children || disabled) {\n    delete rcUploadProps.id;\n  }\n\n  var renderUploadList = function renderUploadList(button) {\n    return showUploadList ? /*#__PURE__*/React.createElement(LocaleReceiver, {\n      componentName: \"Upload\",\n      defaultLocale: defaultLocale.Upload\n    }, function (locale) {\n      var _ref2 = typeof showUploadList === 'boolean' ? {} : showUploadList,\n          showRemoveIcon = _ref2.showRemoveIcon,\n          showPreviewIcon = _ref2.showPreviewIcon,\n          showDownloadIcon = _ref2.showDownloadIcon,\n          removeIcon = _ref2.removeIcon,\n          downloadIcon = _ref2.downloadIcon;\n\n      return /*#__PURE__*/React.createElement(UploadList, {\n        listType: listType,\n        items: getFileList(true),\n        previewFile: previewFile,\n        onPreview: onPreview,\n        onDownload: onDownload,\n        onRemove: handleRemove,\n        showRemoveIcon: !disabled && showRemoveIcon,\n        showPreviewIcon: showPreviewIcon,\n        showDownloadIcon: showDownloadIcon,\n        removeIcon: removeIcon,\n        downloadIcon: downloadIcon,\n        iconRender: iconRender,\n        locale: _extends(_extends({}, locale), propLocale),\n        isImageUrl: isImageUrl,\n        progress: progress,\n        appendAction: button,\n        itemRender: itemRender\n      });\n    }) : button;\n  };\n\n  if (type === 'drag') {\n    var _classNames;\n\n    var dragCls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-uploading\"), getFileList().some(function (file) {\n      return file.status === 'uploading';\n    })), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-hover\"), dragState === 'dragover'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n    return /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: dragCls,\n      onDrop: onFileDrop,\n      onDragOver: onFileDrop,\n      onDragLeave: onFileDrop,\n      style: style\n    }, /*#__PURE__*/React.createElement(RcUpload, _extends({}, rcUploadProps, {\n      ref: upload,\n      className: \"\".concat(prefixCls, \"-btn\")\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-drag-container\")\n    }, children))), renderUploadList());\n  }\n\n  var uploadButtonCls = classNames(prefixCls, (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select-\").concat(listType), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames2));\n  var uploadButton = /*#__PURE__*/React.createElement(\"div\", {\n    className: uploadButtonCls,\n    style: children ? undefined : {\n      display: 'none'\n    }\n  }, /*#__PURE__*/React.createElement(RcUpload, _extends({}, rcUploadProps, {\n    ref: upload\n  })));\n\n  if (listType === 'picture-card') {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(\"\".concat(prefixCls, \"-picture-card-wrapper\"), className)\n    }, renderUploadList(uploadButton));\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: className\n  }, uploadButton, renderUploadList());\n};\n\nvar Upload = /*#__PURE__*/React.forwardRef(InternalUpload);\nUpload.Dragger = Dragger;\nUpload.displayName = 'Upload';\nUpload.defaultProps = {\n  type: 'select',\n  multiple: false,\n  action: '',\n  data: {},\n  accept: '',\n  beforeUpload: T,\n  showUploadList: true,\n  listType: 'text',\n  className: '',\n  disabled: false,\n  supportServerRender: true\n};\nexport default Upload;","import Upload from './Upload';\nimport Dragger from './Dragger';\nUpload.Dragger = Dragger;\nexport default Upload;","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","export const INIT_COORDS = 'dnd-core/INIT_COORDS'\nexport const BEGIN_DRAG = 'dnd-core/BEGIN_DRAG'\nexport const PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE'\nexport const HOVER = 'dnd-core/HOVER'\nexport const DROP = 'dnd-core/DROP'\nexport const END_DRAG = 'dnd-core/END_DRAG'\n","import type { AnyAction } from 'redux'\n\nimport type { XYCoord } from '../../../interfaces.js'\nimport { INIT_COORDS } from '../types.js'\n\nexport function setClientOffset(\n\tclientOffset: XYCoord | null | undefined,\n\tsourceClientOffset?: XYCoord | null | undefined,\n): AnyAction {\n\treturn {\n\t\ttype: INIT_COORDS,\n\t\tpayload: {\n\t\t\tsourceClientOffset: sourceClientOffset || null,\n\t\t\tclientOffset: clientOffset || null,\n\t\t},\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tBeginDragOptions,\n\tBeginDragPayload,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tXYCoord,\n} from '../../interfaces.js'\nimport { isObject } from '../../utils/js_utils.js'\nimport { setClientOffset } from './local/setClientOffset.js'\nimport { BEGIN_DRAG, INIT_COORDS } from './types.js'\n\nconst ResetCoordinatesAction = {\n\ttype: INIT_COORDS,\n\tpayload: {\n\t\tclientOffset: null,\n\t\tsourceClientOffset: null,\n\t},\n}\n\nexport function createBeginDrag(manager: DragDropManager) {\n\treturn function beginDrag(\n\t\tsourceIds: Identifier[] = [],\n\t\toptions: BeginDragOptions = {\n\t\t\tpublishSource: true,\n\t\t},\n\t): Action<BeginDragPayload> | undefined {\n\t\tconst {\n\t\t\tpublishSource = true,\n\t\t\tclientOffset,\n\t\t\tgetSourceClientOffset,\n\t\t}: BeginDragOptions = options\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\n\t\t// Initialize the coordinates using the client offset\n\t\tmanager.dispatch(setClientOffset(clientOffset))\n\n\t\tverifyInvariants(sourceIds, monitor, registry)\n\n\t\t// Get the draggable source\n\t\tconst sourceId = getDraggableSource(sourceIds, monitor)\n\t\tif (sourceId == null) {\n\t\t\tmanager.dispatch(ResetCoordinatesAction)\n\t\t\treturn\n\t\t}\n\n\t\t// Get the source client offset\n\t\tlet sourceClientOffset: XYCoord | null = null\n\t\tif (clientOffset) {\n\t\t\tif (!getSourceClientOffset) {\n\t\t\t\tthrow new Error('getSourceClientOffset must be defined')\n\t\t\t}\n\t\t\tverifyGetSourceClientOffsetIsFunction(getSourceClientOffset)\n\t\t\tsourceClientOffset = getSourceClientOffset(sourceId)\n\t\t}\n\n\t\t// Initialize the full coordinates\n\t\tmanager.dispatch(setClientOffset(clientOffset, sourceClientOffset))\n\n\t\tconst source = registry.getSource(sourceId)\n\t\tconst item = source.beginDrag(monitor, sourceId)\n\t\t// If source.beginDrag returns null, this is an indicator to cancel the drag\n\t\tif (item == null) {\n\t\t\treturn undefined\n\t\t}\n\t\tverifyItemIsObject(item)\n\t\tregistry.pinSource(sourceId)\n\n\t\tconst itemType = registry.getSourceType(sourceId)\n\t\treturn {\n\t\t\ttype: BEGIN_DRAG,\n\t\t\tpayload: {\n\t\t\t\titemType,\n\t\t\t\titem,\n\t\t\t\tsourceId,\n\t\t\t\tclientOffset: clientOffset || null,\n\t\t\t\tsourceClientOffset: sourceClientOffset || null,\n\t\t\t\tisSourcePublic: !!publishSource,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction verifyInvariants(\n\tsourceIds: Identifier[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\tinvariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.')\n\tsourceIds.forEach(function (sourceId) {\n\t\tinvariant(\n\t\t\tregistry.getSource(sourceId),\n\t\t\t'Expected sourceIds to be registered.',\n\t\t)\n\t})\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset: any) {\n\tinvariant(\n\t\ttypeof getSourceClientOffset === 'function',\n\t\t'When clientOffset is provided, getSourceClientOffset must be a function.',\n\t)\n}\n\nfunction verifyItemIsObject(item: any) {\n\tinvariant(isObject(item), 'Item must be an object.')\n}\n\nfunction getDraggableSource(sourceIds: Identifier[], monitor: DragDropMonitor) {\n\tlet sourceId = null\n\tfor (let i = sourceIds.length - 1; i >= 0; i--) {\n\t\tif (monitor.canDragSource(sourceIds[i])) {\n\t\t\tsourceId = sourceIds[i]\n\t\t\tbreak\n\t\t}\n\t}\n\treturn sourceId\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tDragDropManager,\n\tDragDropMonitor,\n\tDropPayload,\n\tHandlerRegistry,\n\tIdentifier,\n} from '../../interfaces.js'\nimport { isObject } from '../../utils/js_utils.js'\nimport { DROP } from './types.js'\n\nexport function createDrop(manager: DragDropManager) {\n\treturn function drop(options = {}): void {\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tverifyInvariants(monitor)\n\t\tconst targetIds = getDroppableTargets(monitor)\n\n\t\t// Multiple actions are dispatched here, which is why this doesn't return an action\n\t\ttargetIds.forEach((targetId, index) => {\n\t\t\tconst dropResult = determineDropResult(targetId, index, registry, monitor)\n\t\t\tconst action: Action<DropPayload> = {\n\t\t\t\ttype: DROP,\n\t\t\t\tpayload: {\n\t\t\t\t\tdropResult: {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\t...dropResult,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t\tmanager.dispatch(action)\n\t\t})\n\t}\n}\n\nfunction verifyInvariants(monitor: DragDropMonitor) {\n\tinvariant(monitor.isDragging(), 'Cannot call drop while not dragging.')\n\tinvariant(\n\t\t!monitor.didDrop(),\n\t\t'Cannot call drop twice during one drag operation.',\n\t)\n}\n\nfunction determineDropResult(\n\ttargetId: Identifier,\n\tindex: number,\n\tregistry: HandlerRegistry,\n\tmonitor: DragDropMonitor,\n) {\n\tconst target = registry.getTarget(targetId)\n\tlet dropResult = target ? target.drop(monitor, targetId) : undefined\n\tverifyDropResultType(dropResult)\n\tif (typeof dropResult === 'undefined') {\n\t\tdropResult = index === 0 ? {} : monitor.getDropResult()\n\t}\n\treturn dropResult\n}\n\nfunction verifyDropResultType(dropResult: any) {\n\tinvariant(\n\t\ttypeof dropResult === 'undefined' || isObject(dropResult),\n\t\t'Drop result must either be an object or undefined.',\n\t)\n}\n\nfunction getDroppableTargets(monitor: DragDropMonitor) {\n\tconst targetIds = monitor\n\t\t.getTargetIds()\n\t\t.filter(monitor.canDropOnTarget, monitor)\n\ttargetIds.reverse()\n\treturn targetIds\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tSentinelAction,\n} from '../../interfaces.js'\nimport { END_DRAG } from './types.js'\n\nexport function createEndDrag(manager: DragDropManager) {\n\treturn function endDrag(): SentinelAction {\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tverifyIsDragging(monitor)\n\n\t\tconst sourceId = monitor.getSourceId()\n\t\tif (sourceId != null) {\n\t\t\tconst source = registry.getSource(sourceId, true)\n\t\t\tsource.endDrag(monitor, sourceId)\n\t\t\tregistry.unpinSource()\n\t\t}\n\t\treturn { type: END_DRAG }\n\t}\n}\n\nfunction verifyIsDragging(monitor: DragDropMonitor) {\n\tinvariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.')\n}\n","import type { Identifier } from '../interfaces.js'\n\nexport function matchesType(\n\ttargetType: Identifier | Identifier[] | null,\n\tdraggedItemType: Identifier | null,\n): boolean {\n\tif (draggedItemType === null) {\n\t\treturn targetType === null\n\t}\n\treturn Array.isArray(targetType)\n\t\t? (targetType as Identifier[]).some((t) => t === draggedItemType)\n\t\t: targetType === draggedItemType\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tHoverOptions,\n\tHoverPayload,\n\tIdentifier,\n} from '../../interfaces.js'\nimport { matchesType } from '../../utils/matchesType.js'\nimport { HOVER } from './types.js'\n\nexport function createHover(manager: DragDropManager) {\n\treturn function hover(\n\t\ttargetIdsArg: string[],\n\t\t{ clientOffset }: HoverOptions = {},\n\t): Action<HoverPayload> {\n\t\tverifyTargetIdsIsArray(targetIdsArg)\n\t\tconst targetIds = targetIdsArg.slice(0)\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tconst draggedItemType = monitor.getItemType()\n\t\tremoveNonMatchingTargetIds(targetIds, registry, draggedItemType)\n\t\tcheckInvariants(targetIds, monitor, registry)\n\t\thoverAllTargets(targetIds, monitor, registry)\n\n\t\treturn {\n\t\t\ttype: HOVER,\n\t\t\tpayload: {\n\t\t\t\ttargetIds,\n\t\t\t\tclientOffset: clientOffset || null,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg: string[]) {\n\tinvariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.')\n}\n\nfunction checkInvariants(\n\ttargetIds: string[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\tinvariant(monitor.isDragging(), 'Cannot call hover while not dragging.')\n\tinvariant(!monitor.didDrop(), 'Cannot call hover after drop.')\n\tfor (let i = 0; i < targetIds.length; i++) {\n\t\tconst targetId = targetIds[i] as string\n\t\tinvariant(\n\t\t\ttargetIds.lastIndexOf(targetId) === i,\n\t\t\t'Expected targetIds to be unique in the passed array.',\n\t\t)\n\n\t\tconst target = registry.getTarget(targetId)\n\t\tinvariant(target, 'Expected targetIds to be registered.')\n\t}\n}\n\nfunction removeNonMatchingTargetIds(\n\ttargetIds: string[],\n\tregistry: HandlerRegistry,\n\tdraggedItemType: Identifier | null,\n) {\n\t// Remove those targetIds that don't match the targetType.  This\n\t// fixes shallow isOver which would only be non-shallow because of\n\t// non-matching targets.\n\tfor (let i = targetIds.length - 1; i >= 0; i--) {\n\t\tconst targetId = targetIds[i] as string\n\t\tconst targetType = registry.getTargetType(targetId)\n\t\tif (!matchesType(targetType, draggedItemType)) {\n\t\t\ttargetIds.splice(i, 1)\n\t\t}\n\t}\n}\n\nfunction hoverAllTargets(\n\ttargetIds: string[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\t// Finally call hover on all matching targets.\n\ttargetIds.forEach(function (targetId) {\n\t\tconst target = registry.getTarget(targetId)\n\t\ttarget.hover(monitor, targetId)\n\t})\n}\n","import type { DragDropManager, SentinelAction } from '../../interfaces.js'\nimport { PUBLISH_DRAG_SOURCE } from './types.js'\n\nexport function createPublishDragSource(manager: DragDropManager) {\n\treturn function publishDragSource(): SentinelAction | undefined {\n\t\tconst monitor = manager.getMonitor()\n\t\tif (monitor.isDragging()) {\n\t\t\treturn { type: PUBLISH_DRAG_SOURCE }\n\t\t}\n\t\treturn\n\t}\n}\n","import type { Action, Store } from 'redux'\n\nimport { createDragDropActions } from '../actions/dragDrop/index.js'\nimport type {\n\tActionCreator,\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n} from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport type { DragDropMonitorImpl } from './DragDropMonitorImpl.js'\n\nexport class DragDropManagerImpl implements DragDropManager {\n\tprivate store: Store<State>\n\tprivate monitor: DragDropMonitor\n\tprivate backend: Backend | undefined\n\tprivate isSetUp = false\n\n\tpublic constructor(store: Store<State>, monitor: DragDropMonitor) {\n\t\tthis.store = store\n\t\tthis.monitor = monitor\n\t\tstore.subscribe(this.handleRefCountChange)\n\t}\n\n\tpublic receiveBackend(backend: Backend): void {\n\t\tthis.backend = backend\n\t}\n\n\tpublic getMonitor(): DragDropMonitor {\n\t\treturn this.monitor\n\t}\n\n\tpublic getBackend(): Backend {\n\t\treturn this.backend as Backend\n\t}\n\n\tpublic getRegistry(): HandlerRegistry {\n\t\treturn (this.monitor as DragDropMonitorImpl).registry\n\t}\n\n\tpublic getActions(): DragDropActions {\n\t\t/* eslint-disable-next-line @typescript-eslint/no-this-alias */\n\t\tconst manager = this\n\t\tconst { dispatch } = this.store\n\n\t\tfunction bindActionCreator(actionCreator: ActionCreator<any>) {\n\t\t\treturn (...args: any[]) => {\n\t\t\t\tconst action = actionCreator.apply(manager, args as any)\n\t\t\t\tif (typeof action !== 'undefined') {\n\t\t\t\t\tdispatch(action)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst actions = createDragDropActions(this)\n\n\t\treturn Object.keys(actions).reduce(\n\t\t\t(boundActions: DragDropActions, key: string) => {\n\t\t\t\tconst action: ActionCreator<any> = (actions as any)[\n\t\t\t\t\tkey\n\t\t\t\t] as ActionCreator<any>\n\t\t\t\t;(boundActions as any)[key] = bindActionCreator(action)\n\t\t\t\treturn boundActions\n\t\t\t},\n\t\t\t{} as DragDropActions,\n\t\t)\n\t}\n\n\tpublic dispatch(action: Action<any>): void {\n\t\tthis.store.dispatch(action)\n\t}\n\n\tprivate handleRefCountChange = (): void => {\n\t\tconst shouldSetUp = this.store.getState().refCount > 0\n\t\tif (this.backend) {\n\t\t\tif (shouldSetUp && !this.isSetUp) {\n\t\t\t\tthis.backend.setup()\n\t\t\t\tthis.isSetUp = true\n\t\t\t} else if (!shouldSetUp && this.isSetUp) {\n\t\t\t\tthis.backend.teardown()\n\t\t\t\tthis.isSetUp = false\n\t\t\t}\n\t\t}\n\t}\n}\n","import type { DragDropActions, DragDropManager } from '../../interfaces.js'\nimport { createBeginDrag } from './beginDrag.js'\nimport { createDrop } from './drop.js'\nimport { createEndDrag } from './endDrag.js'\nimport { createHover } from './hover.js'\nimport { createPublishDragSource } from './publishDragSource.js'\n\nexport * from './types.js'\n\nexport function createDragDropActions(\n\tmanager: DragDropManager,\n): DragDropActions {\n\treturn {\n\t\tbeginDrag: createBeginDrag(manager),\n\t\tpublishDragSource: createPublishDragSource(manager),\n\t\thover: createHover(manager),\n\t\tdrop: createDrop(manager),\n\t\tendDrag: createEndDrag(manager),\n\t}\n}\n","import type { XYCoord } from '../interfaces.js'\nimport type { State } from '../reducers/dragOffset.js'\n\n/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a: XYCoord, b: XYCoord): XYCoord {\n\treturn {\n\t\tx: a.x + b.x,\n\t\ty: a.y + b.y,\n\t}\n}\n\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function subtract(a: XYCoord, b: XYCoord): XYCoord {\n\treturn {\n\t\tx: a.x - b.x,\n\t\ty: a.y - b.y,\n\t}\n}\n\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\nexport function getSourceClientOffset(state: State): XYCoord | null {\n\tconst { clientOffset, initialClientOffset, initialSourceClientOffset } = state\n\tif (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n\t\treturn null\n\t}\n\treturn subtract(\n\t\tadd(clientOffset, initialSourceClientOffset),\n\t\tinitialClientOffset,\n\t)\n}\n\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\nexport function getDifferenceFromInitialOffset(state: State): XYCoord | null {\n\tconst { clientOffset, initialClientOffset } = state\n\tif (!clientOffset || !initialClientOffset) {\n\t\treturn null\n\t}\n\treturn subtract(clientOffset, initialClientOffset)\n}\n","import { intersection } from './js_utils.js'\n\nexport const NONE: string[] = []\nexport const ALL: string[] = []\n// Add these flags for debug\n;(NONE as any).__IS_NONE__ = true\n;(ALL as any).__IS_ALL__ = true\n\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\nexport function areDirty(\n\tdirtyIds: string[],\n\thandlerIds: string[] | undefined,\n): boolean {\n\tif (dirtyIds === NONE) {\n\t\treturn false\n\t}\n\n\tif (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n\t\treturn true\n\t}\n\n\tconst commonIds = intersection(handlerIds, dirtyIds)\n\treturn commonIds.length > 0\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Store } from 'redux'\n\nimport type {\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport {\n\tgetDifferenceFromInitialOffset,\n\tgetSourceClientOffset,\n} from '../utils/coords.js'\nimport { areDirty } from '../utils/dirtiness.js'\nimport { matchesType } from '../utils/matchesType.js'\n\nexport class DragDropMonitorImpl implements DragDropMonitor {\n\tprivate store: Store<State>\n\tpublic readonly registry: HandlerRegistry\n\n\tpublic constructor(store: Store<State>, registry: HandlerRegistry) {\n\t\tthis.store = store\n\t\tthis.registry = registry\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions: { handlerIds?: string[] } = {},\n\t): Unsubscribe {\n\t\tconst { handlerIds } = options\n\t\tinvariant(typeof listener === 'function', 'listener must be a function.')\n\t\tinvariant(\n\t\t\ttypeof handlerIds === 'undefined' || Array.isArray(handlerIds),\n\t\t\t'handlerIds, when specified, must be an array of strings.',\n\t\t)\n\n\t\tlet prevStateId = this.store.getState().stateId\n\t\tconst handleChange = () => {\n\t\t\tconst state = this.store.getState()\n\t\t\tconst currentStateId = state.stateId\n\t\t\ttry {\n\t\t\t\tconst canSkipListener =\n\t\t\t\t\tcurrentStateId === prevStateId ||\n\t\t\t\t\t(currentStateId === prevStateId + 1 &&\n\t\t\t\t\t\t!areDirty(state.dirtyHandlerIds, handlerIds))\n\n\t\t\t\tif (!canSkipListener) {\n\t\t\t\t\tlistener()\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tprevStateId = currentStateId\n\t\t\t}\n\t\t}\n\n\t\treturn this.store.subscribe(handleChange)\n\t}\n\n\tpublic subscribeToOffsetChange(listener: Listener): Unsubscribe {\n\t\tinvariant(typeof listener === 'function', 'listener must be a function.')\n\n\t\tlet previousState = this.store.getState().dragOffset\n\t\tconst handleChange = () => {\n\t\t\tconst nextState = this.store.getState().dragOffset\n\t\t\tif (nextState === previousState) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tpreviousState = nextState\n\t\t\tlistener()\n\t\t}\n\n\t\treturn this.store.subscribe(handleChange)\n\t}\n\n\tpublic canDragSource(sourceId: string | undefined): boolean {\n\t\tif (!sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tconst source = this.registry.getSource(sourceId)\n\t\tinvariant(source, `Expected to find a valid source. sourceId=${sourceId}`)\n\n\t\tif (this.isDragging()) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn source.canDrag(this, sourceId)\n\t}\n\n\tpublic canDropOnTarget(targetId: string | undefined): boolean {\n\t\t// undefined on initial render\n\t\tif (!targetId) {\n\t\t\treturn false\n\t\t}\n\t\tconst target = this.registry.getTarget(targetId)\n\t\tinvariant(target, `Expected to find a valid target. targetId=${targetId}`)\n\n\t\tif (!this.isDragging() || this.didDrop()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetType = this.registry.getTargetType(targetId)\n\t\tconst draggedItemType = this.getItemType()\n\t\treturn (\n\t\t\tmatchesType(targetType, draggedItemType) && target.canDrop(this, targetId)\n\t\t)\n\t}\n\n\tpublic isDragging(): boolean {\n\t\treturn Boolean(this.getItemType())\n\t}\n\n\tpublic isDraggingSource(sourceId: string | undefined): boolean {\n\t\t// undefined on initial render\n\t\tif (!sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tconst source = this.registry.getSource(sourceId, true)\n\t\tinvariant(source, `Expected to find a valid source. sourceId=${sourceId}`)\n\n\t\tif (!this.isDragging() || !this.isSourcePublic()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst sourceType = this.registry.getSourceType(sourceId)\n\t\tconst draggedItemType = this.getItemType()\n\t\tif (sourceType !== draggedItemType) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn source.isDragging(this, sourceId)\n\t}\n\n\tpublic isOverTarget(\n\t\ttargetId: string | undefined,\n\t\toptions = { shallow: false },\n\t): boolean {\n\t\t// undefined on initial render\n\t\tif (!targetId) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst { shallow } = options\n\t\tif (!this.isDragging()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetType = this.registry.getTargetType(targetId)\n\t\tconst draggedItemType = this.getItemType()\n\t\tif (draggedItemType && !matchesType(targetType, draggedItemType)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetIds = this.getTargetIds()\n\t\tif (!targetIds.length) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst index = targetIds.indexOf(targetId)\n\t\tif (shallow) {\n\t\t\treturn index === targetIds.length - 1\n\t\t} else {\n\t\t\treturn index > -1\n\t\t}\n\t}\n\n\tpublic getItemType(): Identifier {\n\t\treturn this.store.getState().dragOperation.itemType as Identifier\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.store.getState().dragOperation.item\n\t}\n\n\tpublic getSourceId(): string | null {\n\t\treturn this.store.getState().dragOperation.sourceId\n\t}\n\n\tpublic getTargetIds(): string[] {\n\t\treturn this.store.getState().dragOperation.targetIds\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.store.getState().dragOperation.dropResult\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.store.getState().dragOperation.didDrop\n\t}\n\n\tpublic isSourcePublic(): boolean {\n\t\treturn Boolean(this.store.getState().dragOperation.isSourcePublic)\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.initialClientOffset\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.initialSourceClientOffset\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.clientOffset\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn getSourceClientOffset(this.store.getState().dragOffset)\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn getDifferenceFromInitialOffset(this.store.getState().dragOffset)\n\t}\n}\n","// We wrap tasks with recyclable task objects.  A task object implements\n\nimport type { Task, TaskFn } from 'types'\n\n// `call`, just like a function.\nexport class RawTask implements Task {\n\tpublic task: TaskFn | null = null\n\n\tpublic constructor(\n\t\tprivate onError: (err: any) => void,\n\t\tprivate release: (t: RawTask) => void,\n\t) {}\n\n\tpublic call() {\n\t\ttry {\n\t\t\tthis.task && this.task()\n\t\t} catch (error) {\n\t\t\tthis.onError(error)\n\t\t} finally {\n\t\t\tthis.task = null\n\t\t\tthis.release(this)\n\t\t}\n\t}\n}\n","import { AsapQueue } from './AsapQueue.js'\nimport { TaskFactory } from './TaskFactory.js'\nimport type { TaskFn } from './types.js'\n\nconst asapQueue = new AsapQueue()\nconst taskFactory = new TaskFactory(asapQueue.registerPendingError)\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nexport function asap(task: TaskFn) {\n\tasapQueue.enqueueTask(taskFactory.create(task))\n}\n","/* eslint-disable no-restricted-globals, @typescript-eslint/ban-ts-comment, @typescript-eslint/no-unused-vars, @typescript-eslint/no-non-null-assertion */\nimport { makeRequestCall, makeRequestCallFromTimer } from './makeRequestCall.js'\nimport type { Task } from './types.js'\n\nexport class AsapQueue {\n\tprivate queue: Task[] = []\n\t// We queue errors to ensure they are thrown in right order (FIFO).\n\t// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\tprivate pendingErrors: any[] = []\n\t// Once a flush has been requested, no further calls to `requestFlush` are\n\t// necessary until the next `flush` completes.\n\t// @ts-ignore\n\tprivate flushing = false\n\t// `requestFlush` is an implementation-specific method that attempts to kick\n\t// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n\t// the event queue before yielding to the browser's own event loop.\n\tprivate requestFlush: () => void\n\n\tprivate requestErrorThrow: () => void\n\t// The position of the next task to execute in the task queue. This is\n\t// preserved between calls to `flush` so that it can be resumed if\n\t// a task throws an exception.\n\tprivate index = 0\n\t// If a task schedules additional tasks recursively, the task queue can grow\n\t// unbounded. To prevent memory exhaustion, the task queue will periodically\n\t// truncate already-completed tasks.\n\tprivate capacity = 1024\n\n\tpublic constructor() {\n\t\t// `requestFlush` requests that the high priority event queue be flushed as\n\t\t// soon as possible.\n\t\t// This is useful to prevent an error thrown in a task from stalling the event\n\t\t// queue if the exception handled by Node.js’s\n\t\t// `process.on(\"uncaughtException\")` or by a domain.\n\n\t\t// `requestFlush` is implemented using a strategy based on data collected from\n\t\t// every available SauceLabs Selenium web driver worker at time of writing.\n\t\t// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\t\tthis.requestFlush = makeRequestCall(this.flush)\n\t\tthis.requestErrorThrow = makeRequestCallFromTimer(() => {\n\t\t\t// Throw first error\n\t\t\tif (this.pendingErrors.length) {\n\t\t\t\tthrow this.pendingErrors.shift()\n\t\t\t}\n\t\t})\n\t}\n\n\t// Use the fastest means possible to execute a task in its own turn, with\n\t// priority over other events including IO, animation, reflow, and redraw\n\t// events in browsers.\n\t//\n\t// An exception thrown by a task will permanently interrupt the processing of\n\t// subsequent tasks. The higher level `asap` function ensures that if an\n\t// exception is thrown by a task, that the task queue will continue flushing as\n\t// soon as possible, but if you use `rawAsap` directly, you are responsible to\n\t// either ensure that no exceptions are thrown from your task, or to manually\n\t// call `rawAsap.requestFlush` if an exception is thrown.\n\tpublic enqueueTask(task: Task): void {\n\t\tconst { queue: q, requestFlush } = this\n\t\tif (!q.length) {\n\t\t\trequestFlush()\n\t\t\tthis.flushing = true\n\t\t}\n\t\t// Equivalent to push, but avoids a function call.\n\t\tq[q.length] = task\n\t}\n\n\t// The flush function processes all tasks that have been scheduled with\n\t// `rawAsap` unless and until one of those tasks throws an exception.\n\t// If a task throws an exception, `flush` ensures that its state will remain\n\t// consistent and will resume where it left off when called again.\n\t// However, `flush` does not make any arrangements to be called again if an\n\t// exception is thrown.\n\tprivate flush = () => {\n\t\tconst { queue: q } = this\n\t\twhile (this.index < q.length) {\n\t\t\tconst currentIndex = this.index\n\t\t\t// Advance the index before calling the task. This ensures that we will\n\t\t\t// begin flushing on the next task the task throws an error.\n\t\t\tthis.index++\n\t\t\tq[currentIndex]!.call()\n\t\t\t// Prevent leaking memory for long chains of recursive calls to `asap`.\n\t\t\t// If we call `asap` within tasks scheduled by `asap`, the queue will\n\t\t\t// grow, but to avoid an O(n) walk for every task we execute, we don't\n\t\t\t// shift tasks off the queue after they have been executed.\n\t\t\t// Instead, we periodically shift 1024 tasks off the queue.\n\t\t\tif (this.index > this.capacity) {\n\t\t\t\t// Manually shift all values starting at the index back to the\n\t\t\t\t// beginning of the queue.\n\t\t\t\tfor (\n\t\t\t\t\tlet scan = 0, newLength = q.length - this.index;\n\t\t\t\t\tscan < newLength;\n\t\t\t\t\tscan++\n\t\t\t\t) {\n\t\t\t\t\tq[scan] = q[scan + this.index]!\n\t\t\t\t}\n\t\t\t\tq.length -= this.index\n\t\t\t\tthis.index = 0\n\t\t\t}\n\t\t}\n\t\tq.length = 0\n\t\tthis.index = 0\n\t\tthis.flushing = false\n\t}\n\n\t// In a web browser, exceptions are not fatal. However, to avoid\n\t// slowing down the queue of pending tasks, we rethrow the error in a\n\t// lower priority turn.\n\tpublic registerPendingError = (err: any) => {\n\t\tthis.pendingErrors.push(err)\n\t\tthis.requestErrorThrow()\n\t}\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// // its existence.\n// rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","import { RawTask } from './RawTask.js'\nimport type { Task } from './types.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n","import type { Action, SourceIdPayload, TargetIdPayload } from '../interfaces.js'\n\nexport const ADD_SOURCE = 'dnd-core/ADD_SOURCE'\nexport const ADD_TARGET = 'dnd-core/ADD_TARGET'\nexport const REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE'\nexport const REMOVE_TARGET = 'dnd-core/REMOVE_TARGET'\n\nexport function addSource(sourceId: string): Action<SourceIdPayload> {\n\treturn {\n\t\ttype: ADD_SOURCE,\n\t\tpayload: {\n\t\t\tsourceId,\n\t\t},\n\t}\n}\n\nexport function addTarget(targetId: string): Action<TargetIdPayload> {\n\treturn {\n\t\ttype: ADD_TARGET,\n\t\tpayload: {\n\t\t\ttargetId,\n\t\t},\n\t}\n}\n\nexport function removeSource(sourceId: string): Action<SourceIdPayload> {\n\treturn {\n\t\ttype: REMOVE_SOURCE,\n\t\tpayload: {\n\t\t\tsourceId,\n\t\t},\n\t}\n}\n\nexport function removeTarget(targetId: string): Action<TargetIdPayload> {\n\treturn {\n\t\ttype: REMOVE_TARGET,\n\t\tpayload: {\n\t\t\ttargetId,\n\t\t},\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type { DragSource, DropTarget, Identifier } from './interfaces.js'\n\nexport function validateSourceContract(source: DragSource): void {\n\tinvariant(\n\t\ttypeof source.canDrag === 'function',\n\t\t'Expected canDrag to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof source.beginDrag === 'function',\n\t\t'Expected beginDrag to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof source.endDrag === 'function',\n\t\t'Expected endDrag to be a function.',\n\t)\n}\n\nexport function validateTargetContract(target: DropTarget): void {\n\tinvariant(\n\t\ttypeof target.canDrop === 'function',\n\t\t'Expected canDrop to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof target.hover === 'function',\n\t\t'Expected hover to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof target.drop === 'function',\n\t\t'Expected beginDrag to be a function.',\n\t)\n}\n\nexport function validateType(\n\ttype: Identifier | Identifier[],\n\tallowArray?: boolean,\n): void {\n\tif (allowArray && Array.isArray(type)) {\n\t\ttype.forEach((t) => validateType(t, false))\n\t\treturn\n\t}\n\n\tinvariant(\n\t\ttypeof type === 'string' || typeof type === 'symbol',\n\t\tallowArray\n\t\t\t? 'Type can only be a string, a symbol, or an array of either.'\n\t\t\t: 'Type can only be a string or a symbol.',\n\t)\n}\n","export type Identifier = string | symbol\nexport type SourceType = Identifier\nexport type TargetType = Identifier | Identifier[]\nexport type Unsubscribe = () => void\nexport type Listener = () => void\n\nexport interface XYCoord {\n\tx: number\n\ty: number\n}\n\nexport enum HandlerRole {\n\tSOURCE = 'SOURCE',\n\tTARGET = 'TARGET',\n}\n\nexport interface Backend {\n\tsetup(): void\n\tteardown(): void\n\tconnectDragSource(sourceId: any, node?: any, options?: any): Unsubscribe\n\tconnectDragPreview(sourceId: any, node?: any, options?: any): Unsubscribe\n\tconnectDropTarget(targetId: any, node?: any, options?: any): Unsubscribe\n\tprofile(): Record<string, number>\n}\n\nexport interface DragDropMonitor {\n\tsubscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: {\n\t\t\thandlerIds?: Identifier[]\n\t\t},\n\t): Unsubscribe\n\tsubscribeToOffsetChange(listener: Listener): Unsubscribe\n\tcanDragSource(sourceId: Identifier | undefined): boolean\n\tcanDropOnTarget(targetId: Identifier | undefined): boolean\n\n\t/**\n\t * Returns true if a drag operation is in progress, and either the owner initiated the drag, or its isDragging()\n\t * is defined and returns true.\n\t */\n\tisDragging(): boolean\n\tisDraggingSource(sourceId: Identifier | undefined): boolean\n\tisOverTarget(\n\t\ttargetId: Identifier | undefined,\n\t\toptions?: {\n\t\t\tshallow?: boolean\n\t\t},\n\t): boolean\n\n\t/**\n\t * Returns a string or a symbol identifying the type of the current dragged item. Returns null if no item is being dragged.\n\t */\n\tgetItemType(): Identifier | null\n\n\t/**\n\t * Returns a plain object representing the currently dragged item. Every drag source must specify it by returning an object\n\t * from its beginDrag() method. Returns null if no item is being dragged.\n\t */\n\tgetItem(): any\n\tgetSourceId(): Identifier | null\n\tgetTargetIds(): Identifier[]\n\t/**\n\t * Returns a plain object representing the last recorded drop result. The drop targets may optionally specify it by returning an\n\t * object from their drop() methods. When a chain of drop() is dispatched for the nested targets, bottom up, any parent that\n\t * explicitly returns its own result from drop() overrides the child drop result previously set by the child. Returns null if\n\t * called outside endDrag().\n\t */\n\tgetDropResult(): any\n\t/**\n\t * Returns true if some drop target has handled the drop event, false otherwise. Even if a target did not return a drop result,\n\t * didDrop() returns true. Use it inside endDrag() to test whether any drop target has handled the drop. Returns false if called\n\t * outside endDrag().\n\t */\n\tdidDrop(): boolean\n\tisSourcePublic(): boolean | null\n\t/**\n\t * Returns the { x, y } client offset of the pointer at the time when the current drag operation has started.\n\t * Returns null if no item is being dragged.\n\t */\n\tgetInitialClientOffset(): XYCoord | null\n\t/**\n\t * Returns the { x, y } client offset of the drag source component's root DOM node at the time when the current drag\n\t * operation has started. Returns null if no item is being dragged.\n\t */\n\tgetInitialSourceClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the last recorded { x, y } client offset of the pointer while a drag operation is in progress.\n\t * Returns null if no item is being dragged.\n\t */\n\tgetClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the projected { x, y } client offset of the drag source component's root DOM node, based on its position at the time\n\t * when the current drag operation has started, and the movement difference. Returns null if no item is being dragged.\n\t */\n\tgetSourceClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the { x, y } difference between the last recorded client offset of the pointer and the client offset when the current\n\t * drag operation has started. Returns null if no item is being dragged.\n\t */\n\tgetDifferenceFromInitialOffset(): XYCoord | null\n}\n\nexport interface HandlerRegistry {\n\taddSource(type: SourceType, source: DragSource): Identifier\n\taddTarget(type: TargetType, target: DropTarget): Identifier\n\tcontainsHandler(handler: DragSource | DropTarget): boolean\n\tgetSource(sourceId: Identifier, includePinned?: boolean): DragSource\n\tgetSourceType(sourceId: Identifier): SourceType\n\tgetTargetType(targetId: Identifier): TargetType\n\tgetTarget(targetId: Identifier): DropTarget\n\tisSourceId(handlerId: Identifier): boolean\n\tisTargetId(handlerId: Identifier): boolean\n\tremoveSource(sourceId: Identifier): void\n\tremoveTarget(targetId: Identifier): void\n\tpinSource(sourceId: Identifier): void\n\tunpinSource(): void\n}\n\nexport interface Action<Payload> {\n\ttype: Identifier\n\tpayload: Payload\n}\nexport interface SentinelAction {\n\ttype: Identifier\n}\n\nexport type ActionCreator<Payload> = (args: any[]) => Action<Payload>\n\nexport interface BeginDragOptions {\n\tpublishSource?: boolean\n\tclientOffset?: XYCoord\n\tgetSourceClientOffset?: (sourceId: Identifier | undefined) => XYCoord\n}\n\nexport interface InitCoordsPayload {\n\tclientOffset: XYCoord | null\n\tsourceClientOffset: XYCoord | null\n}\n\nexport interface BeginDragPayload {\n\titemType: Identifier\n\titem: any\n\tsourceId: Identifier\n\tclientOffset: XYCoord | null\n\tsourceClientOffset: XYCoord | null\n\tisSourcePublic: boolean\n}\n\nexport interface HoverPayload {\n\ttargetIds: Identifier[]\n\tclientOffset: XYCoord | null\n}\n\nexport interface HoverOptions {\n\tclientOffset?: XYCoord\n}\n\nexport interface DropPayload {\n\tdropResult: any\n}\n\nexport interface TargetIdPayload {\n\ttargetId: Identifier\n}\n\nexport interface SourceIdPayload {\n\tsourceId: Identifier\n}\n\nexport interface DragDropActions {\n\tbeginDrag(\n\t\tsourceIds?: Identifier[],\n\t\toptions?: any,\n\t): Action<BeginDragPayload> | undefined\n\tpublishDragSource(): SentinelAction | undefined\n\thover(targetIds: Identifier[], options?: any): Action<HoverPayload>\n\tdrop(options?: any): void\n\tendDrag(): SentinelAction\n}\n\nexport interface DragDropManager {\n\tgetMonitor(): DragDropMonitor\n\tgetBackend(): Backend\n\tgetRegistry(): HandlerRegistry\n\tgetActions(): DragDropActions\n\tdispatch(action: any): void\n}\n\nexport type BackendFactory = (\n\tmanager: DragDropManager,\n\tglobalContext?: any,\n\tconfiguration?: any,\n) => Backend\n\nexport interface DragSource {\n\tbeginDrag(monitor: DragDropMonitor, targetId: Identifier): void\n\tendDrag(monitor: DragDropMonitor, targetId: Identifier): void\n\tcanDrag(monitor: DragDropMonitor, targetId: Identifier): boolean\n\tisDragging(monitor: DragDropMonitor, targetId: Identifier): boolean\n}\n\nexport interface DropTarget {\n\tcanDrop(monitor: DragDropMonitor, targetId: Identifier): boolean\n\thover(monitor: DragDropMonitor, targetId: Identifier): void\n\tdrop(monitor: DragDropMonitor, targetId: Identifier): any\n}\n","let nextUniqueId = 0\n\nexport function getNextUniqueId(): number {\n\treturn nextUniqueId++\n}\n","import { asap } from '@react-dnd/asap'\nimport { invariant } from '@react-dnd/invariant'\nimport type { Store } from 'redux'\n\nimport {\n\taddSource,\n\taddTarget,\n\tremoveSource,\n\tremoveTarget,\n} from '../actions/registry.js'\nimport {\n\tvalidateSourceContract,\n\tvalidateTargetContract,\n\tvalidateType,\n} from '../contracts.js'\nimport type {\n\tDragSource,\n\tDropTarget,\n\tHandlerRegistry,\n\tIdentifier,\n\tSourceType,\n\tTargetType,\n} from '../interfaces.js'\nimport { HandlerRole } from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport { getNextUniqueId } from '../utils/getNextUniqueId.js'\n\nfunction getNextHandlerId(role: HandlerRole): string {\n\tconst id = getNextUniqueId().toString()\n\tswitch (role) {\n\t\tcase HandlerRole.SOURCE:\n\t\t\treturn `S${id}`\n\t\tcase HandlerRole.TARGET:\n\t\t\treturn `T${id}`\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown Handler Role: ${role}`)\n\t}\n}\n\nfunction parseRoleFromHandlerId(handlerId: string) {\n\tswitch (handlerId[0]) {\n\t\tcase 'S':\n\t\t\treturn HandlerRole.SOURCE\n\t\tcase 'T':\n\t\t\treturn HandlerRole.TARGET\n\t\tdefault:\n\t\t\tthrow new Error(`Cannot parse handler ID: ${handlerId}`)\n\t}\n}\n\nfunction mapContainsValue<T>(map: Map<string, T>, searchValue: T) {\n\tconst entries = map.entries()\n\tlet isDone = false\n\tdo {\n\t\tconst {\n\t\t\tdone,\n\t\t\tvalue: [, value],\n\t\t} = entries.next()\n\t\tif (value === searchValue) {\n\t\t\treturn true\n\t\t}\n\t\tisDone = !!done\n\t} while (!isDone)\n\treturn false\n}\n\nexport class HandlerRegistryImpl implements HandlerRegistry {\n\tprivate types: Map<string, SourceType | TargetType> = new Map()\n\tprivate dragSources: Map<string, DragSource> = new Map()\n\tprivate dropTargets: Map<string, DropTarget> = new Map()\n\tprivate pinnedSourceId: string | null = null\n\tprivate pinnedSource: any = null\n\tprivate store: Store<State>\n\n\tpublic constructor(store: Store<State>) {\n\t\tthis.store = store\n\t}\n\n\tpublic addSource(type: SourceType, source: DragSource): string {\n\t\tvalidateType(type)\n\t\tvalidateSourceContract(source)\n\n\t\tconst sourceId = this.addHandler(HandlerRole.SOURCE, type, source)\n\t\tthis.store.dispatch(addSource(sourceId))\n\t\treturn sourceId\n\t}\n\n\tpublic addTarget(type: TargetType, target: DropTarget): string {\n\t\tvalidateType(type, true)\n\t\tvalidateTargetContract(target)\n\n\t\tconst targetId = this.addHandler(HandlerRole.TARGET, type, target)\n\t\tthis.store.dispatch(addTarget(targetId))\n\t\treturn targetId\n\t}\n\n\tpublic containsHandler(handler: DragSource | DropTarget): boolean {\n\t\treturn (\n\t\t\tmapContainsValue(this.dragSources, handler) ||\n\t\t\tmapContainsValue(this.dropTargets, handler)\n\t\t)\n\t}\n\n\tpublic getSource(sourceId: string, includePinned = false): DragSource {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\tconst isPinned = includePinned && sourceId === this.pinnedSourceId\n\t\tconst source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId)\n\t\treturn source\n\t}\n\n\tpublic getTarget(targetId: string): DropTarget {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.dropTargets.get(targetId) as DropTarget\n\t}\n\n\tpublic getSourceType(sourceId: string): Identifier {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\treturn this.types.get(sourceId) as Identifier\n\t}\n\n\tpublic getTargetType(targetId: string): Identifier | Identifier[] {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.types.get(targetId) as Identifier | Identifier[]\n\t}\n\n\tpublic isSourceId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.SOURCE\n\t}\n\n\tpublic isTargetId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.TARGET\n\t}\n\n\tpublic removeSource(sourceId: string): void {\n\t\tinvariant(this.getSource(sourceId), 'Expected an existing source.')\n\t\tthis.store.dispatch(removeSource(sourceId))\n\t\tasap(() => {\n\t\t\tthis.dragSources.delete(sourceId)\n\t\t\tthis.types.delete(sourceId)\n\t\t})\n\t}\n\n\tpublic removeTarget(targetId: string): void {\n\t\tinvariant(this.getTarget(targetId), 'Expected an existing target.')\n\t\tthis.store.dispatch(removeTarget(targetId))\n\t\tthis.dropTargets.delete(targetId)\n\t\tthis.types.delete(targetId)\n\t}\n\n\tpublic pinSource(sourceId: string): void {\n\t\tconst source = this.getSource(sourceId)\n\t\tinvariant(source, 'Expected an existing source.')\n\n\t\tthis.pinnedSourceId = sourceId\n\t\tthis.pinnedSource = source\n\t}\n\n\tpublic unpinSource(): void {\n\t\tinvariant(this.pinnedSource, 'No source is pinned at the time.')\n\n\t\tthis.pinnedSourceId = null\n\t\tthis.pinnedSource = null\n\t}\n\n\tprivate addHandler(\n\t\trole: HandlerRole,\n\t\ttype: SourceType | TargetType,\n\t\thandler: DragSource | DropTarget,\n\t): string {\n\t\tconst id = getNextHandlerId(role)\n\t\tthis.types.set(id, type)\n\t\tif (role === HandlerRole.SOURCE) {\n\t\t\tthis.dragSources.set(id, handler as DragSource)\n\t\t} else if (role === HandlerRole.TARGET) {\n\t\t\tthis.dropTargets.set(id, handler as DropTarget)\n\t\t}\n\t\treturn id\n\t}\n}\n","import type { XYCoord } from '../interfaces.js'\n\nexport type EqualityCheck<T> = (a: T, b: T) => boolean\nexport const strictEquality = <T>(a: T, b: T): boolean => a === b\n\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\nexport function areCoordsEqual(\n\toffsetA: XYCoord | null | undefined,\n\toffsetB: XYCoord | null | undefined,\n): boolean {\n\tif (!offsetA && !offsetB) {\n\t\treturn true\n\t} else if (!offsetA || !offsetB) {\n\t\treturn false\n\t} else {\n\t\treturn offsetA.x === offsetB.x && offsetA.y === offsetB.y\n\t}\n}\n\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\nexport function areArraysEqual<T>(\n\ta: T[],\n\tb: T[],\n\tisEqual: EqualityCheck<T> = strictEquality,\n): boolean {\n\tif (a.length !== b.length) {\n\t\treturn false\n\t}\n\tfor (let i = 0; i < a.length; ++i) {\n\t\tif (!isEqual(a[i] as T, b[i] as T)) {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn true\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\nimport { ALL, NONE } from '../utils/dirtiness.js'\nimport { areArraysEqual } from '../utils/equality.js'\nimport { xor } from '../utils/js_utils.js'\n\nexport type State = string[]\n\nexport interface DirtyHandlerIdPayload {\n\ttargetIds: string[]\n\tprevTargetIds: string[]\n}\n\nexport function reduce(\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t_state: State = NONE,\n\taction: Action<DirtyHandlerIdPayload>,\n): State {\n\tswitch (action.type) {\n\t\tcase HOVER:\n\t\t\tbreak\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\tcase REMOVE_TARGET:\n\t\tcase REMOVE_SOURCE:\n\t\t\treturn NONE\n\t\tcase BEGIN_DRAG:\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\tdefault:\n\t\t\treturn ALL\n\t}\n\n\tconst { targetIds = [], prevTargetIds = [] } = action.payload\n\tconst result = xor(targetIds, prevTargetIds)\n\tconst didChange =\n\t\tresult.length > 0 || !areArraysEqual(targetIds, prevTargetIds)\n\n\tif (!didChange) {\n\t\treturn NONE\n\t}\n\n\t// Check the target ids at the innermost position. If they are valid, add them\n\t// to the result\n\tconst prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1]\n\tconst innermostTargetId = targetIds[targetIds.length - 1]\n\tif (prevInnermostTargetId !== innermostTargetId) {\n\t\tif (prevInnermostTargetId) {\n\t\t\tresult.push(prevInnermostTargetId)\n\t\t}\n\t\tif (innermostTargetId) {\n\t\t\tresult.push(innermostTargetId)\n\t\t}\n\t}\n\n\treturn result\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tINIT_COORDS,\n} from '../actions/dragDrop/index.js'\nimport type { Action, XYCoord } from '../interfaces.js'\nimport { areCoordsEqual } from '../utils/equality.js'\n\nexport interface State {\n\tinitialSourceClientOffset: XYCoord | null\n\tinitialClientOffset: XYCoord | null\n\tclientOffset: XYCoord | null\n}\n\nconst initialState: State = {\n\tinitialSourceClientOffset: null,\n\tinitialClientOffset: null,\n\tclientOffset: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\tsourceClientOffset: XYCoord\n\t\tclientOffset: XYCoord\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase INIT_COORDS:\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\tinitialSourceClientOffset: payload.sourceClientOffset,\n\t\t\t\tinitialClientOffset: payload.clientOffset,\n\t\t\t\tclientOffset: payload.clientOffset,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\tif (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tclientOffset: payload.clientOffset,\n\t\t\t}\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\t\treturn initialState\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Action, Identifier } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\n\nexport type State = number\n\nexport function reduce(state: State = 0, action: Action<any>): State {\n\tswitch (action.type) {\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\t\treturn state + 1\n\t\tcase REMOVE_SOURCE:\n\t\tcase REMOVE_TARGET:\n\t\t\treturn state - 1\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","export type State = number\n\nexport function reduce(state: State = 0): State {\n\treturn state + 1\n}\n","import type { Action } from '../interfaces.js'\nimport { get } from '../utils/js_utils.js'\nimport type { State as DirtyHandlerIdsState } from './dirtyHandlerIds.js'\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds.js'\nimport type { State as DragOffsetState } from './dragOffset.js'\nimport { reduce as dragOffset } from './dragOffset.js'\nimport type { State as DragOperationState } from './dragOperation.js'\nimport { reduce as dragOperation } from './dragOperation.js'\nimport type { State as RefCountState } from './refCount.js'\nimport { reduce as refCount } from './refCount.js'\nimport type { State as StateIdState } from './stateId.js'\nimport { reduce as stateId } from './stateId.js'\n\nexport interface State {\n\tdirtyHandlerIds: DirtyHandlerIdsState\n\tdragOffset: DragOffsetState\n\trefCount: RefCountState\n\tdragOperation: DragOperationState\n\tstateId: StateIdState\n}\n\nexport function reduce(state: State = {} as State, action: Action<any>): State {\n\treturn {\n\t\tdirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n\t\t\ttype: action.type,\n\t\t\tpayload: {\n\t\t\t\t...action.payload,\n\t\t\t\tprevTargetIds: get<string[]>(state, 'dragOperation.targetIds', []),\n\t\t\t},\n\t\t}),\n\t\tdragOffset: dragOffset(state.dragOffset, action),\n\t\trefCount: refCount(state.refCount, action),\n\t\tdragOperation: dragOperation(state.dragOperation, action),\n\t\tstateId: stateId(state.stateId),\n\t}\n}\n","import type { Store } from 'redux'\nimport { createStore } from 'redux'\n\nimport { DragDropManagerImpl } from './classes/DragDropManagerImpl.js'\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl.js'\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl.js'\nimport type { BackendFactory, DragDropManager } from './interfaces.js'\nimport type { State } from './reducers/index.js'\nimport { reduce } from './reducers/index.js'\n\nexport function createDragDropManager(\n\tbackendFactory: BackendFactory,\n\tglobalContext: unknown = undefined,\n\tbackendOptions: unknown = {},\n\tdebugMode = false,\n): DragDropManager {\n\tconst store = makeStoreInstance(debugMode)\n\tconst monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store))\n\tconst manager = new DragDropManagerImpl(store, monitor)\n\tconst backend = backendFactory(manager, globalContext, backendOptions)\n\tmanager.receiveBackend(backend)\n\treturn manager\n}\n\nfunction makeStoreInstance(debugMode: boolean): Store<State> {\n\t// TODO: if we ever make a react-native version of this,\n\t// we'll need to consider how to pull off dev-tooling\n\tconst reduxDevTools =\n\t\ttypeof window !== 'undefined' &&\n\t\t(window as any).__REDUX_DEVTOOLS_EXTENSION__\n\treturn createStore(\n\t\treduce,\n\t\tdebugMode &&\n\t\t\treduxDevTools &&\n\t\t\treduxDevTools({\n\t\t\t\tname: 'dnd-core',\n\t\t\t\tinstanceId: 'dnd-core',\n\t\t\t}),\n\t)\n}\n","import { useMemo } from 'react'\n\nimport type { TargetConnector } from '../../internals/index.js'\n\nexport function useConnectDropTarget(connector: TargetConnector) {\n\treturn useMemo(() => connector.hooks.dropTarget(), [connector])\n}\n","import { shallowEqual } from '@react-dnd/shallowequal'\nimport type { Backend, Identifier, Unsubscribe } from 'dnd-core'\nimport type { RefObject } from 'react'\n\nimport type { DropTargetOptions } from '../types/index.js'\nimport { isRef } from './isRef.js'\nimport type { Connector } from './SourceConnector.js'\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js'\n\nexport class TargetConnector implements Connector {\n\tpublic hooks = wrapConnectorHooks({\n\t\tdropTarget: (node: any, options: DropTargetOptions) => {\n\t\t\tthis.clearDropTarget()\n\t\t\tthis.dropTargetOptions = options\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dropTargetRef = node\n\t\t\t} else {\n\t\t\t\tthis.dropTargetNode = node\n\t\t\t}\n\t\t\tthis.reconnect()\n\t\t},\n\t})\n\n\tprivate handlerId: Identifier | null = null\n\t// The drop target may either be attached via ref or connect function\n\tprivate dropTargetRef: RefObject<any> | null = null\n\tprivate dropTargetNode: any\n\tprivate dropTargetOptionsInternal: DropTargetOptions | null = null\n\tprivate unsubscribeDropTarget: Unsubscribe | undefined\n\n\tprivate lastConnectedHandlerId: Identifier | null = null\n\tprivate lastConnectedDropTarget: any = null\n\tprivate lastConnectedDropTargetOptions: DropTargetOptions | null = null\n\tprivate readonly backend: Backend\n\n\tpublic constructor(backend: Backend) {\n\t\tthis.backend = backend\n\t}\n\n\tpublic get connectTarget(): any {\n\t\treturn this.dropTarget\n\t}\n\n\tpublic reconnect(): void {\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didDropTargetChange() ||\n\t\t\tthis.didOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDropTarget()\n\t\t}\n\n\t\tconst dropTarget = this.dropTarget\n\t\tif (!this.handlerId) {\n\t\t\treturn\n\t\t}\n\t\tif (!dropTarget) {\n\t\t\tthis.lastConnectedDropTarget = dropTarget\n\t\t\treturn\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDropTarget = dropTarget\n\t\t\tthis.lastConnectedDropTargetOptions = this.dropTargetOptions\n\n\t\t\tthis.unsubscribeDropTarget = this.backend.connectDropTarget(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdropTarget,\n\t\t\t\tthis.dropTargetOptions,\n\t\t\t)\n\t\t}\n\t}\n\n\tpublic receiveHandlerId(newHandlerId: Identifier | null): void {\n\t\tif (newHandlerId === this.handlerId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.handlerId = newHandlerId\n\t\tthis.reconnect()\n\t}\n\n\tpublic get dropTargetOptions(): DropTargetOptions {\n\t\treturn this.dropTargetOptionsInternal\n\t}\n\tpublic set dropTargetOptions(options: DropTargetOptions) {\n\t\tthis.dropTargetOptionsInternal = options\n\t}\n\n\tprivate didHandlerIdChange(): boolean {\n\t\treturn this.lastConnectedHandlerId !== this.handlerId\n\t}\n\n\tprivate didDropTargetChange(): boolean {\n\t\treturn this.lastConnectedDropTarget !== this.dropTarget\n\t}\n\n\tprivate didOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDropTargetOptions,\n\t\t\tthis.dropTargetOptions,\n\t\t)\n\t}\n\n\tpublic disconnectDropTarget() {\n\t\tif (this.unsubscribeDropTarget) {\n\t\t\tthis.unsubscribeDropTarget()\n\t\t\tthis.unsubscribeDropTarget = undefined\n\t\t}\n\t}\n\n\tprivate get dropTarget() {\n\t\treturn (\n\t\t\tthis.dropTargetNode || (this.dropTargetRef && this.dropTargetRef.current)\n\t\t)\n\t}\n\n\tprivate clearDropTarget() {\n\t\tthis.dropTargetRef = null\n\t\tthis.dropTargetNode = null\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DropTargetMonitor } from '../types/index.js'\n\nlet isCallingCanDrop = false\n\nexport class DropTargetMonitorImpl implements DropTargetMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate targetId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(targetId: Identifier | null): void {\n\t\tthis.targetId = targetId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.targetId\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic canDrop(): boolean {\n\t\t// Cut out early if the target id has not been set. This should prevent errors\n\t\t// where the user has an older version of dnd-core like in\n\t\t// https://github.com/react-dnd/react-dnd/issues/1310\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingCanDrop,\n\t\t\t'You may not call monitor.canDrop() inside your canDrop() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrop = true\n\t\t\treturn this.internalMonitor.canDropOnTarget(this.targetId)\n\t\t} finally {\n\t\t\tisCallingCanDrop = false\n\t\t}\n\t}\n\n\tpublic isOver(options?: { shallow?: boolean }): boolean {\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\treturn this.internalMonitor.isOverTarget(this.targetId, options)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n","import type { DropTarget } from 'dnd-core'\n\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\n\nexport class DropTargetImpl<O, R, P> implements DropTarget {\n\tpublic constructor(\n\t\tpublic spec: DropTargetHookSpec<O, R, P>,\n\t\tprivate monitor: DropTargetMonitor<O, R>,\n\t) {}\n\n\tpublic canDrop() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\treturn spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true\n\t}\n\n\tpublic hover() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (spec.hover) {\n\t\t\tspec.hover(monitor.getItem(), monitor)\n\t\t}\n\t}\n\n\tpublic drop() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (spec.drop) {\n\t\t\treturn spec.drop(monitor.getItem(), monitor)\n\t\t}\n\t\treturn\n\t}\n}\n","import type { TargetConnector } from '../../internals/index.js'\nimport { registerTarget } from '../../internals/index.js'\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\nimport { useAccept } from './useAccept.js'\nimport { useDropTarget } from './useDropTarget.js'\n\nexport function useRegisteredDropTarget<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n\tmonitor: DropTargetMonitor<O, R>,\n\tconnector: TargetConnector,\n): void {\n\tconst manager = useDragDropManager()\n\tconst dropTarget = useDropTarget(spec, monitor)\n\tconst accept = useAccept(spec)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction registerDropTarget() {\n\t\t\tconst [handlerId, unregister] = registerTarget(\n\t\t\t\taccept,\n\t\t\t\tdropTarget,\n\t\t\t\tmanager,\n\t\t\t)\n\t\t\tmonitor.receiveHandlerId(handlerId)\n\t\t\tconnector.receiveHandlerId(handlerId)\n\t\t\treturn unregister\n\t\t},\n\t\t[\n\t\t\tmanager,\n\t\t\tmonitor,\n\t\t\tdropTarget,\n\t\t\tconnector,\n\t\t\taccept.map((a) => a.toString()).join('|'),\n\t\t],\n\t)\n}\n","import { useEffect, useMemo } from 'react'\n\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\nimport { DropTargetImpl } from './DropTargetImpl.js'\n\nexport function useDropTarget<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n\tmonitor: DropTargetMonitor<O, R>,\n) {\n\tconst dropTarget = useMemo(() => new DropTargetImpl(spec, monitor), [monitor])\n\tuseEffect(() => {\n\t\tdropTarget.spec = spec\n\t}, [spec])\n\treturn dropTarget\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Identifier } from 'dnd-core'\nimport { useMemo } from 'react'\n\nimport type { DropTargetHookSpec } from '../types.js'\n\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\nexport function useAccept<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n): Identifier[] {\n\tconst { accept } = spec\n\treturn useMemo(() => {\n\t\tinvariant(spec.accept != null, 'accept must be defined')\n\t\treturn Array.isArray(accept) ? accept : [accept]\n\t}, [accept])\n}\n","import type { ConnectDropTarget } from '../../types/index.js'\nimport type { DropTargetHookSpec, FactoryOrInstance } from '../types.js'\nimport { useCollectedProps } from '../useCollectedProps.js'\nimport { useOptionalFactory } from '../useOptionalFactory.js'\nimport { useConnectDropTarget } from './connectors.js'\nimport { useDropTargetConnector } from './useDropTargetConnector.js'\nimport { useDropTargetMonitor } from './useDropTargetMonitor.js'\nimport { useRegisteredDropTarget } from './useRegisteredDropTarget.js'\n\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\nexport function useDrop<\n\tDragObject = unknown,\n\tDropResult = unknown,\n\tCollectedProps = unknown,\n>(\n\tspecArg: FactoryOrInstance<\n\t\tDropTargetHookSpec<DragObject, DropResult, CollectedProps>\n\t>,\n\tdeps?: unknown[],\n): [CollectedProps, ConnectDropTarget] {\n\tconst spec = useOptionalFactory(specArg, deps)\n\tconst monitor = useDropTargetMonitor<DragObject, DropResult>()\n\tconst connector = useDropTargetConnector(spec.options)\n\tuseRegisteredDropTarget(spec, monitor, connector)\n\n\treturn [\n\t\tuseCollectedProps(spec.collect, monitor, connector),\n\t\tuseConnectDropTarget(connector),\n\t]\n}\n","import { useMemo } from 'react'\n\nimport { DropTargetMonitorImpl } from '../../internals/index.js'\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\n\nexport function useDropTargetMonitor<O, R>(): DropTargetMonitor<O, R> {\n\tconst manager = useDragDropManager()\n\treturn useMemo(() => new DropTargetMonitorImpl(manager), [manager])\n}\n","import { useMemo } from 'react'\n\nimport { TargetConnector } from '../../internals/index.js'\nimport type { DropTargetOptions } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\n\nexport function useDropTargetConnector(\n\toptions: DropTargetOptions,\n): TargetConnector {\n\tconst manager = useDragDropManager()\n\tconst connector = useMemo(\n\t\t() => new TargetConnector(manager.getBackend()),\n\t\t[manager],\n\t)\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dropTargetOptions = options || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDropTarget()\n\t}, [options])\n\treturn connector\n}\n","import { useMemo } from 'react'\n\nimport type { SourceConnector } from '../../internals/index.js'\n\nexport function useConnectDragSource(connector: SourceConnector) {\n\treturn useMemo(() => connector.hooks.dragSource(), [connector])\n}\n\nexport function useConnectDragPreview(connector: SourceConnector) {\n\treturn useMemo(() => connector.hooks.dragPreview(), [connector])\n}\n","import { shallowEqual } from '@react-dnd/shallowequal'\nimport type { Backend, Identifier, Unsubscribe } from 'dnd-core'\nimport type { ReactElement, Ref, RefObject } from 'react'\n\nimport type { DragPreviewOptions, DragSourceOptions } from '../types/index.js'\nimport { isRef } from './isRef.js'\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js'\n\nexport interface Connector {\n\thooks: any\n\tconnectTarget: any\n\treceiveHandlerId(handlerId: Identifier | null): void\n\treconnect(): void\n}\n\nexport class SourceConnector implements Connector {\n\tpublic hooks = wrapConnectorHooks({\n\t\tdragSource: (\n\t\t\tnode: Element | ReactElement | Ref<any>,\n\t\t\toptions?: DragSourceOptions,\n\t\t) => {\n\t\t\tthis.clearDragSource()\n\t\t\tthis.dragSourceOptions = options || null\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dragSourceRef = node as RefObject<any>\n\t\t\t} else {\n\t\t\t\tthis.dragSourceNode = node\n\t\t\t}\n\t\t\tthis.reconnectDragSource()\n\t\t},\n\t\tdragPreview: (node: any, options?: DragPreviewOptions) => {\n\t\t\tthis.clearDragPreview()\n\t\t\tthis.dragPreviewOptions = options || null\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dragPreviewRef = node\n\t\t\t} else {\n\t\t\t\tthis.dragPreviewNode = node\n\t\t\t}\n\t\t\tthis.reconnectDragPreview()\n\t\t},\n\t})\n\tprivate handlerId: Identifier | null = null\n\n\t// The drop target may either be attached via ref or connect function\n\tprivate dragSourceRef: RefObject<any> | null = null\n\tprivate dragSourceNode: any\n\tprivate dragSourceOptionsInternal: DragSourceOptions | null = null\n\tprivate dragSourceUnsubscribe: Unsubscribe | undefined\n\n\t// The drag preview may either be attached via ref or connect function\n\tprivate dragPreviewRef: RefObject<any> | null = null\n\tprivate dragPreviewNode: any\n\tprivate dragPreviewOptionsInternal: DragPreviewOptions | null = null\n\tprivate dragPreviewUnsubscribe: Unsubscribe | undefined\n\n\tprivate lastConnectedHandlerId: Identifier | null = null\n\tprivate lastConnectedDragSource: any = null\n\tprivate lastConnectedDragSourceOptions: any = null\n\tprivate lastConnectedDragPreview: any = null\n\tprivate lastConnectedDragPreviewOptions: any = null\n\n\tprivate readonly backend: Backend\n\n\tpublic constructor(backend: Backend) {\n\t\tthis.backend = backend\n\t}\n\n\tpublic receiveHandlerId(newHandlerId: Identifier | null): void {\n\t\tif (this.handlerId === newHandlerId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.handlerId = newHandlerId\n\t\tthis.reconnect()\n\t}\n\n\tpublic get connectTarget(): any {\n\t\treturn this.dragSource\n\t}\n\n\tpublic get dragSourceOptions(): DragSourceOptions | null {\n\t\treturn this.dragSourceOptionsInternal\n\t}\n\tpublic set dragSourceOptions(options: DragSourceOptions | null) {\n\t\tthis.dragSourceOptionsInternal = options\n\t}\n\n\tpublic get dragPreviewOptions(): DragPreviewOptions | null {\n\t\treturn this.dragPreviewOptionsInternal\n\t}\n\n\tpublic set dragPreviewOptions(options: DragPreviewOptions | null) {\n\t\tthis.dragPreviewOptionsInternal = options\n\t}\n\n\tpublic reconnect(): void {\n\t\tconst didChange = this.reconnectDragSource()\n\t\tthis.reconnectDragPreview(didChange)\n\t}\n\n\tprivate reconnectDragSource(): boolean {\n\t\tconst dragSource = this.dragSource\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didConnectedDragSourceChange() ||\n\t\t\tthis.didDragSourceOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDragSource()\n\t\t}\n\n\t\tif (!this.handlerId) {\n\t\t\treturn didChange\n\t\t}\n\t\tif (!dragSource) {\n\t\t\tthis.lastConnectedDragSource = dragSource\n\t\t\treturn didChange\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDragSource = dragSource\n\t\t\tthis.lastConnectedDragSourceOptions = this.dragSourceOptions\n\t\t\tthis.dragSourceUnsubscribe = this.backend.connectDragSource(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdragSource,\n\t\t\t\tthis.dragSourceOptions,\n\t\t\t)\n\t\t}\n\t\treturn didChange\n\t}\n\n\tprivate reconnectDragPreview(forceDidChange = false): void {\n\t\tconst dragPreview = this.dragPreview\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tforceDidChange ||\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didConnectedDragPreviewChange() ||\n\t\t\tthis.didDragPreviewOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDragPreview()\n\t\t}\n\n\t\tif (!this.handlerId) {\n\t\t\treturn\n\t\t}\n\t\tif (!dragPreview) {\n\t\t\tthis.lastConnectedDragPreview = dragPreview\n\t\t\treturn\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDragPreview = dragPreview\n\t\t\tthis.lastConnectedDragPreviewOptions = this.dragPreviewOptions\n\t\t\tthis.dragPreviewUnsubscribe = this.backend.connectDragPreview(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdragPreview,\n\t\t\t\tthis.dragPreviewOptions,\n\t\t\t)\n\t\t}\n\t}\n\n\tprivate didHandlerIdChange(): boolean {\n\t\treturn this.lastConnectedHandlerId !== this.handlerId\n\t}\n\n\tprivate didConnectedDragSourceChange(): boolean {\n\t\treturn this.lastConnectedDragSource !== this.dragSource\n\t}\n\n\tprivate didConnectedDragPreviewChange(): boolean {\n\t\treturn this.lastConnectedDragPreview !== this.dragPreview\n\t}\n\n\tprivate didDragSourceOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDragSourceOptions,\n\t\t\tthis.dragSourceOptions,\n\t\t)\n\t}\n\n\tprivate didDragPreviewOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDragPreviewOptions,\n\t\t\tthis.dragPreviewOptions,\n\t\t)\n\t}\n\n\tpublic disconnectDragSource() {\n\t\tif (this.dragSourceUnsubscribe) {\n\t\t\tthis.dragSourceUnsubscribe()\n\t\t\tthis.dragSourceUnsubscribe = undefined\n\t\t}\n\t}\n\n\tpublic disconnectDragPreview() {\n\t\tif (this.dragPreviewUnsubscribe) {\n\t\t\tthis.dragPreviewUnsubscribe()\n\t\t\tthis.dragPreviewUnsubscribe = undefined\n\t\t\tthis.dragPreviewNode = null\n\t\t\tthis.dragPreviewRef = null\n\t\t}\n\t}\n\n\tprivate get dragSource() {\n\t\treturn (\n\t\t\tthis.dragSourceNode || (this.dragSourceRef && this.dragSourceRef.current)\n\t\t)\n\t}\n\n\tprivate get dragPreview() {\n\t\treturn (\n\t\t\tthis.dragPreviewNode ||\n\t\t\t(this.dragPreviewRef && this.dragPreviewRef.current)\n\t\t)\n\t}\n\n\tprivate clearDragSource() {\n\t\tthis.dragSourceNode = null\n\t\tthis.dragSourceRef = null\n\t}\n\n\tprivate clearDragPreview() {\n\t\tthis.dragPreviewNode = null\n\t\tthis.dragPreviewRef = null\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DragSourceMonitor } from '../types/index.js'\n\nlet isCallingCanDrag = false\nlet isCallingIsDragging = false\n\nexport class DragSourceMonitorImpl implements DragSourceMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate sourceId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(sourceId: Identifier | null): void {\n\t\tthis.sourceId = sourceId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.sourceId\n\t}\n\n\tpublic canDrag(): boolean {\n\t\tinvariant(\n\t\t\t!isCallingCanDrag,\n\t\t\t'You may not call monitor.canDrag() inside your canDrag() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrag = true\n\t\t\treturn this.internalMonitor.canDragSource(this.sourceId as Identifier)\n\t\t} finally {\n\t\t\tisCallingCanDrag = false\n\t\t}\n\t}\n\n\tpublic isDragging(): boolean {\n\t\tif (!this.sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingIsDragging,\n\t\t\t'You may not call monitor.isDragging() inside your isDragging() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingIsDragging = true\n\t\t\treturn this.internalMonitor.isDraggingSource(this.sourceId)\n\t\t} finally {\n\t\t\tisCallingIsDragging = false\n\t\t}\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic isDraggingSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.isDraggingSource(sourceId)\n\t}\n\n\tpublic isOverTarget(\n\t\ttargetId: Identifier,\n\t\toptions?: { shallow: boolean },\n\t): boolean {\n\t\treturn this.internalMonitor.isOverTarget(targetId, options)\n\t}\n\n\tpublic getTargetIds(): Identifier[] {\n\t\treturn this.internalMonitor.getTargetIds()\n\t}\n\n\tpublic isSourcePublic(): boolean | null {\n\t\treturn this.internalMonitor.isSourcePublic()\n\t}\n\n\tpublic getSourceId(): Identifier | null {\n\t\treturn this.internalMonitor.getSourceId()\n\t}\n\n\tpublic subscribeToOffsetChange(listener: Listener): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToOffsetChange(listener)\n\t}\n\n\tpublic canDragSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDragSource(sourceId)\n\t}\n\n\tpublic canDropOnTarget(targetId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDropOnTarget(targetId)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n","import type { DragDropMonitor, DragSource, Identifier } from 'dnd-core'\n\nimport type { Connector } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragObjectFactory, DragSourceHookSpec } from '../types.js'\n\nexport class DragSourceImpl<O, R, P> implements DragSource {\n\tpublic constructor(\n\t\tpublic spec: DragSourceHookSpec<O, R, P>,\n\t\tprivate monitor: DragSourceMonitor<O, R>,\n\t\tprivate connector: Connector,\n\t) {}\n\n\tpublic beginDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\n\t\tlet result: O | null = null\n\t\tif (typeof spec.item === 'object') {\n\t\t\tresult = spec.item as O\n\t\t} else if (typeof spec.item === 'function') {\n\t\t\tresult = (spec.item as DragObjectFactory<O>)(monitor)\n\t\t} else {\n\t\t\tresult = {} as O\n\t\t}\n\t\treturn result ?? null\n\t}\n\n\tpublic canDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (typeof spec.canDrag === 'boolean') {\n\t\t\treturn spec.canDrag\n\t\t} else if (typeof spec.canDrag === 'function') {\n\t\t\treturn spec.canDrag(monitor)\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t}\n\n\tpublic isDragging(globalMonitor: DragDropMonitor, target: Identifier) {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tconst { isDragging } = spec\n\t\treturn isDragging\n\t\t\t? isDragging(monitor)\n\t\t\t: target === globalMonitor.getSourceId()\n\t}\n\n\tpublic endDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tconst connector = this.connector\n\t\tconst { end } = spec\n\t\tif (end) {\n\t\t\tend(monitor.getItem(), monitor)\n\t\t}\n\t\tconnector.reconnect()\n\t}\n}\n","import type { SourceConnector } from '../../internals/index.js'\nimport { registerSource } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragSourceHookSpec } from '../types.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\nimport { useDragSource } from './useDragSource.js'\nimport { useDragType } from './useDragType.js'\n\nexport function useRegisteredDragSource<O, R, P>(\n\tspec: DragSourceHookSpec<O, R, P>,\n\tmonitor: DragSourceMonitor<O, R>,\n\tconnector: SourceConnector,\n): void {\n\tconst manager = useDragDropManager()\n\tconst handler = useDragSource(spec, monitor, connector)\n\tconst itemType = useDragType(spec)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction registerDragSource() {\n\t\t\tif (itemType != null) {\n\t\t\t\tconst [handlerId, unregister] = registerSource(\n\t\t\t\t\titemType,\n\t\t\t\t\thandler,\n\t\t\t\t\tmanager,\n\t\t\t\t)\n\t\t\t\tmonitor.receiveHandlerId(handlerId)\n\t\t\t\tconnector.receiveHandlerId(handlerId)\n\t\t\t\treturn unregister\n\t\t\t}\n\t\t\treturn\n\t\t},\n\t\t[manager, monitor, connector, handler, itemType],\n\t)\n}\n","import { useEffect, useMemo } from 'react'\n\nimport type { Connector } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragSourceHookSpec } from '../types.js'\nimport { DragSourceImpl } from './DragSourceImpl.js'\n\nexport function useDragSource<O, R, P>(\n\tspec: DragSourceHookSpec<O, R, P>,\n\tmonitor: DragSourceMonitor<O, R>,\n\tconnector: Connector,\n) {\n\tconst handler = useMemo(\n\t\t() => new DragSourceImpl(spec, monitor, connector),\n\t\t[monitor, connector],\n\t)\n\tuseEffect(() => {\n\t\thandler.spec = spec\n\t}, [spec])\n\treturn handler\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Identifier } from 'dnd-core'\nimport { useMemo } from 'react'\n\nimport type { DragSourceHookSpec } from '../types.js'\n\nexport function useDragType(\n\tspec: DragSourceHookSpec<any, any, any>,\n): Identifier {\n\treturn useMemo(() => {\n\t\tconst result: Identifier = spec.type\n\t\tinvariant(result != null, 'spec.type must be defined')\n\t\treturn result\n\t}, [spec])\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tConnectDragPreview,\n\tConnectDragSource,\n} from '../../types/index.js'\nimport type { DragSourceHookSpec, FactoryOrInstance } from '../types.js'\nimport { useCollectedProps } from '../useCollectedProps.js'\nimport { useOptionalFactory } from '../useOptionalFactory.js'\nimport { useConnectDragPreview, useConnectDragSource } from './connectors.js'\nimport { useDragSourceConnector } from './useDragSourceConnector.js'\nimport { useDragSourceMonitor } from './useDragSourceMonitor.js'\nimport { useRegisteredDragSource } from './useRegisteredDragSource.js'\n\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\nexport function useDrag<\n\tDragObject = unknown,\n\tDropResult = unknown,\n\tCollectedProps = unknown,\n>(\n\tspecArg: FactoryOrInstance<\n\t\tDragSourceHookSpec<DragObject, DropResult, CollectedProps>\n\t>,\n\tdeps?: unknown[],\n): [CollectedProps, ConnectDragSource, ConnectDragPreview] {\n\tconst spec = useOptionalFactory(specArg, deps)\n\tinvariant(\n\t\t!(spec as any).begin,\n\t\t`useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`,\n\t)\n\n\tconst monitor = useDragSourceMonitor<DragObject, DropResult>()\n\tconst connector = useDragSourceConnector(spec.options, spec.previewOptions)\n\tuseRegisteredDragSource(spec, monitor, connector)\n\n\treturn [\n\t\tuseCollectedProps(spec.collect, monitor, connector),\n\t\tuseConnectDragSource(connector),\n\t\tuseConnectDragPreview(connector),\n\t]\n}\n","import { useMemo } from 'react'\n\nimport { DragSourceMonitorImpl } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\n\nexport function useDragSourceMonitor<O, R>(): DragSourceMonitor<O, R> {\n\tconst manager = useDragDropManager()\n\treturn useMemo<DragSourceMonitor<O, R>>(\n\t\t() => new DragSourceMonitorImpl(manager),\n\t\t[manager],\n\t)\n}\n","import { useMemo } from 'react'\n\nimport { SourceConnector } from '../../internals/index.js'\nimport type {\n\tDragPreviewOptions,\n\tDragSourceOptions,\n} from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\n\nexport function useDragSourceConnector(\n\tdragSourceOptions: DragSourceOptions | undefined,\n\tdragPreviewOptions: DragPreviewOptions | undefined,\n): SourceConnector {\n\tconst manager = useDragDropManager()\n\tconst connector = useMemo(\n\t\t() => new SourceConnector(manager.getBackend()),\n\t\t[manager],\n\t)\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dragSourceOptions = dragSourceOptions || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDragSource()\n\t}, [connector, dragSourceOptions])\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dragPreviewOptions = dragPreviewOptions || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDragPreview()\n\t}, [connector, dragPreviewOptions])\n\treturn connector\n}\n"],"sourceRoot":""}